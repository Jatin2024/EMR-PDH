"use strict";(self.webpackChunkerp_product_hub=self.webpackChunkerp_product_hub||[]).push([[339],{4174:(e,t,l)=>{l.d(t,{A:()=>d});l(65043);var i=l(8417),n=l(11906),s=l(81e3),a=l(60446),r=l.n(a),o=l(92960);const d=e=>{const{setOpenView:t,setView:l,onChange:a,value:d,...c}=e;return(0,o.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)(i.l,{...e}),(0,o.jsx)(n.A,{onClick:()=>{const e=r()();a(e)},variant:"outlined",size:"small",style:{margin:"8px",position:"absolute",bottom:"2.5px",left:"2.5px"},children:"Today"})]})}},49476:(e,t,l)=>{l.d(t,{A:()=>r});l(65043);var i=l(72126),n=l(81e3),s=l(77739),a=l(92960);const r=function(e){let{title:t}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(s.A,{title:t,children:(0,a.jsxs)(n.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,width:"100%",zIndex:9},children:[(0,a.jsx)(i.A,{sx:{fontSize:60,color:"#1976d2",animation:"spin 1.5s linear infinite",width:"25px",height:"25px",position:"absolute"}}),(0,a.jsx)("style",{children:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "})]})})})}},73334:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ue});var i=l(65043),n=l(73216),s=l(1009),a=l(93291),r=l(34535),o=l(71806),d=l(81e3),c=l(84882),u=l(28076),v=l(10039),h=l(73460),m=l(19090),p=l(51962),g=l(35475),x=l(21803),j=l.n(x),f=l(60446),y=l.n(f),A=l(5137),b=l(17392),C=l(47260),w=l(72819),S=l(78231),k=l(49476),M=l(92960);const O=(0,r.Ay)(o.A)((()=>({whiteSpace:"pre","& thead":{"& tr":{"& th":{paddingLeft:0,paddingRight:0}}},"& tbody":{"& tr":{"& td":{paddingLeft:0,textTransform:"capitalize"}}}}))),R=e=>{var t;return e&&"object"===typeof e&&null!==(t=null===e||void 0===e?void 0:e.ERPstatus)&&void 0!==t?t:"-"},P={success:"limegreen",failed:"red",inprogress:"grey"},D=e=>{const{allCaMCODetails:t,caLifeCycleData:l}=(0,A.d4)((e=>({allCaMCODetails:e.mcoDetails.allCaMCODetails,caLifeCycleData:e.mcoDetails.caLifeCycleData})),A.bN);let{mcolistsArr:n,selected:s,setSelected:a,caRelatedEachMCODetails:r,selectedData:o,setSelectedData:x}=e;const[f,y]=(0,i.useState)(0),[D,E]=(0,i.useState)(100),[I,F]=(0,i.useState)(n||[]),[V,N]=(0,i.useState)(!1),[T,L]=(0,i.useState)(null),[Y,W]=(0,i.useState)(!1),B=localStorage.getItem("instance");return(0,i.useEffect)((()=>{const e=null!==n&&void 0!==n&&n.length?n.slice(f*D,f*D+D):[];F(e),null!==I&&void 0!==I&&I.find((e=>{var t;return"inprogress"===(null===l||void 0===l||null===(t=l[null===e||void 0===e?void 0:e.name])||void 0===t?void 0:t.promoted)}))?W(!0):W(!1)}),[f,D,n,t,s]),(0,i.useEffect)((()=>{const e=s.map((e=>I.find((t=>t.id===e))));x(e)}),[s,I,x]),(0,M.jsxs)(d.A,{width:"100%",overflow:"auto",children:[(0,M.jsxs)(O,{children:[(0,M.jsx)(c.A,{children:(0,M.jsxs)(u.A,{children:[(0,M.jsx)(v.A,{padding:"checkbox",children:(0,M.jsx)(p.A,{color:"primary",indeterminate:s.length>0&&s.length<I.length,checked:I.length>0&&s.length===I.length,onChange:e=>{if(e.target.checked){const e=I.filter((e=>e.name.includes("MVO"))),t=I.filter((e=>!e.name.includes("MVO"))),l=[...e,...t].map((e=>e.id)),i=[...e,...t];return a(l),void x(i)}a([]),x([])},inputProps:{"aria-label":"select all desserts"}})}),(0,M.jsx)(v.A,{align:"left",style:{width:"10%",wordWrap:"word-break"},children:"MCO Name"}),Y?(0,M.jsx)(v.A,{align:"left",style:{width:"50px",wordWrap:"word-break"}}):null,(0,M.jsx)(v.A,{align:"left",style:{width:"10%",wordWrap:"word-break"},children:"RDO"}),(0,M.jsx)(v.A,{align:"left",style:{width:"5%",wordWrap:"word-break"},children:"State"}),(0,M.jsx)(v.A,{align:"left",style:{width:"5%",wordWrap:"word-break"},children:"Plant"}),(0,M.jsx)(v.A,{align:"left",style:{wordWrap:"word-break"},children:"Start Date"}),(0,M.jsx)(v.A,{align:"center",style:{width:"10%",wordWrap:"word-break"},children:"Export Status"}),(0,M.jsx)(v.A,{align:"center",style:{wordWrap:"word-break"},children:"Failed Integration Step"}),(0,M.jsx)(v.A,{align:"left",style:{width:"10%",wordWrap:"word-break"},children:"Resp. Mfg Eng."}),(0,M.jsx)(v.A,{align:"left",style:{wordWrap:"word-break"},children:"Resp. Senior Mfg Eng."})]})}),(0,M.jsx)(h.A,{children:null!==I&&void 0!==I&&I.length?I.map(((e,i)=>{var n,r,d,c;const h=e.name,m=(f=e.id,-1!==s.indexOf(f));var f;const y=`enhanced-table-checkbox-${i}`;let A=t||{},S={};return null!==(n=Object.keys(A))&&void 0!==n&&n.length&&(S=null===A||void 0===A?void 0:A[h]),(0,M.jsxs)(u.A,{onClick:t=>((e,t)=>{const l=s.indexOf(t);let i=[],n=[];if(-1===l){const e=I.find((e=>e.id===t));e.name.includes("MVO")?(i=[t,...s],n=[e,...o]):(i=i.concat(s,t),n=n.concat(o,e))}else 0===l?(i=i.concat(s.slice(1)),n=n.concat(o.slice(1))):l===s.length-1?(i=i.concat(s.slice(0,-1)),n=n.concat(o.slice(0,-1))):l>0&&(i=i.concat(s.slice(0,l),s.slice(l+1)),n=n.concat(o.slice(0,l),o.slice(l+1)));a(i),x(n)})(0,e.id),children:[(0,M.jsx)(v.A,{padding:"checkbox",children:(0,M.jsx)(p.A,{color:"primary",checked:m,inputProps:{"aria-labelledby":y}})}),(0,M.jsx)(v.A,{align:"left",children:(0,M.jsx)(g.Link,{to:`/mcodetail/${"onPrem"===B?null===e||void 0===e?void 0:e.title:"Route"===(null===e||void 0===e?void 0:e.type)?null===e||void 0===e?void 0:e.parentMcoId:null===e||void 0===e?void 0:e.id}`,style:{color:"#1976d2"},onClick:()=>{"Route"===(null===e||void 0===e?void 0:e.type)&&null!==e&&void 0!==e&&e.parentMcoId&&null!==e&&void 0!==e&&e.plantType&&""!==(null===e||void 0===e?void 0:e.plantType)?(localStorage.setItem("plantType",e.plantType),localStorage.setItem("selectedRouteId",e.id)):(localStorage.removeItem("plantType"),localStorage.removeItem("selectedRouteId"))},children:null===e||void 0===e?void 0:e.title})}),Y?"inprogress"===(null===l||void 0===l||null===(r=l[null===e||void 0===e?void 0:e.name])||void 0===r?void 0:r.promoted)?(0,M.jsx)(v.A,{align:"left",children:(0,M.jsx)("div",{style:{position:"relative"},children:(0,M.jsx)(k.A,{title:"inprogress"})})}):(0,M.jsx)(v.A,{align:"left"}):null,(0,M.jsx)(v.A,{align:"left",children:null===e||void 0===e?void 0:e.businessUnit}),(0,M.jsx)(v.A,{align:"left",children:null===e||void 0===e?void 0:e.mcostate}),(0,M.jsx)(v.A,{align:"left",children:null===e||void 0===e?void 0:e.plantName}),(0,M.jsx)(v.A,{align:"left",children:null===e||void 0===e?void 0:e.startdate}),(0,M.jsx)(v.A,{align:"center",children:R(S)}),(0,M.jsx)(v.A,{align:"center",children:S&&null!==(d=Object.keys(S||{}))&&void 0!==d&&d.length&&null!==(c=S)&&void 0!==c&&c.ERPstatus?(0,M.jsx)(b.A,{"aria-label":"close",onClick:e=>{e.stopPropagation(),L(S),N(!0)},sx:e=>{var t,l,i,n,s;return{position:"relative",right:0,top:0,color:null!==(t=["success","failed","inprogress"])&&void 0!==t&&t.includes(null===(l=S)||void 0===l||null===(i=l.ERPstatus)||void 0===i?void 0:i.toLowerCase())?null===P||void 0===P?void 0:P[null===(n=S)||void 0===n||null===(s=n.ERPstatus)||void 0===s?void 0:s.toLowerCase()]:"#1976d2"}},children:(0,M.jsx)(C.A,{})}):(0,M.jsx)(b.A,{"aria-label":"close",onClick:e=>{e.stopPropagation()},sx:e=>({position:"relative",right:0,top:0,color:e.palette.grey[500]}),children:(0,M.jsx)(w.A,{})})}),(0,M.jsx)(v.A,{align:"left",children:null===e||void 0===e?void 0:e.rme}),(0,M.jsx)(v.A,{align:"left",children:null===e||void 0===e?void 0:e.rsme})]},j().generate())})):(0,M.jsx)(u.A,{children:(0,M.jsx)(v.A,{align:"left",colSpan:10,style:{textAlign:"center"},children:"No result found!"})},j().generate())})]}),null!==n&&void 0!==n&&n.length?(0,M.jsx)(m.A,{sx:{px:2},page:f,component:"div",rowsPerPage:D,count:null===n||void 0===n?void 0:n.length,onPageChange:(e,t)=>{y(t),a([]),x([])},rowsPerPageOptions:[100,200,300,400,500],onRowsPerPageChange:e=>{E(+e.target.value),y(0)},nextIconButtonProps:{"aria-label":"Next Page"},backIconButtonProps:{"aria-label":"Previous Page"}}):(0,M.jsx)(M.Fragment,{}),V?(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(S.A,{erpStatusReasonDialogBox:V,updateERPStatusReason:()=>{N(!1)},selectedMCO:T,setSelectedMCO:L})}):null]})};var E=l(68903),I=l(15795),F=l(82357),V=l(74605),N=l(57972),T=l(14256),L=l(83462),Y=l(26600),W=l(35316),B=l(98533),$=l(29347),U=l(11906),z=l(37970),H=l(72221),_=l(63516),q=l(80899),J=l(58390),K=l(89302),Q=l(71732),Z=l(4174);const G=[{name:"PropertyFieldName",mandatory:"Y",dataType:"string",inputType:"select",defaultValues:"",values:[{startdate:"Start date",rme:"RME",rsme:"RSME",description:"Description"}]},{name:"PropertyFieldValue",mandatory:"Y",dataType:"string",inputType:"text",defaultValues:"",values:""}],X=e=>{let{open:t,handleConfirmation:l,handleCancellation:i}=e;return(0,M.jsxs)(L.A,{open:t,children:[(0,M.jsx)(Y.A,{children:"Confirmation"}),(0,M.jsx)(W.A,{children:(0,M.jsx)(B.A,{children:"Are you sure? Do you want to update the data for selected MCO's?"})}),(0,M.jsxs)($.A,{children:[(0,M.jsx)(U.A,{onClick:i,color:"primary",children:"Cancel"}),(0,M.jsx)(U.A,{onClick:l,color:"primary",autoFocus:!0,children:"Save"})]})]})},ee=(0,i.forwardRef)(((e,t)=>{const{RSMEList:l,RMEList:n}=(0,A.d4)((e=>e.mcoDetails)),[s,a]=(0,i.useState)([]),[r,o]=(0,i.useState)({}),[c,u]=(0,i.useState)({}),[v,h]=(0,i.useState)({}),[m,g]=(0,i.useState)(!1);(0,i.useEffect)((()=>{a(G)}),[]),(0,i.useEffect)((()=>{let e={},t={};null===s||void 0===s||s.forEach((l=>{const i=null===l||void 0===l?void 0:l.name;"Y"===(null===l||void 0===l?void 0:l.mandatory)&&(e[i]=q.Yj().required(i+" required!")),""!==(null===l||void 0===l?void 0:l.defaultValues)?t[i]=null===l||void 0===l?void 0:l.defaultValues:t[i]=""})),h(e),o(t)}),[s]);const x=q.Ik().shape(v),f={startdate:"Start date",rme:"Responsible Manufacturing Engineer",rsme:"Responsible Senior Manufacturing Engineer",description:"Description"};return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(_.l1,{initialValues:r,onSubmit:e=>{g(!0),u(e)},enableReinitialize:!0,validationSchema:x,validateOnChange:!1,validateOnBlur:!1,children:function(e){let{values:a,errors:r,touched:o,handleChange:c,handleBlur:u,handleSubmit:v,isSubmitting:h,setSubmitting:m,setFieldValue:g,validateForm:x,isValid:A,submitForm:b}=e;return(0,i.useEffect)((()=>{setTimeout((async()=>{}),500)}),[g]),(0,i.useImperativeHandle)(t,(()=>({callsubmitForm:()=>(b(),A)}))),(0,M.jsx)("form",{onSubmit:v,children:(0,M.jsx)("div",{children:s.length?null===s||void 0===s?void 0:s.map(((e,t)=>{var i,o,c;const u=null===e||void 0===e?void 0:e.name,v=a[u]||(null===e||void 0===e?void 0:e.defaultValues);let h=null===e||void 0===e?void 0:e.inputType,m=a[null===(i=s[0])||void 0===i?void 0:i.name];if(t>0&&!["startdate","rme","rsme","description"].includes(m))return!0;t>0&&["startdate"].includes(m)?h="date":t>0&&["rme","rsme"].includes(m)&&(h="autocomplete");let x=null;var A;["rme","rsme"].includes(m)&&(x=null===(A="rme"===m?n:l)||void 0===A?void 0:A.find((e=>e.key===v)));return(0,M.jsx)("div",{className:"attribute-section",children:(0,M.jsxs)(E.Ay,{container:!0,spacing:3,alignItems:"center",children:[(0,M.jsx)(E.Ay,{item:!0,md:4,sm:6,xs:12,className:"font-medium",children:(0,M.jsxs)("span",{children:[t>0?f[m]:null===e||void 0===e?void 0:e.name,"Y"===(null===e||void 0===e?void 0:e.mandatory)?(0,M.jsx)("span",{style:{color:"red"},children:"*"}):""]})}),(0,M.jsxs)(E.Ay,{item:!0,md:8,sm:6,xs:12,children:["text"===h&&(0,M.jsx)(I.A,{className:"mb-4 w-full ",color:null!==r&&void 0!==r&&r[u]?"warning":"",fullWidth:!0,size:"small",variant:"outlined",id:u,name:u,value:v,onChange:e=>{g(u,e.target.value)},type:"text",style:{marginBottom:"10px"}}),"select"===h&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{children:a[u]}),(0,M.jsxs)(H.A,{value:v,onChange:e=>{g(u,e.target.value)},displayEmpty:!0,renderValue:t=>t?(null===e||void 0===e?void 0:e.values.length)&&(null===e||void 0===e?void 0:e.values[0][t]):(0,M.jsx)("em",{children:"--Select--"}),style:{height:"37.13px",marginBottom:"1rem",width:"100%"},children:[(0,M.jsx)(z.A,{id:"",children:"Select"}),(null===e||void 0===e?void 0:e.values.length)&&Object.keys((null===e||void 0===e?void 0:e.values[0])||{}).map((t=>(0,M.jsx)(z.A,{value:t,children:null===e||void 0===e?void 0:e.values[0][t]},j().generate())))]})]}),"date"===h&&(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(J.$,{dateAdapter:K.R,children:(0,M.jsx)(Q.K,{minDate:y()(),views:["year","month","day"],value:null,onChange:e=>{if(e){let t=y()(e.$d).format("MM/DD/YYYY hh:mm:ss A");"Invalid Date"!==t?g(u,t):e||g(u,e)}else e||g(u,e)},sx:{padding:"0px!important",width:"100%!important",marginBottom:"1rem !important","@global":{input:{padding:"8.5px 14px!important",height:"0.4375em!important"}}},slots:{toolbar:Z.A}})})}),"autocomplete"===h&&(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(F.A,{id:"autoComplete_"+t,value:(null===(o=x)||void 0===o?void 0:o.label)||null,autoHighlight:!0,onChange:(e,t)=>{const l=t&&t.key||null;g(u,l)},onInputChange:(e,t)=>{},options:"rme"===m?n:l,sx:{width:"100%",padding:"0px 0px 10px 0px"},renderInput:e=>(0,M.jsx)(I.A,{...e}),renderOption:(e,t)=>(0,M.jsx)(d.A,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...e,children:t.label})})}),"checkbox"===h&&(0,M.jsx)(M.Fragment,{children:null===e||void 0===e?void 0:e.values.map(((e,t)=>(0,M.jsx)("div",{children:(0,M.jsx)(V.A,{value:e,label:e,labelPlacement:"end",control:(0,M.jsx)(p.A,{})})},j().generate())))}),"radio"===h&&(0,M.jsx)(N.A,{row:!0,name:u,sx:{mb:2},value:null!==(c=a[u])&&void 0!==c?c:"",onChange:e=>{g(u,e.target.value)},style:{display:"flex"},children:null===e||void 0===e?void 0:e.values.map(((e,t)=>(0,M.jsx)("div",{children:(0,M.jsx)(V.A,{value:e,label:e,labelPlacement:"end",control:(0,M.jsx)(T.A,{color:"secondary"})})},j().generate())))}),(0,M.jsx)("div",{style:{textAlign:"left",color:"red",position:"relative",top:"-15px"},children:null===r||void 0===r?void 0:r[u]})]})]})})})):(0,M.jsx)("div",{children:"Form data fields not found."})})})}}),(0,M.jsx)(X,{open:m,handleConfirmation:()=>{null===e||void 0===e||e.saveMassUpdateFormDetails(c),g(!1)},handleCancellation:()=>{g(!1)}})]})}));var te=l(66578),le=l(76987),ie=l(51787),ne=l(88446),se=l(26814),ae=l(50778),re=l(30761),oe=l(89454);l(56659);const de=(0,r.Ay)("div")((e=>{let{theme:t}=e;return{margin:"30px",[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[t.breakpoints.down("sm")]:{marginBottom:"16px"}}}}));function ce(e){return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(E.Ay,{item:!0,md:3,sm:6,xs:6,children:[e.label,(0,M.jsx)("span",{className:"colonSpan",children:":"})]}),(0,M.jsx)(E.Ay,{item:!0,md:9,sm:6,xs:6,children:e.value})]})}const ue=()=>{var e;const{isPageHavingIssue:t,caRelatedEachMCODetails:l,massUpdateChanges:r}=(0,A.d4)((e=>({isPageHavingIssue:e.mcoDetails.isPageHavingIssue,caRelatedEachMCODetails:e.mcoDetails.caRelatedEachMCODetails,massUpdateChanges:e.mcoDetails.massUpdateChanges})),A.bN),o=(0,A.wA)(),[c,u]=(0,i.useState)({}),[v,h]=(0,i.useState)([]),[m,p]=(0,i.useState)(""),[g,x]=(0,i.useState)(!1),[f,y]=(0,i.useState)(!1),[b,C]=(0,i.useState)(null),[w,S]=(0,i.useState)(!1),[k,O]=(0,i.useState)([]),[R,P]=(0,i.useState)([]),[F,V]=(0,i.useState)([]),[N,T]=(0,i.useState)(!1),[z,H]=(0,i.useState)({}),_=(0,n.g)(),q=(0,i.useRef)({}),J=new a.f,K=localStorage.getItem("instance");console.log("mcolistsArr",v);const Q=e=>{try{if(x(!0),""!==e&&null!==e){var t;const l=null===c||void 0===c||null===(t=c.relatedMCOs)||void 0===t?void 0:t.filter((t=>JSON.stringify(t).toLowerCase().includes(e.toLowerCase())));h(l)}else h(null===c||void 0===c?void 0:c.relatedMCOs);x(!1)}catch(l){o((0,se.RY)({isPageHavingIssue:!0}))}},Z=async e=>{if(x(!0),!k.length)return y(!0),C({severity:"error",desc:"Please select mco's."}),void x(!1);let t=!1,l=!1;const i=[];for(const d of k){var n,s,a;const r=null===v||void 0===v?void 0:v.find((e=>e.id===d)),o=null===r||void 0===r||null===(n=r.current)||void 0===n?void 0:n.toLowerCase(),c=null===r||void 0===r||null===(s=r.mcostate)||void 0===s?void 0:s.toLowerCase(),u=R.filter((e=>new Date(null===e||void 0===e?void 0:e.startdate).getFullYear()>=2049)).map((e=>null===e||void 0===e?void 0:e.name));if(u.length>0)return y(!0),C({severity:"error",desc:`Please set MCO date ${u.join(", ")} , promotion cannot be processed with default date.`}),void x(!1);if("review"!==c&&"demote"===e)return y(!0),C({severity:"error",desc:"Demote is only available from Review to Create!"}),void x(!1);if("implemented"===c&&"promote"===e)return y(!0),C({severity:"error",desc:"MCOs cannot be promoted as they are already in an implemented state."}),void x(!1);null!==r&&void 0!==r&&null!==(a=r.name)&&void 0!==a&&a.includes("MVO")&&["create","review"].includes(o)&&k.length>1&&(t=!0),["release"].includes(o)&&(l=!0),i.push(null===r||void 0===r?void 0:r.name),"create"===o&&"promote"===e?r.current="review":"review"===o&&"promote"===e?r.current="release":"review"===o&&"demote"===e&&(r.current="create")}if(t)return y(!0),C({severity:"error",desc:"Please release MVO related mco's first and then others."}),void x(!1);if(l)return y(!0),C({severity:"error",desc:"Please un-select the released mco."}),void x(!1);const{valid:r,errDesc:o}=await(0,ae.tJ)(i,e);if(r)await G(),y(!0),C({severity:"success",desc:o});else if(Array.isArray(o)){let e=[];null===o||void 0===o||o.forEach(((t,l)=>{e.push((0,M.jsx)("li",{children:t},j().generate()))})),y(!0),C({severity:"error",desc:e})}else y(!0),C({severity:"error",desc:o});x(!1)},G=async()=>{try{x(!0),await o((0,se.sy)()),"onPrem"===K&&await(0,re.rx)(),await J.getCARelatedMco(_).then((async e=>{if(Object.keys(e).length)if(Array.isArray(null===e||void 0===e?void 0:e.relatedMCOs)&&null!==e&&void 0!==e&&e.relatedMCOs.length){var t,l,i,n;u(e);const s=[e.relatedMCOs[0]],a=null===(t=s[0])||void 0===t?void 0:t.title,r=(null===(l=e.relatedMCOs[1])||void 0===l||null===(i=l.routeProperties)||void 0===i?void 0:i.map((t=>{var l;return{...t,type:"Route",parentMcoId:null===(l=e.relatedMCOs[0])||void 0===l?void 0:l.id}})))||[];V(r);const d=r.filter((e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.startsWith(a)})),c=r.some((e=>e.title.includes("Prerequisite")&&"Completed"!==e.mcostate));T(c);const v=r.find((e=>e.title.includes("Prerequisite")&&"Completed"!==e.mcostate));H(v);const m=d.map((e=>{var t;const l=null===(t=e.title)||void 0===t?void 0:t.split("-"),i=l.length>2&&l[2]!==a.split("-")[1]?l[l.length-1]:"";return{...e,plantType:i}}));console.log("updatedRoutes",m),o((0,se.MV)(m));const p=[...s,...m];h(p);const g=null===e||void 0===e||null===(n=e.relatedMCOs)||void 0===n?void 0:n.map((e=>({name:e.name,id:e.id})));await(0,ae.L7)(g)}else y(!0),C({severity:"error",desc:"No result found!"});else y(!0),C({severity:"error",desc:e})})),x(!1)}catch(e){o((0,se.RY)({isPageHavingIssue:!0}))}};return(0,i.useEffect)((()=>{try{x(!0),G()}catch(e){x(!1)}}),[]),(0,M.jsx)(de,{children:t?(0,M.jsx)(oe.A,{}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(d.A,{className:"breadcrumb",children:(0,M.jsx)(E.Ay,{container:!0,spacing:1,alignItems:"center",children:(0,M.jsx)(E.Ay,{item:!0,md:6,sm:12,xs:12,children:(0,M.jsx)(s.Qp,{routeSegments:[{name:"CA / MECO Details"}]})})})}),(0,M.jsxs)(s.Tn,{children:[(0,M.jsxs)(E.Ay,{container:!0,spacing:1,alignItems:"center",children:[(0,M.jsx)(E.Ay,{container:!0,spacing:2,alignItems:"center",className:"caDetailsContainer",children:Object.keys(c).length?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(ce,{label:"Name",value:c.name}),(0,M.jsx)(ce,{label:"State",value:c.caState}),(0,M.jsx)(ce,{label:"Description",value:c.description})]}):(0,M.jsx)(M.Fragment,{})}),(0,M.jsx)(E.Ay,{item:!0,md:12,sm:12,xs:12,children:(0,M.jsx)("h4",{children:"Related MCO's:"})}),(0,M.jsx)(E.Ay,{item:!0,md:3,sm:6,xs:12,className:"font-medium",children:(0,M.jsx)(I.A,{type:"text",name:"search",size:"small",onChange:e=>{e.persist();const t=e.target.value;p(t),Q(t)},onKeyDown:e=>{if("Enter"===e.key){const t=e.target.value;p(t),Q(t)}},value:m||"",style:{width:"100%"},InputProps:{endAdornment:(0,M.jsx)(ie.A,{position:"end",children:"*"})}})}),(0,M.jsxs)(E.Ay,{item:!0,md:9,sm:6,xs:12,children:[(0,M.jsx)(U.A,{variant:"contained",onClick:()=>{Q(m)},children:"Search"}),(0,M.jsx)(U.A,{variant:"contained",onClick:G,style:{float:"right"},children:"Refresh"}),r&&null!==(e=Object.keys(r))&&void 0!==e&&e.length?(0,M.jsx)(U.A,{variant:"contained",onClick:async()=>{var e;if(S(!1),x(!0),r&&null!==Object&&void 0!==Object&&null!==(e=Object.keys(r))&&void 0!==e&&e.length&&null!==k&&void 0!==k&&k.length){let e={};const t=(0,re.Ax)(r);for(const l of k)e[l]=t;x(!0),await J.updateMCOObjects(e).then((async e=>{const t=[],l=[],i=[];if(Object.values(e).forEach((e=>{e.errorMsg?(t.push(e.errorMsg),i.push(e.name)):l.push(e.name)})),t.length>0)return await G(),y(!0),void C({severity:"warning",desc:`${i.join(", ")} ${t[0]}${l.length>0?`. Updated successfully for: ${l.join(", ")}`:""}`});await G(),y(!0),C({severity:"success",desc:"Mass update changes updated successfully."})})).finally((()=>{x(!1)}))}},style:{float:"right",marginRight:"15px"},children:"Save"}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(U.A,{variant:"contained",onClick:()=>(async e=>{if(alert("asd"),x(!0),!k.length)return y(!0),C({severity:"error",desc:"Please select mco's."}),void x(!1);let t=!1,l=!1;const i=[];for(const o of k){var n,s;const e=null===v||void 0===v?void 0:v.find((e=>e.id===o));console.log("getSelectedRowData",e);const a=null===e||void 0===e||null===(n=e.current)||void 0===n?void 0:n.toLowerCase(),r=R.filter((e=>new Date(null===e||void 0===e?void 0:e.startdate).getFullYear()>=2049)).map((e=>null===e||void 0===e?void 0:e.name));if(r.length>0)return y(!0),C({severity:"error",desc:`Please set MCO date ${r.join(", ")} , promotion cannot be processed with default date.`}),void x(!1);null!==e&&void 0!==e&&null!==(s=e.name)&&void 0!==s&&s.includes("MVO")&&["create","review"].includes(a)&&k.length>1&&(t=!0),["release"].includes(a)&&(l=!0),i.push(null===e||void 0===e?void 0:e.name)}if(t)return y(!0),C({severity:"error",desc:"Please release MVO related mco's first and then others."}),void x(!1);if(l)return y(!0),C({severity:"error",desc:"Please un-select the released mco."}),void x(!1);const{valid:a,errDesc:r}=await(0,ae._R)(i,e);if(a)await G(),y(!0),C({severity:"success",desc:r});else if(Array.isArray(r)){let e=[];null===r||void 0===r||r.forEach(((t,l)=>{e.push((0,M.jsx)("li",{children:t},j().generate()))})),y(!0),C({severity:"error",desc:e})}else y(!0),C({severity:"error",desc:r});x(!1)})("auto-release"),disabled:!k.length||R&&("Release"===R[0].mcostate||"Implemented"===R[0].mcostate),style:{float:"right",marginRight:"15px"},children:"Auto Release"}),(0,M.jsx)(U.A,{variant:"contained",onClick:()=>Z("promote"),disabled:!k.length,style:{float:"right",marginRight:"15px"},children:"Mass Promote"}),(0,M.jsx)(U.A,{variant:"contained",onClick:()=>Z("demote"),disabled:!k.length,style:{float:"right",marginRight:"15px"},children:"Mass Demote"})]}),(0,M.jsx)(U.A,{variant:"contained",onClick:()=>{(0,ae.ZY)(v,"caMCO")},style:{float:"right",marginRight:"15px"},children:"Export"}),(0,M.jsx)(U.A,{variant:"contained",disabled:!N,onClick:async()=>{if(N)try{const e=await J.getTaskList(z.id);let t=null;if(Array.isArray(e)&&e.length>0?t=e[0].id:"string"===typeof e&&(t=e),t){const e=await J.taskApproval(t);null!==e&&void 0!==e&&e.success&&(y(!0),C({severity:"success",desc:" Task successfully approved!"})),await G()}}catch(n){var e,t,l,i;console.error(" Task Approval Error",n),y(!0),C({severity:"error",desc:(null===n||void 0===n||null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.details)||void 0===l||null===(i=l.Response)||void 0===i?void 0:i.ErrorMessage)||"Approval failed"})}},style:{float:"right",marginRight:"15px"},children:"Validate"}),(0,M.jsx)(ne.A,{component:"button",underline:"none",disabled:!(null!==k&&void 0!==k&&k.length),onClick:()=>{S(!0)},style:{float:"right",padding:"6px 40px 5px 10px",color:null!==k&&void 0!==k&&k.length?"#1976d2":"grey"},children:"Mass Update"})]}),(0,M.jsx)(E.Ay,{item:!0,md:12,sm:12,xs:12,children:(0,M.jsx)(D,{mcolistsArr:v||[],setSelected:O,selected:k,caRelatedEachMCODetails:l,selectedData:R,setSelectedData:P})})]}),b?(0,M.jsx)(le.A,{openAlert:f,openDesc:b,setOpenAlert:y}):(0,M.jsx)(M.Fragment,{}),g?(0,M.jsx)("div",{style:{textAlign:"center"},children:(0,M.jsx)(te.A,{show:g})}):(0,M.jsx)(M.Fragment,{}),(0,M.jsxs)(L.A,{open:w,onClose:()=>{S(!1)},scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",maxWidth:"md",fullWidth:!0,children:[(0,M.jsx)(Y.A,{id:"scroll-dialog-title",children:"Mass update form"}),(0,M.jsx)(W.A,{dividers:!0,children:(0,M.jsx)(B.A,{id:"scroll-dialog-description",tabIndex:-1,children:(0,M.jsx)(ee,{ref:q,saveMassUpdateFormDetails:async e=>{const t={...r,[null===e||void 0===e?void 0:e.PropertyFieldName]:null===e||void 0===e?void 0:e.PropertyFieldValue};o((0,se.RY)({massUpdateChanges:t})),S(!1)}})})}),(0,M.jsxs)($.A,{children:[(0,M.jsx)(U.A,{onClick:()=>{S(!1)},children:"Cancel"}),(0,M.jsx)(U.A,{onClick:()=>{q.current.callsubmitForm()},children:"Save"})]})]})]})]})})}}}]);
//# sourceMappingURL=339.1bf94719.chunk.js.map