"use strict";(self.webpackChunkerp_product_hub=self.webpackChunkerp_product_hub||[]).push([[422],{88422:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var l=n(1009),i=n(65043),d=n(11906),a=n(91048),r=(n(30588),n(34535)),s=n(81e3),o=n(68903),c=n(83462),u=n(26600),m=n(35316),h=n(98533),x=n(29347),v=n(81637),p=n(81807),g=n(83051),j=n(83271),A=n(70579);const f=(0,r.Ay)("div")((e=>{let{theme:t}=e;return{margin:"30px",[t.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[t.breakpoints.down("sm")]:{marginBottom:"16px"}}}})),y=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)([]),[y,b]=(0,i.useState)(!0),[S,k]=(0,i.useState)([]),[w,C]=(0,i.useState)({}),[R,D]=(0,i.useState)(!1),N=new g.i,[F,I]=(0,i.useState)(!1),[M,T]=(0,i.useState)(!1),[_,B]=(0,i.useState)(null),E=(0,i.useRef)(null),P=E&&E.current&&E.current.dataMap?E.current.dataMap:null,O=[{name:"fileName",header:"File Name",defaultFlex:1.5,defaultWidth:20,render:e=>{let{data:t}=e;return(0,A.jsx)("div",{children:null===t||void 0===t?void 0:t.fileName})}},{name:"createdDate",header:"Created Date",defaultFlex:1.5,defaultWidth:200,render:e=>{let{data:t}=e;return(0,A.jsx)("div",{children:null===t||void 0===t?void 0:t.createdDate})}}],U=(0,i.useCallback)((e=>{let{selected:t}=e;C(t)}),[]);(0,i.useEffect)((()=>{const e=!0===w?P:w,t=e&&Object.keys(e).map((t=>e[t]));k(t)}),[w,P]);(0,i.useEffect)((()=>{b(!0),N.getMyReport().then((e=>{Array.isArray(null===e||void 0===e?void 0:e.data)&&(t(null===e||void 0===e?void 0:e.data),r(null===e||void 0===e?void 0:e.data)),b(!1)}))}),[F]),(0,i.useEffect)((()=>{r(e)}),[e]);return(0,A.jsxs)(f,{children:[(0,A.jsx)(s.A,{className:"breadcrumb",children:(0,A.jsx)(l.Qp,{routeSegments:[{name:"My Report"}]})}),(0,A.jsx)(l.Tn,{children:(0,A.jsxs)(o.Ay,{container:!0,spacing:1,alignItems:"center",children:[(0,A.jsx)(o.Ay,{item:!0,md:12,sm:12,xs:12,className:"font-medium",alignItems:"right",children:(0,A.jsxs)(o.Ay,{container:!0,spacing:1,alignItems:"right",children:[(0,A.jsx)(o.Ay,{item:!0,md:6,sm:6,xs:12,className:"font-medium",children:(0,A.jsx)(d.A,{variant:"contained",onClick:()=>{I(!F)},children:"Refresh"})}),(0,A.jsx)(o.Ay,{item:!0,md:6,sm:6,xs:12,className:"font-medium",children:(0,A.jsx)(o.Ay,{container:!0,alignItems:"center",style:{textAlign:"right"},children:(0,A.jsxs)(o.Ay,{item:!0,md:12,sm:12,xs:12,className:"font-medium",style:{paddingRight:"10px"},children:[(0,A.jsx)(d.A,{variant:"contained",disabled:1!==(null===S||void 0===S?void 0:S.length),onClick:()=>{var e;window.open(`${j.Sb}/${null===(e=S[0])||void 0===e?void 0:e.filePath}`)},style:{margin:"0 0px 0 10px"},children:"Download"}),(0,A.jsx)(d.A,{variant:"contained",disabled:0===(null===S||void 0===S?void 0:S.length),onClick:()=>{D(!0)},style:{margin:"0 0px 0 10px"},children:"Delete"})]})})})]})}),(0,A.jsxs)(s.A,{width:"100%",overflow:"auto",marginTop:"10px",children:[y&&(0,A.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,A.jsx)(v.A,{})}),!y&&(0,A.jsx)(a.Ay,{idProperty:"id",showZebraRows:!1,style:{minHeight:550},columns:O,dataSource:n,checkboxColumn:!0,selected:w,defaultLimit:100,sortable:!1,onSelectionChange:U,handle:e=>E.current=e?null===e||void 0===e?void 0:e.current:null,pagination:!0,renderScroller:()=>{var e,t;return null===E||void 0===E||null===(e=E.current)||void 0===e?void 0:e.setScrollTop(0==(null===S||void 0===S?void 0:S.length)?0:null===E||void 0===E||null===(t=E.current)||void 0===t?void 0:t.getScrollTop())}})]})]})}),_?(0,A.jsx)(p.A,{openAlert:M,openDesc:_,setOpenAlert:T}):(0,A.jsx)(A.Fragment,{}),(0,A.jsxs)(c.A,{open:R,children:[(0,A.jsx)(u.A,{style:{cursor:"move"},id:"draggable-dialog-title",children:"Delete Mass Update Report"}),(0,A.jsx)(m.A,{children:(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(h.A,{children:"Do you want to delete the seleted Report(s)?"})})}),(0,A.jsxs)(x.A,{children:[(0,A.jsx)(d.A,{autoFocus:!0,onClick:()=>{D(!1)},children:"Cancel"}),(0,A.jsx)(d.A,{onClick:async()=>{try{const e=null===S||void 0===S?void 0:S.map((e=>null===e||void 0===e?void 0:e.filePath));await N.deleteReport(e).then((e=>{T(!0),B({severity:null===e||void 0===e?void 0:e.status,desc:null===e||void 0===e?void 0:e.msg}),C({}),k([]),D(!1)}))}catch(e){console.error("Failed to delete BU:",e),D(!1)}I(!F)},children:"delete"})]})]})]})}}}]);
//# sourceMappingURL=422.584285d5.chunk.js.map