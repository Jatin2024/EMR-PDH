/*! For license information please see 22.bcb29eec.chunk.js.LICENSE.txt */
(self.webpackChunkerp_product_hub=self.webpackChunkerp_product_hub||[]).push([[22],{22:(e,t,n)=>{var r="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof n.g&&n.g,o=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||"undefined"!==typeof n.g&&n.g||{},o="URLSearchParams"in r,i="Symbol"in r&&"iterator"in Symbol,s="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in r,c="ArrayBuffer"in r;if(c)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&u.indexOf(Object.prototype.toString.call(e))>-1};function d(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function h(e){return"string"!==typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function g(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function m(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function v(e){var t=new FileReader,n=m(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:s&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:o&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&s&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=g(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(s)return this.blob().then(v);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=m(t),r=/charset=([A-Za-z0-9_-]+)/.exec(e.type),o=r?r[1]:"utf-8";return t.readAsText(e,o),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=d(e),t=h(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[d(e)]},p.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},p.prototype.set=function(e,t){this.map[d(e)]=h(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},i&&(p.prototype[Symbol.iterator]=p.prototype.entries);var k=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function b(e,t){if(!(this instanceof b))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=function(e){var t=e.toUpperCase();return k.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in r)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function T(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function S(e){var t=new p;return e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();try{t.append(r,o)}catch(i){console.warn("Response "+i.message)}}})),t}function O(e,t){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},w.call(b.prototype),w.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},O.error=function(){var e=new O(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var E=[301,302,303,307,308];O.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new O(null,{status:t,headers:{location:e}})},t.DOMException=r.DOMException;try{new t.DOMException}catch(_){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function A(e,n){return new Promise((function(o,i){var a=new b(e,n);if(a.signal&&a.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function l(){u.abort()}if(u.onload=function(){var e={statusText:u.statusText,headers:S(u.getAllResponseHeaders()||"")};0===a.url.indexOf("file://")&&(u.status<200||u.status>599)?e.status=200:e.status=u.status,e.url="responseURL"in u?u.responseURL:e.headers.get("X-Request-URL");var t="response"in u?u.response:u.responseText;setTimeout((function(){o(new O(t,e))}),0)},u.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request timed out"))}),0)},u.onabort=function(){setTimeout((function(){i(new t.DOMException("Aborted","AbortError"))}),0)},u.open(a.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?u.withCredentials=!0:"omit"===a.credentials&&(u.withCredentials=!1),"responseType"in u&&(s?u.responseType="blob":c&&(u.responseType="arraybuffer")),n&&"object"===typeof n.headers&&!(n.headers instanceof p||r.Headers&&n.headers instanceof r.Headers)){var f=[];Object.getOwnPropertyNames(n.headers).forEach((function(e){f.push(d(e)),u.setRequestHeader(e,h(n.headers[e]))})),a.headers.forEach((function(e,t){-1===f.indexOf(t)&&u.setRequestHeader(t,e)}))}else a.headers.forEach((function(e,t){u.setRequestHeader(t,e)}));a.signal&&(a.signal.addEventListener("abort",l),u.onreadystatechange=function(){4===u.readyState&&a.signal.removeEventListener("abort",l)}),u.send("undefined"===typeof a._bodyInit?null:a._bodyInit)}))}A.polyfill=!0,r.fetch||(r.fetch=A,r.Headers=p,r.Request=b,r.Response=O),t.Headers=p,t.Request=b,t.Response=O,t.fetch=A,Object.defineProperty(t,"__esModule",{value:!0})}({})}(o),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var i=r.fetch?r:o;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},259:(e,t,n)=>{"use strict";n.d(t,{xeK:()=>R,gEC:()=>As});var r={};n.r(r),n.d(r,{ACCESS_TOKEN_STORAGE_KEY:()=>J,CACHE_STORAGE_NAME:()=>B,DEFAULT_CACHE_DURATION:()=>q,DEFAULT_CODE_CHALLENGE_METHOD:()=>te,DEFAULT_MAX_CLOCK_SKEW:()=>F,DEFAULT_POLLING_DELAY:()=>N,IDX_API_VERSION:()=>ne,IDX_RESPONSE_STORAGE_NAME:()=>z,ID_TOKEN_STORAGE_KEY:()=>Q,IOS_MAX_RETRY_COUNT:()=>H,MAX_VERIFIER_LENGTH:()=>ee,MIN_VERIFIER_LENGTH:()=>Z,ORIGINAL_URI_STORAGE_NAME:()=>G,PKCE_STORAGE_NAME:()=>K,REFERRER_PATH_STORAGE_KEY:()=>X,REFRESH_TOKEN_STORAGE_KEY:()=>Y,SHARED_TRANSACTION_STORAGE_NAME:()=>$,STATE_TOKEN_KEY_NAME:()=>D,TOKEN_STORAGE_NAME:()=>V,TRANSACTION_STORAGE_NAME:()=>W});var o={};n.r(o),n.d(o,{getUserAgent:()=>de,hasTextEncoder:()=>me,isBrowser:()=>ue,isDPoPSupported:()=>ke,isFingerprintSupported:()=>he,isHTTPS:()=>ye,isIE11OrLess:()=>le,isIOS:()=>be,isLocalhost:()=>we,isPKCESupported:()=>ve,isPopupPostMessageSupported:()=>fe,isTokenVerifySupported:()=>ge});var i={};n.r(i),n.d(i,{AuthenticatorEnrollmentData:()=>on,AuthenticatorVerificationData:()=>rn,ChallengeAuthenticator:()=>Bt,ChallengePoll:()=>Kt,EnrollAuthenticator:()=>Ht,EnrollPoll:()=>Ft,EnrollProfile:()=>$t,EnrollmentChannelData:()=>Vt,GenericRemediator:()=>ft,Identify:()=>Gt,ReEnrollAuthenticator:()=>zt,ReEnrollAuthenticatorWarning:()=>Jt,RedirectIdp:()=>Qt,Remediator:()=>dt,ResetAuthenticator:()=>Wt,SelectAuthenticatorAuthenticate:()=>Xt,SelectAuthenticatorEnroll:()=>Zt,SelectAuthenticatorUnlockAccount:()=>en,SelectEnrollProfile:()=>tn,SelectEnrollmentChannel:()=>qt,Skip:()=>sn});var s={};n.r(s),n.d(s,{atob:()=>ie,base64ToBase64Url:()=>Dn,base64UrlDecode:()=>qn,base64UrlToBase64:()=>Nn,base64UrlToBuffer:()=>Vn,base64UrlToString:()=>Hn,btoa:()=>se,bufferToBase64Url:()=>Bn,getOidcHash:()=>Kn,stringToBase64Url:()=>Un,stringToBuffer:()=>Fn,verifyToken:()=>Wn,webcrypto:()=>ae});var a={};n.r(a),n.d(a,{buildCredentialCreationOptions:()=>fi,buildCredentialRequestOptions:()=>pi,getAssertion:()=>mi,getAttestation:()=>gi});var c,u,l,d={};function h(e){return e&&(e.key||e.id)}function f(){var e="undefined"!==typeof window?window.console:"undefined"!==typeof console?console:void 0;return e&&e.log?e:{log:function(){},warn:function(){},group:function(){},groupEnd:function(){}}}function p(e){f().warn("[okta-auth-sdk] WARN: "+e)}function g(e){var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];null!==r&&void 0!==r&&(t[n]=r)}return t}function m(e){if(e){var t=JSON.stringify(e);if(t)return JSON.parse(t)}return e}function v(e){for(var t={},n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&-1==r.indexOf(i)&&(t[i]=e[i]);return m(t)}function y(e,t){for(var n=e.length;n--;){var r=e[n],o=!0;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&r[i]!==t[i]){o=!1;break}if(o)return r}}function w(e,t,n){if(e&&e._links){var r=m(e._links[t]);return r&&r.name&&n?r.name===n?r:void 0:r}}n.r(d),n.d(d,{addEmail:()=>$i,addPhone:()=>es,deleteEmail:()=>Gi,deletePassword:()=>cs,deletePhone:()=>ts,enrollPassword:()=>ss,getEmail:()=>Wi,getEmailChallenge:()=>Ji,getEmails:()=>Ki,getPassword:()=>is,getPhone:()=>Zi,getPhones:()=>Xi,getProfile:()=>Ni,getProfileSchema:()=>Fi,sendEmailChallenge:()=>zi,sendPhoneChallenge:()=>ns,updatePassword:()=>as,updateProfile:()=>Hi,verifyEmailChallenge:()=>Qi,verifyPhoneChallenge:()=>rs}),function(e){e.SUCCESS="SUCCESS",e.PENDING="PENDING",e.FAILURE="FAILURE",e.TERMINAL="TERMINAL",e.CANCELED="CANCELED"}(c||(c={})),function(e){e.OKTA_PASSWORD="okta_password",e.OKTA_EMAIL="okta_email",e.PHONE_NUMBER="phone_number",e.GOOGLE_AUTHENTICATOR="google_otp",e.SECURITY_QUESTION="security_question",e.OKTA_VERIFY="okta_verify",e.WEBAUTHN="webauthn"}(u||(u={})),function(e){e.PASSWORD_RECOVERY="recover-password",e.REGISTRATION="enroll-profile",e.SOCIAL_IDP="redirect-idp",e.ACCOUNT_UNLOCK="unlock-account"}(l||(l={}));class k extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}function b(e){return"[object String]"===Object.prototype.toString.call(e)}function T(e){return"[object Object]"===Object.prototype.toString.call(e)}function S(e){return!!e&&"[object Function]"==={}.toString.call(e)}class O extends k{constructor(e,t,n){var r;super(null!==(r=t.error)&&void 0!==r?r:O.UNKNOWN_ERROR),this.name="WWWAuthError",this.resp=null,this.scheme=e,this.parameters=t,n&&(this.resp=n)}get error(){return this.parameters.error}get errorCode(){return this.error}get error_description(){return this.parameters.error_description}get errorDescription(){return this.error_description}get errorSummary(){return this.errorDescription}get realm(){return this.parameters.realm}static parseHeader(e){var t;if(!e)return null;const n=/(?:,|, )?([a-zA-Z0-9!#$%&'*+\-.^_`|~]+)=(?:"([a-zA-Z0-9!#$%&'*+\-.,^_`|~ /:]+)"|([a-zA-Z0-9!#$%&'*+\-.^_`|~/:]+))/g,r=e.indexOf(" "),o=e.slice(0,r),i=e.slice(r+1),s={};let a;for(;null!==(a=n.exec(i));)s[a[1]]=null!==(t=a[2])&&void 0!==t?t:a[3];return new O(o,s)}static getWWWAuthenticateHeader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return S(null===e||void 0===e?void 0:e.get)?e.get("WWW-Authenticate"):null!==(t=e["www-authenticate"])&&void 0!==t?t:e["WWW-Authenticate"]}}function E(e){for(var t="abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",r=0;r<e;++r)n+=t[Math.floor(61*Math.random())];return n}function A(e){return new Promise((function(t){setTimeout(t,e)}))}function _(e,t){const n=e.split(t);return[n[0],n.splice(1,n.length).join(t)]}function x(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)}function P(e){var t=[];if(null!==e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&void 0!==e[n]&&null!==e[n]&&t.push(n+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""}function C(e){if(e){var t=e.replace(/^\s+|\s+$/gm,"");return t=t.replace(/\/+$/,"")}}O.UNKNOWN_ERROR="UNKNOWN_WWW_AUTH_ERROR";class R extends k{constructor(e,t){super(e),this.name="AuthSdkError",this.errorCode="INTERNAL",this.errorSummary=e,this.errorLink="INTERNAL",this.errorId="INTERNAL",this.errorCauses=[],t&&(this.xhr=t)}}function j(){return E(64)}function I(e){return C((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).issuer)||e.options.issuer}function M(e){const t=I(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return t.indexOf("/oauth2")>0?t:t+"/oauth2"}function L(e,t){if(arguments.length>2)throw new R('As of version 3.0, "getOAuthUrls" takes only a single set of options');var n=C((t=t||{}).authorizeUrl)||e.options.authorizeUrl,r=I(e,t),o=C(t.userinfoUrl)||e.options.userinfoUrl,i=C(t.tokenUrl)||e.options.tokenUrl,s=C(t.logoutUrl)||e.options.logoutUrl,a=C(t.revokeUrl)||e.options.revokeUrl,c=M(e,t);return{issuer:r,authorizeUrl:n=n||c+"/v1/authorize",userinfoUrl:o=o||c+"/v1/userinfo",tokenUrl:i=i||c+"/v1/token",revokeUrl:a=a||c+"/v1/revoke",logoutUrl:s=s||c+"/v1/logout"}}function U(e,t){const n={issuer:e.options.issuer,urls:L(e,t),clientId:t.clientId,redirectUri:t.redirectUri,responseType:t.responseType,responseMode:t.responseMode,scopes:t.scopes,state:t.state,nonce:t.nonce,ignoreSignature:t.ignoreSignature,acrValues:t.acrValues,extraParams:t.extraParams};if(!1===t.pkce)return n;return Object.assign(Object.assign({},n),{codeVerifier:t.codeVerifier,codeChallengeMethod:t.codeChallengeMethod,codeChallenge:t.codeChallenge})}const D="oktaStateToken",N=500,H=3,F=300,q=86400,V="okta-token-storage",B="okta-cache-storage",K="okta-pkce-storage",W="okta-transaction-storage",$="okta-shared-transaction-storage",G="okta-original-uri-storage",z="okta-idx-response-storage",J="accessToken",Q="idToken",Y="refreshToken",X="referrerPath",Z=43,ee=128,te="S256",ne="1.0.0";class re extends k{constructor(e,t,n){super(e.errorSummary),this.name="AuthApiError",this.errorSummary=e.errorSummary,this.errorCode=e.errorCode,this.errorLink=e.errorLink,this.errorId=e.errorId,this.errorCauses=e.errorCauses,t&&(this.xhr=t),n&&(this.meta=n)}}class oe extends k{constructor(e,t,n){super(t),this.resp=null,this.name="OAuthError",this.errorCode=e,this.errorSummary=t,this.error=e,this.error_description=t,n&&(this.resp=n)}}const ie=function(e){return atob(e)},se=function(e){return btoa(e)},ae="undefined"===typeof crypto?null:crypto,ce=/windows phone|iemobile|wpdesktop/i;function ue(){return"undefined"!==typeof document&&"undefined"!==typeof window}function le(){if(!ue())return!1;const e=document.documentMode;return!!e&&e<=11}function de(){return navigator.userAgent}function he(){const e=de();return e&&!ce.test(e)}function fe(){if(!ue())return!1;const e=document.documentMode;var t=e&&e<10;return"undefined"!==typeof window.postMessage&&!t}function pe(){return"undefined"!==typeof ae&&null!==ae&&"undefined"!==typeof ae.subtle&&"undefined"!==typeof Uint8Array}function ge(){return pe()}function me(){return"undefined"!==typeof TextEncoder}function ve(){return ge()&&me()}function ye(){return!!ue()&&"https:"===window.location.protocol}function we(){return ue()&&"localhost"===window.location.hostname}function ke(){return!le()&&"undefined"!==typeof window.indexedDB&&me()&&pe()}function be(){return ue()&&"undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}let Te,Se=0;ue()&&(Se=Date.now(),Te=()=>{document.hidden||(Se=Date.now())},document.addEventListener("visibilitychange",Te));function Oe(e,t){var n;if(t=t||{},e.options.httpRequestInterceptors)for(const g of e.options.httpRequestInterceptors)g(t);var r=t.url,o=t.method,i=t.args,s=t.saveAuthnState,a=t.accessToken,c=!0===t.withCredentials,u=e.options.storageUtil.storage,l=e.storageManager.getHttpCache(e.options.cookies),d=t.pollingIntent,h=null!==(n=e.options.pollDelay)&&void 0!==n?n:0;if(t.cacheResponse){var f=l.getStorage()[r];if(f&&Date.now()/1e3<f.expiresAt)return Promise.resolve(f.response)}var p=e._oktaUserAgent.getHttpHeader(),v=Object.assign({Accept:"application/json","Content-Type":"application/json"},p);Object.assign(v,e.options.headers,t.headers),v=g(v),a&&b(a)&&(v.Authorization="Bearer "+a);var y,w,k,T={headers:v,data:i||void 0,withCredentials:c};if(d&&ue()&&h>0){let t,n,i,s=0;n=()=>{const e=Date.now()-Se;return e<h?new Promise((n=>setTimeout((()=>{document.hidden?n(t()):n()}),h-e))):Promise.resolve()},t=()=>{if(document.hidden){let e;return new Promise((t=>{e=()=>{document.hidden||(document.removeEventListener("visibilitychange",e),t(n()))},document.addEventListener("visibilitychange",e)}))}return n()};const a=()=>e.options.httpRequestClient(o,r,T).catch((e=>{if("Load failed"===(null===e||void 0===e?void 0:e.message)&&s<H)return s++,i();throw e}));i=()=>t().then(a),k=i()}else k=e.options.httpRequestClient(o,r,T);return k.then((function(n){return(w=n.responseText)&&b(w)&&(w=JSON.parse(w))&&"object"===typeof w&&!w.headers&&(Array.isArray(w)?w.forEach((e=>{e.headers=n.headers})):w.headers=n.headers),s&&(w.stateToken||u.delete(D)),w&&w.stateToken&&w.expiresAt&&u.set(D,w.stateToken,w.expiresAt,e.options.cookies),w&&t.cacheResponse&&l.updateStorage(r,{expiresAt:Math.floor(Date.now()/1e3)+q,response:w}),w})).catch((function(t){throw y=((e,t)=>{var n;if(t instanceof Error)return new re({errorSummary:t.message});let r,o=t,i={};if(o.responseText&&b(o.responseText))try{i=JSON.parse(o.responseText)}catch(a){i={errorSummary:"Unknown error"}}o.status>=500&&(i.errorSummary="Unknown error"),e.options.transformErrorXHR&&(o=e.options.transformErrorXHR(m(o)));const s=null!==(n=O.getWWWAuthenticateHeader(null===o||void 0===o?void 0:o.headers))&&void 0!==n?n:"";if(r=i.error&&i.error_description?new oe(i.error,i.error_description,o):new re(i,o,{wwwAuthHeader:s}),s&&(null===o||void 0===o?void 0:o.status)>=400&&(null===o||void 0===o?void 0:o.status)<500){const e=O.parseHeader(s);if(403===o.status&&"insufficient_authentication_context"===(null===e||void 0===e?void 0:e.error)){const{max_age:t,acr_values:n}=e.parameters;r=new re({errorSummary:e.error,errorCauses:[{errorSummary:e.errorDescription}]},o,Object.assign({max_age:+t},n&&{acr_values:n}))}else"DPoP"===(null===e||void 0===e?void 0:e.scheme)&&(r=e)}return r})(e,t),"E0000011"===y.errorCode&&u.delete(D),y}))}function Ee(e,t,n){var r={url:t=x(t)?t:e.getIssuerOrigin()+t,method:"GET"};return Object.assign(r,n),Oe(e,r)}function Ae(e,t,n,r){var o={url:t=x(t)?t:e.getIssuerOrigin()+t,method:"POST",args:n,saveAuthnState:!0};return Object.assign(o,r),Oe(e,o)}var _e=n(841);function xe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var Pe,Ce=function e(t,n){function r(e,r,o){if("undefined"!==typeof document){"number"===typeof(o=xe({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in o)o[s]&&(i+="; "+s,!0!==o[s]&&(i+="="+o[s].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+i}}return Object.create({set:r,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),s=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(r[a]=t.read(s,a),e===a)break}catch(c){}}return e?r[e]:r}},remove:function(e,t){r(e,"",xe({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,xe({},this.attributes,t))},withConverter:function(t){return e(xe({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),Re=n(22);function je(e){return e&&e.accessToken}function Ie(e){return e&&e.idToken}function Me(e){return e&&e.refreshToken}function Le(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}async function Ue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.token.prepareTokenParams(t),r=U(e,n);let{flow:o="default",withCredentials:i=!0,activationToken:s,recoveryToken:a,maxAge:c,acrValues:u}=Object.assign(Object.assign({},e.options),t);return Object.assign(Object.assign({},r),{flow:o,withCredentials:i,activationToken:s,recoveryToken:a,maxAge:c,acrValues:u})}function De(e,t){const n=Ne(e,t);return!!(null===n||void 0===n?void 0:n.interactionHandle)}function Ne(e,t){let n;t=g(t),t=Object.assign(Object.assign({},e.options),t);try{n=e.transactionManager.load(t)}catch(r){}if(n)return Ve(n,t)?n:void p("Saved transaction meta does not match the current configuration. This may indicate that two apps are sharing a storage key.")}async function He(e,t){t=g(t);const n=Ne(e,t=Object.assign(Object.assign({},e.options),t));return n||Ue(e,t)}function Fe(e,t){e.transactionManager.save(t,{muteWarning:!0})}function qe(e){e.transactionManager.clear()}function Ve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!1===function(e,t,n){const r=n.some((n=>{const r=t[n];if(r&&r!==e[n])return!0}));return!r}(e,t,["issuer","clientId","redirectUri","state","codeChallenge","codeChallengeMethod","activationToken","recoveryToken"]))return!1;const{flow:n}=t;return!1!==function(e,t){const n=t&&"default"!==t&&"proceed"!==t;if(n&&t!==e.flow)return!1;return!0}(e,n)}function Be(e){return{meta:e,interactionHandle:e.interactionHandle,state:e.state}}async function Ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=g(t);let n=Ne(e,t);if(null===n||void 0===n?void 0:n.interactionHandle)return Be(n);n=await Ue(e,Object.assign(Object.assign({},n),t));const r=M(e);let{clientId:o,redirectUri:i,state:s,scopes:a,withCredentials:c,codeChallenge:u,codeChallengeMethod:l,activationToken:d,recoveryToken:h,maxAge:f,acrValues:p,nonce:m}=n;const v=t.clientSecret||e.options.clientSecret;c=null===c||void 0===c||c;const y=`${r}/v1/interact`,w=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({client_id:o,scope:a.join(" "),redirect_uri:i,code_challenge:u,code_challenge_method:l,state:s},d&&{activation_token:d}),h&&{recovery_token:h}),v&&{client_secret:v}),f&&{max_age:f}),p&&{acr_values:p}),m&&{nonce:m}),k=(await Oe(e,{method:"POST",url:y,headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:c,args:w})).interaction_handle,b=Object.assign(Object.assign({},n),{interactionHandle:k,withCredentials:c,state:s,scopes:a,recoveryToken:h,activationToken:d});return Fe(e,b),Be(b)}!function(e){e.ACCESS="accessToken",e.ID="idToken",e.REFRESH="refreshToken"}(Pe||(Pe={})),"function"===typeof SuppressedError&&SuppressedError;const We=function(e){return!1!==e.mutable},$e=function(e){var t,n;const r={},o=[],i={};if(!e.value)return o.push(e),{defaultParamsForAction:r,neededParamsForAction:o,immutableParamsForAction:i};for(let s of e.value)We(s)?(o.push(s),null!==(t=s.value)&&void 0!==t&&t&&(r[s.name]=s.value)):i[s.name]=null!==(n=s.value)&&void 0!==n?n:"";return{defaultParamsForAction:r,neededParamsForAction:o,immutableParamsForAction:i}},Ge=function(e,t){let{actionDefinition:n,defaultParamsForAction:r={},immutableParamsForAction:o={},toPersist:i={}}=t;const s=n.href;return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a,c;const u={"Content-Type":"application/json",Accept:n.accepts||"application/ion+json"},l=JSON.stringify(Object.assign(Object.assign(Object.assign({},r),t),o));try{const t={url:s,method:n.method,headers:u,args:l,withCredentials:null===(a=null===i||void 0===i?void 0:i.withCredentials)||void 0===a||a};("poll"===n.name||(null===(c=n.name)||void 0===c?void 0:c.endsWith("-poll")))&&(t.pollingIntent=!0);const r=await Oe(e,t);return e.idx.makeIdxResponse(Object.assign({},r),i,!0)}catch(d){if(!(d instanceof re)||!(null===d||void 0===d?void 0:d.xhr))throw d;const t=d.xhr,n=t.responseJSON||JSON.parse(t.responseText),r=t.headers["WWW-Authenticate"]||t.headers["www-authenticate"],o=e.idx.makeIdxResponse(Object.assign({},n),i,!1);return 401===t.status&&'Oktadevicejwt realm="Okta Device"'===r&&(o.stepUp=!0),o}}},ze=function(e,t,n){const r=Ge,{defaultParams:o,neededParams:i,immutableParams:s}=function(e){e=Array.isArray(e)?e:[e];const t=[],n={},r={};for(let o of e){const{defaultParamsForAction:e,neededParamsForAction:i,immutableParamsForAction:s}=$e(o);t.push(i),n[o.name]=e,r[o.name]=s}return{defaultParams:n,neededParams:t,immutableParams:r}}(t),a=r(e,{actionDefinition:t,defaultParamsForAction:o[t.name],immutableParamsForAction:s[t.name],toPersist:n});return a.neededParams=i,a},Je=/\$?(?<step>\w+)|(?:\[(?<index>\d+)\])/g;const Qe={remediation:!0,context:!0},Ye=(e,t)=>{Object.keys(t).forEach((n=>{if("relatesTo"===n){const r=Array.isArray(t[n])?t[n][0]:t[n];if("string"===typeof r){const o=function(e){let{path:t,json:n}=e;var r,o,i;const s=[];let a;for(;null!==(a=Je.exec(t));){const e=null!==(o=null===(r=null===a||void 0===a?void 0:a.groups)||void 0===r?void 0:r.step)&&void 0!==o?o:null===(i=null===a||void 0===a?void 0:a.groups)||void 0===i?void 0:i.index;e&&s.push(e)}if(s.length<1)return;const c=s.pop();let u=n;for(const l of s)if(Object.prototype.hasOwnProperty.call(u,l)){if("object"!==typeof u[l])return;u=u[l]}return u[c]}({path:r,json:e});if(o)return void(t[n]=o);throw new R(`Cannot resolve relatesTo: ${r}`)}}Array.isArray(t[n])&&t[n].forEach((t=>Ye(e,t)))}))},Xe=(e,t,n)=>{if(t.rel){const r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.reduce(((t,r)=>Object.assign(Object.assign({},t),{[r.name]:ze(e,r,n)})),{})}(e,[t],n),o=r[t.name];return Object.assign(Object.assign({},t),{action:o})}return t},Ze=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r;const o=(null===(r=t.remediation)||void 0===r?void 0:r.value)||[];o.forEach((e=>{var n;if("launch-authenticator"!==e.name||"authenticatorChallenge"!==(null===(n=null===e||void 0===e?void 0:e.relatesTo)||void 0===n?void 0:n[0])||(null===t||void 0===t?void 0:t.authenticatorChallenge))return Ye(t,e);delete e.relatesTo}));const i=o.map((t=>Xe(e,t,n))),{context:s,actions:a}=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={},o={};return Object.keys(t).filter((e=>!Qe[e])).forEach((i=>{if("object"!==typeof t[i]||!t[i])return void(o[i]=t[i]);if(t[i].rel)return void(r[t[i].name]=ze(e,t[i],n));const s=t[i],{value:a,type:c}=s,u=Le(s,["value","type"]);o[i]=Object.assign({type:c},u),"object"===c?(o[i].value={},Object.entries(a).forEach((t=>{let[s,a]=t;a.rel?r[`${i}-${s.name||s}`]=ze(e,a,n):o[i].value[s]=a}))):o[i].value=a})),{context:o,actions:r}}(e,t,n);return{remediations:i,context:s,actions:a}};var et={makeIdxState:function(e,t,n,r){var o,i,s;const a=t,{remediations:c,context:u,actions:l}=Ze(e,t,n);return{proceed:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=c.find((t=>t.name===e));if(!n)return Promise.reject(`Unknown remediation choice: [${e}]`);return"function"!==typeof n.action?Promise.reject(`Current remediation cannot make form submit action: [${e}]`):n.action(t)},neededToProceed:[...c],actions:l,context:u,rawIdxState:a,interactionCode:null===(s=null===(i=null===(o=a.successWithInteractionCode)||void 0===o?void 0:o.value)||void 0===i?void 0:i.find((e=>"interaction_code"===e.name)))||void 0===s?void 0:s.value,toPersist:n,requestDidSucceed:r}}};const tt=function(e){switch(e){case"1.0.0":return et;case void 0:case null:throw new Error("Api version is required");default:throw new Error(`Unknown api version: ${e}.  Use an exact semver version.`)}};function nt(e){if(!e)throw new Error("version is required");if((null!==e&&void 0!==e?e:"").replace(/[^0-9a-zA-Z._-]/,"")!==e||!e)throw new Error("invalid version supplied - version is required and uses semver syntax");tt(e)}function rt(e,t,n,r){var o;const i=null!==(o=null===t||void 0===t?void 0:t.version)&&void 0!==o?o:ne;nt(i);const{makeIdxState:s}=tt(i);return s(e,t,n,r)}function ot(e){return e&&e.version}function it(e){return e instanceof oe}async function st(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;let r,o;const i=e.transactionManager.loadIdxResponse(t);if(i&&(r=i.rawIdxResponse,o=i.requestDidSucceed),!r){const i=t.version||ne,s=function(e){return I(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).split("/oauth2")[0]}(e),{interactionHandle:c,stateHandle:u}=t,l=null===(n=t.withCredentials)||void 0===n||n;try{o=!0,nt(i);const t=`${s}/idp/idx/introspect`,n=u?{stateToken:u}:{interactionHandle:c},a={"Content-Type":`application/ion+json; okta-version=${i}`,Accept:`application/ion+json; okta-version=${i}`};r=await Oe(e,{method:"POST",url:t,headers:a,withCredentials:l,args:n})}catch(a){if(!(a instanceof re&&a.xhr&&ot(a.xhr.responseJSON)))throw a;r=a.xhr.responseJSON,o=!1}}const{withCredentials:s}=t;return rt(e,r,{withCredentials:s},o)}function at(e){return e.charAt(0).toUpperCase()+e.substring(1)}function ct(e){return e.value.find((e=>{let{name:t}=e;return"authenticator"===t}))}function ut(e){let t;if(h(e))t=e;else{if("string"!==typeof e)throw new Error("Invalid format for authenticator");t={key:e}}return t}function lt(e,t){return!(!e||!t)&&(e.id&&t.id?e.id===t.id:!(!e.key||!t.key)&&e.key===t.key)}class dt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.values=Object.assign({},t),this.options=Object.assign({},n),this.formatAuthenticators(),this.remediation=e}formatAuthenticators(){if(this.values.authenticators=this.values.authenticators||[],this.values.authenticators=this.values.authenticators.map((e=>ut(e))),this.values.authenticator){const e=ut(this.values.authenticator);this.values.authenticators.some((t=>lt(e,t)))||this.values.authenticators.push(e)}this.values.authenticatorsData=this.values.authenticators.reduce(((e,t)=>("object"===typeof t&&Object.keys(t).length>1&&e.push(t),e)),this.values.authenticatorsData||[])}getName(){return this.remediation.name}canRemediate(e){return!function(e){var t;return null===(t=e.value)||void 0===t?void 0:t.reduce(((e,t)=>(t.required&&e.push(t.name),e)),[])}(this.remediation).find((e=>!this.hasData(e)))}getData(e){if(!e){let e=function(e){var t;return null===(t=e.value)||void 0===t?void 0:t.map((e=>e.name))}(this.remediation).reduce(((e,t)=>(e[t]=this.getData(t),e)),{});return e}if("function"===typeof this[`map${at(e)}`]){const t=this[`map${at(e)}`](this.remediation.value.find((t=>{let{name:n}=t;return n===e})));if(t)return t}if(this.map&&this.map[e]){const t=this.map[e];for(let e=0;e<t.length;e++){let n=this.values[t[e]];if(n)return n}}return this.values[e]}hasData(e){return!!this.getData(e)}getNextStep(e,t){const n=this.getName(),r=this.getInputs(),o=this.getAuthenticator(),i=null===o||void 0===o?void 0:o.type;return Object.assign(Object.assign({name:n,inputs:r},i&&{type:i}),o&&{authenticator:o})}getInputs(){const e=[];return(this.remediation.value||[]).forEach((t=>{let n,{name:r,type:o,visible:i,messages:s}=t;if(!1!==i){if("function"===typeof this[`getInput${at(r)}`])n=this[`getInput${at(r)}`](t);else if("object"!==o){let e;const o=(this.map?this.map[r]:null)||[];e=1===o.length?o[0]:o.find((e=>Object.keys(this.values).includes(e))),e&&(n=Object.assign(Object.assign({},t),{name:e}))}n||(n=t),Array.isArray(n)?n.forEach((t=>e.push(t))):(s&&(n.messages=s),e.push(n))}})),e}static getMessages(e){var t,n;if(e.value)return null===(n=null===(t=e.value[0])||void 0===t?void 0:t.form)||void 0===n?void 0:n.value.reduce(((e,t)=>(t.messages&&(e=[...e,...t.messages.value]),e)),[])}getValuesAfterProceed(){const e=[...this.remediation.value||[],...this.getInputs()];for(const t of e)delete this.values[t.name];return this.values}getAuthenticator(){var e,t;const n=null===(e=this.remediation.relatesTo)||void 0===e?void 0:e.value;if(!n)return;const r=ct(this.remediation);if(!r)return n;const o=r.form.value.find((e=>{let{name:t}=e;return"id"===t})).value,i=null===(t=r.form.value.find((e=>{let{name:t}=e;return"enrollmentId"===t})))||void 0===t?void 0:t.value;return Object.assign(Object.assign({},n),{id:o,enrollmentId:i})}}function ht(e){if(Array.isArray(e))return e.map((e=>"string"===typeof e||"number"===typeof e||"boolean"===typeof e?e:ht(e)));const t={};for(const[n,r]of Object.entries(e))if(null!==r&&"undefined"!==typeof r)if("object"===typeof r){const e=Object.keys(r);if(["value","form"].includes(n)&&1===e.length&&["value","form"].includes(e[0])){const e=ht(r);Object.entries(e).forEach((e=>{let[n,r]=e;t[n]=r}))}else t[n]=ht(r)}else t[n]=r;return t}class ft extends dt{canRemediate(){return"function"===typeof this.remediation.action&&(!("poll"!==this.remediation.name&&!this.remediation.name.endsWith("-poll"))||!!this.options.step)}getData(){return this.getInputs().reduce(((e,t)=>{let{name:n}=t;return e[n]=this.values[n],e}),{})}getNextStep(e,t){const n=this.getName(),r=this.getInputs(),o=this.remediation,{href:i,method:s,rel:a,accepts:c,produces:u,value:l,action:d}=o,h=Le(o,["href","method","rel","accepts","produces","value","action"]);return d?Object.assign(Object.assign(Object.assign({},h),!!r.length&&{inputs:r}),{action:async t=>e.idx.proceed(Object.assign({step:n},t))}):Object.assign({},this.remediation)}getInputs(){return(this.remediation.value||[]).filter((e=>{let{name:t}=e;return"stateHandle"!==t})).map(ht).map((e=>(e.type=e.type||"string",e)))}}const pt={remediators:{},getFlowSpecification:function(e){return{remediators:{}}}};function gt(e){const{neededToProceed:t,interactionCode:n}=e;return!t.length&&!n}function mt(e){if(e&&Array.isArray(e))return e.reduce(((e,t)=>{if(t.messages&&(e=[...e,...t.messages.value]),t.form){const n=mt(t.form.value)||[];e=[...e,...n]}if(t.options){let n=[];t.options.forEach((e=>{e.value&&"string"!==typeof e.value&&(n=[...n,e.value])}));const r=mt(n)||[];e=[...e,...r]}return e}),[])}function vt(e,t){var n;let r=[];const{rawIdxState:o,neededToProceed:i}=e,s=null===(n=o.messages)||void 0===n?void 0:n.value.map((e=>e));if(s&&(r=[...r,...s]),!t.useGenericRemediator)for(let c of i){const e=mt(c.value);e&&(r=[...r,...e])}const a={};return r=r.reduce(((e,t)=>{var n;const r=null===(n=t.i18n)||void 0===n?void 0:n.key;return r&&a[r]&&t.message===a[r].message?e:(a[r]=t,e=[...e,t])}),[]),r}function yt(e,t){const{useGenericRemediator:n,remediators:r}=t;if(e)return n?ft:r[e.name]}function wt(e,t,n){const r=n.remediators,o=n.useGenericRemediator,{neededToProceed:i,context:s}=e;let a;if(n.step){const e=i.find((e=>{let{name:t}=e;return t===n.step}));if(e){const r=yt(e,n);return r?new r(e,t,n):void 0}return void p(`step "${n.step}" did not match any remediations`)}const c=[];if(o)c.push(new ft(i[0],t,n));else for(let u of i){if(!Object.keys(r).includes(u.name))continue;if(a=new(yt(u,n))(u,t,n),a.canRemediate(s))return a;c.push(a)}return c[0]}function kt(e,t,n){const r=t.getNextStep(e,n.context),o=function(e){return e.neededToProceed.some((e=>{let{name:t}=e;return"skip"===t}))}(n),i=function(e){return Object.keys(e.actions).some((e=>e.includes("resend")))}(n);return Object.assign(Object.assign(Object.assign({},r),o&&{canSkip:o}),i&&{canResend:i})}function bt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=gt(t),o=vt(t,n);if(r)return{idxResponse:t,terminal:r,messages:o};{const r=wt(t,{},n),i=r&&kt(e,r,t);return Object.assign({idxResponse:t,messages:o},i&&{nextStep:i})}}function Tt(e){return Object.assign(Object.assign({},e),{resend:void 0})}function St(e,t){let n=e.actions||[];return n=n.filter((e=>"string"===typeof e?e!==t:e.name!==t)),Object.assign(Object.assign({},e),{actions:n})}async function Ot(e,t,n,r){let{neededToProceed:o,interactionCode:i}=t;const{flow:s}=r;if(i)return{idxResponse:t};const a=wt(t,n,r),c=function(e,t){return Object.keys(t.actions).find((t=>!!e.resend&&t.includes("-resend")))}(n,t),u=[...r.actions||[],...c&&[c]||[]];if(u)for(let f of u){let i={};"string"!==typeof f&&(i=f.params||{},f=f.name);let s=Tt(n),a=St(r,f);if("function"===typeof t.actions[f])return!1===(t=await t.actions[f](i)).requestDidSucceed?bt(e,t,r):"cancel"===f?{idxResponse:t,canceled:!0}:Ot(e,t,s,a);const c=o.find((e=>{let{name:t}=e;return t===f}));if(c)return!1===(t=await t.proceed(f,i)).requestDidSucceed?bt(e,t,r):Ot(e,t,n,a)}const l=gt(t);if(l)return{idxResponse:t,terminal:l};if(!a){if(r.step)return n=function(e,t,n){const r=(e.neededToProceed||[]).find((e=>e.name===t));return r?r.value.reduce(((e,t)=>{const{name:r,value:o}=t;return e[r]="stateHandle"===r?o:n[r],e}),{}):(p(`filterValuesForRemediation: "${t}" did not match any remediations`),n)}(t,r.step,n),!1===(t=await t.proceed(r.step,n)).requestDidSucceed?bt(e,t,r):{idxResponse:t};if("default"===s)return{idxResponse:t};throw new R(`\n      No remediation can match current flow, check policy settings in your org.\n      Remediations: [${o.reduce(((e,t)=>e?e+" ,"+t.name:t.name),"")}]\n    `)}if(!a.canRemediate()){return{idxResponse:t,nextStep:kt(e,a,t)}}const d=a.getName(),h=a.getData();if(!1===(t=await t.proceed(d,h)).requestDidSucceed)return bt(e,t,r);if(n=a.getValuesAfterProceed(),(r=Object.assign(Object.assign({},r),{step:void 0})).useGenericRemediator&&!t.interactionCode&&!gt(t)){return{idxResponse:t,nextStep:kt(e,wt(t,n,r),t)}}return Ot(e,t,n,r)}function Et(e){const t=Object.assign({},e);return["flow","remediators","actions","withCredentials","step","useGenericRemediator","exchangeCodeForTokens"].forEach((e=>{delete t[e]})),t}function At(e,t){var n,r,o,i;let{options:s}=t;s=Object.assign(Object.assign({},e.options.idx),s);let{flow:a,withCredentials:u,remediators:l,actions:d}=s;const h=c.PENDING;if(a=a||(null===(r=(n=e.idx).getFlow)||void 0===r?void 0:r.call(n))||"default",a){null===(i=(o=e.idx).setFlow)||void 0===i||i.call(o,a);const t=function(e){return pt.getFlowSpecification(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default")}(e,a);u="undefined"!==typeof u?u:t.withCredentials,l=l||t.remediators,d=d||t.actions}return Object.assign(Object.assign({},t),{options:Object.assign(Object.assign({},s),{flow:a,withCredentials:u,remediators:l,actions:d}),status:h})}async function _t(e,t){let{options:n,idxResponse:r,canceled:o,status:i}=t;const{exchangeCodeForTokens:s}=n;let a,u,d,h,f,p,g=!1,m=!1,v=!0;if(r&&(g=!(!r.requestDidSucceed&&!r.stepUp),d=function(e){const t=[],{actions:n,neededToProceed:r}=e;return n["currentAuthenticator-recover"]&&t.push(l.PASSWORD_RECOVERY),r.some((e=>{let{name:t}=e;return"select-enroll-profile"===t}))&&t.push(l.REGISTRATION),r.some((e=>{let{name:t}=e;return"redirect-idp"===t}))&&t.push(l.SOCIAL_IDP),r.some((e=>{let{name:t}=e;return"unlock-account"===t}))&&t.push(l.ACCOUNT_UNLOCK),t}(r),h=function(e,t,n){var r;const o=[],i=Object.values(pt.remediators).reduce(((e,t)=>(t.remediationName&&(e[t.remediationName]=t),e)),{});for(let s of t.neededToProceed){const r=yt(s,{useGenericRemediator:n,remediators:i});if(r){const n=new r(s);o.push(n.getNextStep(e,t.context))}}for(const[s]of Object.entries(t.actions||{})){let n={name:s,action:async t=>e.idx.proceed({actions:[{name:s,params:t}]})};if(s.startsWith("currentAuthenticator")){const[e,o]=_(s,"-"),i=t.rawIdxState[e].value[o],a=Le(i,["href","method","rel","accepts","produces"]),c=null===(r=i.value)||void 0===r?void 0:r.filter((e=>"stateHandle"!==e.name));n=Object.assign(Object.assign(Object.assign({},a),c&&{value:c}),n)}o.push(n)}return o}(e,r,n.useGenericRemediator),f=vt(r,n),p=gt(r)),p){i=c.TERMINAL;const e=Object.keys(r.actions).length>0,t=!!f.find((e=>"ERROR"===e.class));!e&&!t&&!0===r.requestDidSucceed?m=!0:g=!!e,v=!1}else o?(i=c.CANCELED,m=!0):(null===r||void 0===r?void 0:r.interactionCode)&&(a=r.interactionCode,!1===s?(i=c.SUCCESS,m=!1):(u=await async function(e,t){let{meta:n,idxResponse:r}=t;const{interactionCode:o}=r,{clientId:i,codeVerifier:s,ignoreSignature:a,redirectUri:c,urls:u,scopes:l}=n;return(await e.token.exchangeCodeForTokens({interactionCode:o,clientId:i,codeVerifier:s,ignoreSignature:a,redirectUri:c,scopes:l},u)).tokens}(e,t),i=c.SUCCESS,m=!0));return Object.assign(Object.assign({},t),{status:i,interactionCode:a,tokens:u,shouldSaveResponse:g,shouldClearTransaction:m,clearSharedStorage:v,enabledFeatures:d,availableSteps:h,messages:f,terminal:p})}async function xt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;let r={options:t,values:Et(t)};r=At(e,r),r=await async function(e,t){const{options:n}=t,{stateHandle:r,withCredentials:o,version:i,state:s,scopes:a,recoveryToken:c,activationToken:u,maxAge:l,acrValues:d,nonce:h,useGenericRemediator:f}=n;let p,g=Ne(e,{state:s,recoveryToken:c,activationToken:u});if(r)p=await st(e,{withCredentials:o,version:i,stateHandle:r,useGenericRemediator:f});else{let t=null===g||void 0===g?void 0:g.interactionHandle;if(!t){e.transactionManager.clear();const n=await Ke(e,{withCredentials:o,state:s,scopes:a,activationToken:u,recoveryToken:c,maxAge:l,acrValues:d,nonce:h});t=n.interactionHandle,g=n.meta}p=await st(e,{withCredentials:o,version:i,interactionHandle:t,useGenericRemediator:f})}return Object.assign(Object.assign({},t),{idxResponse:p,meta:g})}(e,r),r=await async function(e,t){let{idxResponse:n,options:r,values:o}=t;const{autoRemediate:i,remediators:s,actions:a,flow:c,step:u,useGenericRemediator:l}=r;if(!1===i||!(s||a||u))return t;o=Object.assign(Object.assign({},o),{stateHandle:n.rawIdxState.stateHandle});const{idxResponse:d,nextStep:h,canceled:f}=await Ot(e,n,o,{remediators:s,actions:a,flow:c,step:u,useGenericRemediator:l});return n=d,Object.assign(Object.assign({},t),{idxResponse:n,nextStep:h,canceled:f})}(e,r),r=await _t(e,r);const{idxResponse:o,meta:i,shouldSaveResponse:s,shouldClearTransaction:a,clearSharedStorage:c,status:u,enabledFeatures:l,availableSteps:d,tokens:h,nextStep:f,messages:p,error:g,interactionCode:m}=r;if(a)e.transactionManager.clear({clearSharedStorage:c});else if(Fe(e,Object.assign({},i)),s){const{rawIdxState:t,requestDidSucceed:r}=o;e.transactionManager.saveIdxResponse({rawIdxResponse:t,requestDidSucceed:r,stateHandle:null===(n=o.context)||void 0===n?void 0:n.stateHandle,interactionHandle:null===i||void 0===i?void 0:i.interactionHandle})}const{actions:v,context:y,neededToProceed:w,proceed:k,rawIdxState:b,requestDidSucceed:T,stepUp:S}=o||{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({status:u},i&&{meta:i}),l&&{enabledFeatures:l}),d&&{availableSteps:d}),h&&{tokens:h}),f&&{nextStep:f}),p&&p.length&&{messages:p}),g&&{error:g}),S&&{stepUp:S}),{interactionCode:m,actions:v,context:y,neededToProceed:w,proceed:k,rawIdxState:b,requestDidSucceed:T})}async function Pt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.password&&!t.authenticator&&(t.authenticator=u.OKTA_PASSWORD),xt(e,Object.assign(Object.assign({},t),{flow:"authenticate"}))}class Ct{constructor(e){this.meta=e}}class Rt extends Ct{canVerify(e){return!!(e.credentials||e.verificationCode||e.otp)}mapCredentials(e){const{credentials:t,verificationCode:n,otp:r}=e;if(t||n||r)return t||{passcode:n||r}}getInputs(e){var t;return Object.assign(Object.assign({},null===(t=e.form)||void 0===t?void 0:t.value[0]),{name:"verificationCode",type:"string",required:e.required})}}class jt extends Rt{mapCredentials(e){const{verificationCode:t}=e;if(t)return{totp:t}}}class It extends Ct{canVerify(e){return!!(e.credentials||e.password||e.passcode)}mapCredentials(e){const{credentials:t,password:n,passcode:r,revokeSessions:o}=e;if(t||n||r)return t||{passcode:r||n,revokeSessions:o}}getInputs(e){var t,n;const r=[Object.assign(Object.assign({},null===(t=e.form)||void 0===t?void 0:t.value[0]),{name:"password",type:"string",required:e.required})];return(null===(n=e.form)||void 0===n?void 0:n.value.find((e=>"revokeSessions"===e.name)))&&r.push({name:"revokeSessions",type:"boolean",label:"Sign me out of all other devices",required:!1}),r}}class Mt extends Ct{canVerify(e){const{credentials:t}=e;if(t&&t.questionKey&&t.answer)return!0;const{questionKey:n,question:r,answer:o}=e;return!(!n||!o)||!(!r||!o)}mapCredentials(e){const{questionKey:t,question:n,answer:r}=e;if(r&&(t||n))return{questionKey:n?"custom":t,question:n,answer:r}}getInputs(){return[{name:"questionKey",type:"string",required:!0},{name:"question",type:"string",label:"Create a security question"},{name:"answer",type:"string",label:"Answer",required:!0}]}}class Lt extends Ct{canVerify(e){const{credentials:t}=e;if(t&&t.answer)return!0;const{answer:n}=e;return!!n}mapCredentials(e){const{answer:t}=e;if(t)return{questionKey:this.meta.contextualData.enrolledQuestion.questionKey,answer:t}}getInputs(){return[{name:"answer",type:"string",label:"Answer",required:!0}]}}class Ut extends Ct{canVerify(e){const{credentials:t}=e,n=t||e,{clientData:r,attestation:o}=n;return!(!r||!o)}mapCredentials(e){const{credentials:t,clientData:n,attestation:r}=e;if(t||n||r)return t||{clientData:n,attestation:r}}getInputs(){return[{name:"clientData",type:"string",required:!0,visible:!1,label:"Client Data"},{name:"attestation",type:"string",required:!0,visible:!1,label:"Attestation"}]}}class Dt extends Ct{canVerify(e){const{credentials:t}=e,n=t||e,{clientData:r,authenticatorData:o,signatureData:i}=n;return!!(r&&o&&i)}mapCredentials(e){const{credentials:t,authenticatorData:n,clientData:r,signatureData:o}=e;if(t||n||r||o)return t||{authenticatorData:n,clientData:r,signatureData:o}}getInputs(){return[{name:"authenticatorData",type:"string",label:"Authenticator Data",required:!0,visible:!1},{name:"clientData",type:"string",label:"Client Data",required:!0,visible:!1},{name:"signatureData",type:"string",label:"Signature Data",required:!0,visible:!1}]}}class Nt extends dt{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.authenticator=function(e){var t,n;const r=e.relatesTo,o=(null===r||void 0===r?void 0:r.value)||{};switch(o.key){case u.OKTA_PASSWORD:return new It(o);case u.SECURITY_QUESTION:return(null===(t=o.contextualData)||void 0===t?void 0:t.enrolledQuestion)?new Lt(o):new Mt(o);case u.OKTA_VERIFY:return new jt(o);case u.WEBAUTHN:return(null===(n=o.contextualData)||void 0===n?void 0:n.challengeData)?new Dt(o):new Ut(o);default:return new Rt(o)}}(e)}getNextStep(e,t){var n;const r=super.getNextStep(e,t),o=null===(n=null===t||void 0===t?void 0:t.authenticatorEnrollments)||void 0===n?void 0:n.value;return Object.assign(Object.assign({},r),{authenticatorEnrollments:o})}canRemediate(){return this.authenticator.canVerify(this.values)}mapCredentials(){return this.authenticator.mapCredentials(this.values)}getInputCredentials(e){return this.authenticator.getInputs(e)}getValuesAfterProceed(){return this.values=super.getValuesAfterProceed(),Object.keys(this.values).filter((e=>"credentials"!==e)).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:this.values[t]})),{})}}class Ht extends Nt{}Ht.remediationName="enroll-authenticator";class Ft extends dt{canRemediate(){return!!this.values.startPolling||"enroll-poll"===this.options.step}getNextStep(e,t){const n=super.getNextStep(e,t);let r=this.getAuthenticator();return!r&&(null===t||void 0===t?void 0:t.currentAuthenticator)&&(r=t.currentAuthenticator.value),Object.assign(Object.assign({},n),{authenticator:r,poll:{required:!0,refresh:this.remediation.refresh}})}getValuesAfterProceed(){return Object.keys(this.values).filter((e=>"startPolling"!==e)).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:this.values[t]})),{})}}Ft.remediationName="enroll-poll";class qt extends dt{canRemediate(){if(this.values.channel)return!0;if(this.values.authenticator){const{id:e,channel:t}=this.values.authenticator;if(e&&t)return!0}return!1}getNextStep(e,t){const n=super.getNextStep(e,t),r=t.currentAuthenticator.value;return Object.assign(Object.assign({},n),{authenticator:r})}getData(){var e;return{authenticator:{id:this.remediation.value[0].value.form.value[0].value,channel:(null===(e=this.values.authenticator)||void 0===e?void 0:e.channel)||this.values.channel},stateHandle:this.values.stateHandle}}getValuesAfterProceed(){this.values=super.getValuesAfterProceed(),delete this.values.authenticators;const e=this.values.channel?"channel":"authenticator";return Object.keys(this.values).filter((t=>t!==e)).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:this.values[t]})),{})}}qt.remediationName="select-enrollment-channel";class Vt extends dt{getInputEmail(){return[{name:"email",type:"string",required:!0,label:"Email"}]}getInputPhoneNumber(){return[{name:"phoneNumber",type:"string",required:!0,label:"Phone Number"}]}canRemediate(){return Boolean(this.values.email||this.values.phoneNumber)}getNextStep(e,t){const n=super.getNextStep(e,t),r=t.currentAuthenticator.value;return Object.assign(Object.assign({},n),{authenticator:r})}getData(){return{stateHandle:this.values.stateHandle,email:this.values.email,phoneNumber:this.values.phoneNumber}}getValuesAfterProceed(){return Object.keys(this.values).filter((e=>!["email","phoneNumber"].includes(e))).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:this.values[t]})),{})}}Vt.remediationName="enrollment-channel-data";class Bt extends Nt{}Bt.remediationName="challenge-authenticator";class Kt extends Ft{canRemediate(){return!!this.values.startPolling||"challenge-poll"===this.options.step}}Kt.remediationName="challenge-poll";class Wt extends Nt{}Wt.remediationName="reset-authenticator";class $t extends dt{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.authenticator=null;this.getCredentialsFromRemediation()&&(this.authenticator=this.authenticator=new It({}))}canRemediate(){if(this.authenticator&&!this.authenticator.canVerify(this.values))return!1;const e=this.getData().userProfile;if(!e)return!1;return this.remediation.value.find((e=>{let{name:t}=e;return"userProfile"===t})).form.value.reduce(((t,n)=>(n.required&&(t=t&&!!e[n.name]),t)),!0)}getCredentialsFromRemediation(){return this.remediation.value.find((e=>{let{name:t}=e;return"credentials"===t}))}mapUserProfile(e){let{form:{value:t}}=e;const n=t.map((e=>{let{name:t}=e;return t})).reduce(((e,t)=>this.values[t]?Object.assign(Object.assign({},e),{[t]:this.values[t]}):e),{});if(0!==Object.keys(n).length)return n}mapCredentials(){const e=this.authenticator&&this.authenticator.mapCredentials(this.values);if(e)return e}getInputUserProfile(e){return[...e.form.value]}getInputCredentials(e){return[...e.form.value]}getErrorMessages(e){return e.value[0].form.value.reduce(((e,t)=>(t.messages&&e.push(t.messages.value[0].message),e)),[])}}$t.remediationName="enroll-profile";class Gt extends dt{constructor(){super(...arguments),this.map={identifier:["username"]}}canRemediate(){const{identifier:e}=this.getData();return!!e}mapCredentials(){const{credentials:e,password:t}=this.values;if(e||t)return e||{passcode:t}}getInputCredentials(e){return Object.assign(Object.assign({},e.form.value[0]),{name:"password",required:e.required})}}Gt.remediationName="identify";class zt extends dt{mapCredentials(){const{newPassword:e}=this.values;if(e)return{passcode:e}}getInputCredentials(e){const t="password"===this.getAuthenticator().type?"newPassword":"verificationCode";return Object.assign(Object.assign({},e.form.value[0]),{name:t})}}zt.remediationName="reenroll-authenticator";class Jt extends zt{}Jt.remediationName="reenroll-authenticator-warning";class Qt extends dt{canRemediate(){return!1}getNextStep(){const{name:e,type:t,idp:n,href:r}=this.remediation;return{name:e,type:t,idp:n,href:r}}}Qt.remediationName="redirect-idp";class Yt extends dt{findMatchedOption(e,t){let n;for(let r of e)if(n=t.find((e=>{let{relatesTo:t}=e;return t.key&&t.key===r.key})),n)break;return n}canRemediate(e){var t,n;const{authenticators:r,authenticator:o}=this.values,i=ct(this.remediation),{options:s}=i;if(!r||!r.length)return!1;if(h(o)&&o.id)return!0;const a=this.findMatchedOption(r,s);if(a){const r=(null===e||void 0===e?void 0:e.currentAuthenticator)&&(null===e||void 0===e?void 0:e.currentAuthenticator.value.id)===(null===(t=a.relatesTo)||void 0===t?void 0:t.id),o=(null===e||void 0===e?void 0:e.currentAuthenticatorEnrollment)&&(null===e||void 0===e?void 0:e.currentAuthenticatorEnrollment.value.id)===(null===(n=a.relatesTo)||void 0===n?void 0:n.id);return!r&&!o}return!1}mapAuthenticator(e){const{authenticators:t,authenticator:n}=this.values;if(h(n)&&n.id)return this.selectedAuthenticator=n,n;const{options:r}=e,o=function(e,t){let n;for(let r of e)if(n=t.find((e=>{let{relatesTo:t}=e;return t.key&&t.key===r.key})),n)break;return n}(t,r);return this.selectedAuthenticator=o.relatesTo,this.selectedOption=o,{id:null===o||void 0===o?void 0:o.value.form.value.find((e=>{let{name:t}=e;return"id"===t})).value}}getInputAuthenticator(e){return{name:"authenticator",type:"string",options:e.options.map((e=>{let{label:t,relatesTo:n}=e;return{label:t,value:n.key}}))}}getValuesAfterProceed(){this.values=super.getValuesAfterProceed();const e=this.values.authenticators.filter((e=>!0!==lt(e,this.selectedAuthenticator)));return Object.assign(Object.assign({},this.values),{authenticators:e})}}class Xt extends Yt{constructor(e){var t;super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});const n="recoverPassword"===this.options.flow;(null===(t=ct(e).options)||void 0===t?void 0:t.some((e=>{let{relatesTo:t}=e;return(null===t||void 0===t?void 0:t.key)===u.OKTA_PASSWORD})))&&(n||this.values.password)&&(this.values.authenticators=[...this.values.authenticators||[],{key:u.OKTA_PASSWORD}])}}Xt.remediationName="select-authenticator-authenticate";class Zt extends Yt{}Zt.remediationName="select-authenticator-enroll";class en extends Yt{constructor(){super(...arguments),this.map={identifier:["username"]}}canRemediate(){return!!this.getData("identifier")&&super.canRemediate()}mapAuthenticator(e){var t,n,r;const o=super.mapAuthenticator(e),i=null===(t=this.selectedOption)||void 0===t?void 0:t.value.form.value.find((e=>{let{name:t}=e;return"methodType"===t})),s=this.values.methodType||(null===i||void 0===i?void 0:i.value)||(null===(r=null===(n=null===i||void 0===i?void 0:i.options)||void 0===n?void 0:n[0])||void 0===r?void 0:r.value);return s?Object.assign(Object.assign({},o),{methodType:s}):o}getInputUsername(){return{name:"username",type:"string"}}}en.remediationName="select-authenticator-unlock-account";class tn extends dt{canRemediate(){return!0}}tn.remediationName="select-enroll-profile";class nn extends dt{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.authenticator=this.getAuthenticator(),this.formatAuthenticatorData()}formatAuthenticatorData(){if(this.getAuthenticatorData())this.values.authenticatorsData=this.values.authenticatorsData.map((e=>lt(this.authenticator,e)?this.mapAuthenticatorDataFromValues(e):e));else{const e=this.mapAuthenticatorDataFromValues();e&&this.values.authenticatorsData.push(e)}}getAuthenticatorData(){return this.values.authenticatorsData.find((e=>lt(this.authenticator,e)))}canRemediate(){return this.values.authenticatorsData.some((e=>lt(this.authenticator,e)))}mapAuthenticatorDataFromValues(e){let{methodType:t,authenticator:n}=this.values;!t&&h(n)&&(t=null===n||void 0===n?void 0:n.methodType);const{id:r,enrollmentId:o}=this.authenticator,i=Object.assign(Object.assign({id:r,enrollmentId:o},e&&e),t&&{methodType:t});return i.methodType?i:null}getAuthenticatorFromRemediation(){return this.remediation.value.find((e=>{let{name:t}=e;return"authenticator"===t}))}getValuesAfterProceed(){this.values=super.getValuesAfterProceed();const e=this.values.authenticatorsData.filter((e=>!0!==lt(this.authenticator,e)));return Object.assign(Object.assign({},this.values),{authenticatorsData:e})}}class rn extends nn{mapAuthenticator(){return this.getAuthenticatorData()}getInputAuthenticator(){const e=this.getAuthenticatorFromRemediation(),t=e.form.value.find((e=>{let{name:t}=e;return"methodType"===t}));if(t&&t.options)return{name:"methodType",type:"string",required:!0,options:t.options};return[...e.form.value]}getValuesAfterProceed(){return this.values=super.getValuesAfterProceed(),Object.keys(this.values).filter((e=>"authenticator"!==e)).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:this.values[t]})),{})}}rn.remediationName="authenticator-verification-data";class on extends nn{mapAuthenticator(){const e=this.getAuthenticatorData();return{id:ct(this.remediation).form.value.find((e=>{let{name:t}=e;return"id"===t})).value,methodType:e.methodType,phoneNumber:e.phoneNumber}}getInputAuthenticator(e){return[{name:"methodType",type:"string"},{name:"phoneNumber",label:"Phone Number",type:"string"}].map((t=>{const n=e.form.value.find((e=>e.name===t.name));return Object.assign(Object.assign({},n),t)}))}mapAuthenticatorDataFromValues(e){e=super.mapAuthenticatorDataFromValues(e);const{phoneNumber:t}=this.values;if(e||t)return Object.assign(Object.assign({},e&&e),t&&{phoneNumber:t})}}on.remediationName="authenticator-enrollment-data";class sn extends dt{canRemediate(){return!!this.values.skip||"skip"===this.options.step}}sn.remediationName="skip";const an={identify:Gt,"select-authenticator-authenticate":Xt,"select-authenticator-enroll":Zt,"authenticator-enrollment-data":on,"authenticator-verification-data":rn,"enroll-authenticator":Ht,"challenge-authenticator":Bt,"challenge-poll":Kt,"reenroll-authenticator":zt,"reenroll-authenticator-warning":Jt,"enroll-poll":Ft,"select-enrollment-channel":qt,"enrollment-channel-data":Vt,"redirect-idp":Qt,skip:sn},cn={identify:Gt,"identify-recovery":Gt,"select-authenticator-authenticate":Xt,"select-authenticator-enroll":Zt,"challenge-authenticator":Bt,"authenticator-verification-data":rn,"authenticator-enrollment-data":on,"reset-authenticator":Wt,"reenroll-authenticator":zt,"reenroll-authenticator-warning":Jt,"enroll-poll":Ft},un={"select-enroll-profile":tn,"enroll-profile":$t,"authenticator-enrollment-data":on,"select-authenticator-enroll":Zt,"enroll-poll":Ft,"select-enrollment-channel":qt,"enrollment-channel-data":Vt,"enroll-authenticator":Ht,skip:sn},ln={identify:Gt,"select-authenticator-unlock-account":en,"select-authenticator-authenticate":Xt,"challenge-authenticator":Bt,"challenge-poll":Kt,"authenticator-verification-data":rn,"reenroll-authenticator-warning":Jt};function dn(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",o=!0;switch(r){case"register":case"signup":case"enrollProfile":t=un,o=!1;break;case"recoverPassword":case"resetPassword":t=cn,n=["currentAuthenticator-recover","currentAuthenticatorEnrollment-recover"],o=!1;break;case"unlockAccount":t=ln,o=!1,n=["unlock-account"];break;default:t=an}return{flow:r,remediators:t,actions:n,withCredentials:o}}async function hn(e,t){const n=e.transactionManager.load(),r=dn(e,n.flow);return xt(e,Object.assign(Object.assign(Object.assign({},t),r),{actions:["cancel"]}))}function fn(e){var t=/\+/g,n=/([^&=]+)=?([^&]*)/g,r=e||"";"#"===r.charAt(0)&&"/"===r.charAt(1)&&(r=r.substring(2)),"#"!==r.charAt(0)&&"?"!==r.charAt(0)||(r=r.substring(1));for(var o,i={};o=n.exec(r);){var s=o[1],a=o[2];i[s]="id_token"===s||"access_token"===s||"code"===s?a:decodeURIComponent(a.replace(t," "))}return i}class pn extends k{constructor(e,t){super(`Enter the OTP code in the originating client: ${t}`),this.name="EmailVerifyCallbackError",this.state=e,this.otp=t}}function gn(e){return"EmailVerifyCallbackError"===e.name}function mn(e){return/(otp=)/i.test(e)&&/(state=)/i.test(e)}function vn(e){return fn(e)}async function yn(e,t){if(mn(t)){const{state:n,otp:r}=vn(t);if(e.idx.canProceed({state:n}))return await e.idx.proceed({state:n,otp:r});throw new pn(n,r)}}function wn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(!Ne(e,t)&&!t.stateHandle)}async function kn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!wn(e,t))throw new R("Unable to proceed: saved transaction could not be loaded");let{flow:n,state:r}=t;if(!n){const t=Ne(e,{state:r});n=null===t||void 0===t?void 0:t.flow}return xt(e,Object.assign(Object.assign({},t),{flow:n}))}async function bn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const{withCredentials:r,exchangeCodeForTokens:o}=t;let i=await kn(e,{startPolling:!0,withCredentials:r,exchangeCodeForTokens:o});const s=Ne(e);let a=null===(n=null===s||void 0===s?void 0:s.remediations)||void 0===n?void 0:n.find((e=>e.includes("poll")));return(null===a||void 0===a?void 0:a.length)||p("No polling remediations available at the current IDX flow stage"),Number.isInteger(t.refresh)?new Promise((function(n,r){setTimeout((async function(){var t,o;try{const r=null===(o=null===(t=i.nextStep)||void 0===t?void 0:t.poll)||void 0===o?void 0:o.refresh;n(r?bn(e,{refresh:r}):i)}catch(s){r(s)}}),t.refresh)})):i}async function Tn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.transactionManager.clear(),xt(e,Object.assign({exchangeCodeForTokens:!1},t))}async function Sn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!De(e)){const{enabledFeatures:n}=await Tn(e,Object.assign(Object.assign({},t),{flow:"register",autoRemediate:!1}));if(!t.activationToken&&n&&!n.includes(l.REGISTRATION))throw new R("Registration is not supported based on your current org configuration.")}return xt(e,Object.assign(Object.assign({},t),{flow:"register"}))}async function On(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=dn(e,"recoverPassword");return xt(e,Object.assign(Object.assign({},t),n))}async function En(e,t){const n=e.transactionManager.load();if(!n)throw new R("No transaction data was found in storage");const{codeVerifier:r,state:o}=n,{searchParams:i}=new URL(t),s=i.get("state"),a=i.get("interaction_code"),c=i.get("error");if(c)throw new oe(c,i.get("error_description"));if(s!==o)throw new R("State in redirect uri does not match with transaction state");if(!a)throw new R("Unable to parse interaction_code from the url");const{tokens:u}=await e.token.exchangeCodeForTokens({interactionCode:a,codeVerifier:r});e.tokenManager.setTokens(u)}async function An(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.flow="unlockAccount",!De(e)){const{enabledFeatures:n}=await Tn(e,Object.assign(Object.assign({},t),{autoRemediate:!1}));if(n&&!n.includes(l.ACCOUNT_UNLOCK))throw new R("Self Service Account Unlock is not supported based on your current org configuration.")}return xt(e,Object.assign({},t))}function _n(e){if("OAuthError"!==e.name)return!1;return"interaction_required"===e.errorCode}function xn(e){return e.pkce||"code"===e.responseType||"query"===e.responseMode}function Pn(e){return xn(e)&&"fragment"!==e.responseMode?window.location.search:window.location.hash}function Cn(e){if(!function(e,t){var n=t.options;return!(!e||!n.redirectUri)&&0===e.indexOf(n.redirectUri)}(window.location.href,e))return!1;var t,n=xn(e.options),r=Pn(e.options);if(function(e){return/(error=)/i.test(e)||/(error_description)/i.test(e)}(r))return!0;if(n){var o=function(e){return/(code=)/i.test(e)}(r)||function(e){return/(interaction_code=)/i.test(e)}(r);return o}return t=window.location.hash,/((id|access)_token=)/i.test(t)}function Rn(e,t){if(!t){if(!Cn(e))return!1;t=Pn(e.options)}return/(error=interaction_required)/i.test(t)}function jn(e){var t;t={remediators:i,getFlowSpecification:dn},Object.assign(pt,t);const n=Tn.bind(null,e);return{interact:Ke.bind(null,e),introspect:st.bind(null,e),makeIdxResponse:rt.bind(null,e),authenticate:Pt.bind(null,e),register:Sn.bind(null,e),start:n,startTransaction:n,poll:bn.bind(null,e),proceed:kn.bind(null,e),cancel:hn.bind(null,e),recoverPassword:On.bind(null,e),handleInteractionCodeRedirect:En.bind(null,e),isInteractionRequired:Rn.bind(null,e),isInteractionRequiredError:_n,handleEmailVerifyCallback:yn.bind(null,e),isEmailVerifyCallback:mn,parseEmailVerifyCallback:vn,isEmailVerifyCallbackError:gn,getSavedTransactionMeta:Ne.bind(null,e),createTransactionMeta:Ue.bind(null,e),getTransactionMeta:He.bind(null,e),saveTransactionMeta:Fe.bind(null,e),clearTransactionMeta:qe.bind(null,e),isTransactionMetaValid:Ve,setFlow:t=>{e.options.flow=t},getFlow:()=>e.options.flow,canProceed:wn.bind(null,e),unlockAccount:An.bind(null,e)}}var In=n(285);class Mn{constructor(){this.environments=["okta-auth-js/7.12.1"],this.maybeAddNodeEnvironment()}addEnvironment(e){this.environments.push(e)}getHttpHeader(){return{"X-Okta-User-Agent-Extended":this.environments.join(" ")}}getVersion(){return"7.12.1"}maybeAddNodeEnvironment(){if(ue()||!In||!In.versions)return;const{node:e}=In.versions;this.environments.push(`nodejs/${e}`)}}function Ln(e,t,n){e.options.headers=e.options.headers||{},e.options.headers[t]=n}function Un(e){return Dn(se(e))}function Dn(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Nn(e){return e.replace(/-/g,"+").replace(/_/g,"/")}function Hn(e){var t=Nn(e);switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new R("Not a valid Base64Url")}var n=ie(t);try{return decodeURIComponent(escape(n))}catch(r){return n}}function Fn(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function qn(e){return ie(Nn(e))}function Vn(e){return Uint8Array.from(qn(e),(e=>e.charCodeAt(0)))}function Bn(e){return se(new Uint8Array(e).reduce(((e,t)=>e+String.fromCharCode(t)),""))}function Kn(e){var t=(new TextEncoder).encode(e);return ae.subtle.digest("SHA-256",t).then((function(e){var t=new Uint8Array(e).slice(0,16);return Un(String.fromCharCode.apply(null,t))}))}function Wn(e,t){t=m(t);var n={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};return delete t.use,ae.subtle.importKey("jwk",t,n,!0,["verify"]).then((function(t){var r=e.split("."),o=Fn(r[0]+"."+r[1]),i=Fn(qn(r[2]));return ae.subtle.verify(n,t,i,o)}))}class $n{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{quiet:!1};this.queue=[],this.running=!1,this.options=e}push(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return new Promise(((n,o)=>{this.queue.length>0&&!1!==this.options.quiet&&p("Async method is being called but another async method is already running. The new method will be delayed until the previous method completes."),this.queue.push({method:e,thisObject:t,args:r,resolve:n,reject:o}),this.run()}))}run(){if(!this.running&&0!==this.queue.length){this.running=!0;var e,t=this.queue.shift(),n=t.method.apply(t.thisObject,t.args);(e=n)&&e.finally&&"function"===typeof e.finally?n.then(t.resolve,t.reject).finally((()=>{this.running=!1,this.run()})):(t.resolve(n),this.running=!1,this.run())}}}function Gn(e){return("0"+e.toString(16)).substr(-2)}var zn={DEFAULT_CODE_CHALLENGE_METHOD:te,generateVerifier:function(e){var t=e||"";return t.length<Z&&(t+=function(e){var t=new Uint8Array(Math.ceil(e/2));return ae.getRandomValues(t),Array.from(t,Gn).join("").slice(0,e)}(Z-t.length)),encodeURIComponent(t).slice(0,ee)},computeChallenge:function(e){var t=(new TextEncoder).encode(e);return ae.subtle.digest("SHA-256",t).then((function(e){return Un(String.fromCharCode.apply(null,new Uint8Array(e)))}))}};function Jn(e){var t,n=e.split(".");try{t={header:JSON.parse(Hn(n[0])),payload:JSON.parse(Hn(n[1])),signature:n[2]}}catch(r){throw new R("Malformed token")}return t}function Qn(e){const{pkce:t,clientId:n,redirectUri:r,responseType:o,responseMode:i,scopes:s,acrValues:a,maxAge:c,state:u,ignoreSignature:l,dpop:d}=e.options,h=ue()?window.location.href:void 0;return g({pkce:t,clientId:n,redirectUri:r||h,responseType:o||["token","id_token"],responseMode:i,state:u||j(),nonce:E(64),scopes:s||["openid","email"],acrValues:a,maxAge:c,ignoreSignature:l,dpop:d})}const Yn="DPoPKeys";function Xn(e){return(it(e)||function(e){return e instanceof O}(e))&&"use_dpop_nonce"===e.errorCode}function Zn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return[...ae.getRandomValues(new Uint8Array(e))].map((e=>e.toString(16))).join("")}async function er(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=await new Promise(((e,t)=>{try{const n=window.indexedDB.open("OktaAuthJs",1);n.onerror=function(){t(n.error)},n.onupgradeneeded=function(){n.result.createObjectStore(Yn)},n.onsuccess=function(){const r=n.result,o=r.transaction(Yn,"readwrite");o.onerror=function(){t(o.error)};const i=o.objectStore(Yn);e(i),o.oncomplete=function(){r.close()}}}catch(n){t(n)}}));return new Promise(((t,r)=>{const i=o[e](...n);i.onsuccess=function(){t(i)},i.onerror=function(){r(i.error)}}))}async function tr(e){if(e){const t=await er("get",e);if(t.result)return t.result}throw new R("Unable to locate dpop key pair required for refresh"+(e?` (${e})`:""))}async function nr(e){await er("delete",e)}async function rr(){const e=Zn(4),t=await async function(){const e={name:"RSASSA-PKCS1-v1_5",hash:"SHA-256",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])};return ae.subtle.generateKey(e,!1,["sign","verify"])}();return await async function(e,t){return await er("add",t,e),t}(e,t),{keyPair:t,keyPairId:e}}async function or(e,t){var n;let r=!1;const{accessToken:o,refreshToken:i}=t;"access"===e&&o&&"DPoP"===o.tokenType&&!i&&(r=!0),"refresh"===e&&i&&!o&&(r=!0);const s=null!==(n=null===o||void 0===o?void 0:o.dpopPairId)&&void 0!==n?n:null===i||void 0===i?void 0:i.dpopPairId;r&&s&&await nr(s)}async function ir(e){let{keyPair:t,url:n,method:r,nonce:o,accessToken:i}=e;const{kty:s,crv:a,e:c,n:u,x:l,y:d}=await ae.subtle.exportKey("jwk",t.publicKey),h={alg:"RS256",typ:"dpop+jwt",jwk:{kty:s,crv:a,e:c,n:u,x:l,y:d}},f={htm:r,htu:n,iat:Math.floor(Date.now()/1e3),jti:Zn()};return o&&(f.nonce=o),i&&(f.ath=await async function(e){const t=(new TextEncoder).encode(e),n=await ae.subtle.digest("SHA-256",t);return se(String.fromCharCode.apply(null,new Uint8Array(n))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(i)),async function(e,t,n){const r=Un(JSON.stringify(e)),o=Un(JSON.stringify(t));return`${r}.${o}.${Dn(Bn(await ae.subtle.sign({name:n.algorithm.name},n,Fn(`${r}.${o}`))))}`}(h,f,t.privateKey)}async function sr(e,t){let{url:n,data:r,nonce:o,dpopKeyPair:i}=t;var s,a;const c="POST",u={"Content-Type":"application/x-www-form-urlencoded"};if(e.options.dpop){if(!i)throw new R("DPoP is configured but no key pair was provided");const e=await async function(e){let{keyPair:t,url:n,method:r,nonce:o}=e;const i={keyPair:t,url:n,method:r};return o&&(i.nonce=o),ir(i)}({url:n,method:c,nonce:o,keyPair:i});u.DPoP=e}try{return await Oe(e,{url:n,method:c,args:r,headers:u})}catch(l){if(Xn(l)&&!o){const t=null===(s=l.resp)||void 0===s?void 0:s.headers["dpop-nonce"];if(!t)throw new re({errorSummary:"No `dpop-nonce` header found when required"},null!==(a=l.resp)&&void 0!==a?a:void 0);return sr(e,{url:n,data:r,dpopKeyPair:i,nonce:t})}throw l}}async function ar(e,t,n){!function(e){if(!e.clientId)throw new R("A clientId must be specified in the OktaAuth constructor to get a token");if(!e.redirectUri)throw new R("The redirectUri passed to /authorize must also be passed to /token");if(!e.authorizationCode&&!e.interactionCode)throw new R("An authorization code (returned from /authorize) must be passed to /token");if(!e.codeVerifier)throw new R('The "codeVerifier" (generated and saved by your app) must be passed to /token')}(t);var r=function(e,t){var n=g({client_id:t.clientId,redirect_uri:t.redirectUri,grant_type:t.interactionCode?"interaction_code":"authorization_code",code_verifier:t.codeVerifier});t.interactionCode?n.interaction_code=t.interactionCode:t.authorizationCode&&(n.code=t.authorizationCode);const{clientSecret:r}=e.options;return r&&(n.client_secret=r),P(n).slice(1)}(e,t);return sr(e,{url:n.tokenUrl,data:r,dpopKeyPair:null===t||void 0===t?void 0:t.dpopKeyPair})}function cr(e,t){return Ee(e,(t||e.options.issuer)+"/.well-known/openid-configuration",{cacheResponse:!0})}async function ur(e,t,n){if(!t||!t.idToken)throw new R("Only idTokens may be verified");const r=Jn(t.idToken),o=(null===n||void 0===n?void 0:n.issuer)||e.options.issuer,{issuer:i}=await cr(e,o),s=Object.assign({clientId:e.options.clientId,ignoreSignature:e.options.ignoreSignature},n,{issuer:i});if(function(e,t,n){const r=n.clientId,o=n.issuer,i=n.nonce,s=n.acrValues;if(!t||!o||!r)throw new R("The jwt, iss, and aud arguments are all required");if(i&&t.nonce!==i)throw new R("OAuth flow response nonce doesn't match request nonce");const a=Math.floor(Date.now()/1e3);if(t.iss!==o)throw new R("The issuer ["+t.iss+"] does not match ["+o+"]");if(Array.isArray(t.aud)&&t.aud.indexOf(r)<0||!Array.isArray(t.aud)&&t.aud!==r)throw new R("The audience ["+t.aud+"] does not match ["+r+"]");if(s&&t.acr!==s)throw new R("The acr ["+t.acr+"] does not match acr_values ["+s+"]");if(t.iat>t.exp)throw new R("The JWT expired before it was issued");if(!e.options.ignoreLifetime){if(a-e.options.maxClockSkew>t.exp)throw new R("The JWT expired and is no longer valid");if(t.iat>a+e.options.maxClockSkew)throw new R("The JWT was issued in the future")}}(e,r.payload,s),1==s.ignoreSignature||!e.features.isTokenVerifySupported())return t;const a=await function(e,t,n){var r=e.storageManager.getHttpCache(e.options.cookies);return cr(e,t).then((function(t){var o=t.jwks_uri,i=r.getStorage()[o];if(i&&Date.now()/1e3<i.expiresAt){var s=y(i.response.keys,{kid:n});if(s)return s}return r.clearStorage(o),Ee(e,o,{cacheResponse:!0}).then((function(e){var t=y(e.keys,{kid:n});if(t)return t;throw new R("The key id, "+n+", was not found in the server's keys")}))}))}(e,t.issuer,r.header.kid);if(!await Wn(t.idToken,a))throw new R("The token signature is not valid");if(n&&n.accessToken&&t.claims.at_hash){if(await Kn(n.accessToken)!==t.claims.at_hash)throw new R("Token hash verification failed")}return t}async function lr(e,t,n,r){var o,i;if(!1!==e.options.pkce&&(n.code||n.interaction_code))return e.token.exchangeCodeForTokens(Object.assign({},t,{authorizationCode:n.code,interactionCode:n.interaction_code}),r);t=t||Qn(e),r=r||L(e,t);let s,a=t.responseType||[];Array.isArray(a)||"none"===a||(a=[a]),s=n.scope?n.scope.split(" "):m(t.scopes);const c=t.clientId||e.options.clientId;if(function(e,t){if(e.error&&e.error_description)throw new oe(e.error,e.error_description);if(e.state!==t.state)throw new R("OAuth flow response state doesn't match request state")}(n,t),t.dpop){const{allowBearerTokens:t}=null!==(i=null===(o=e.options)||void 0===o?void 0:o.dpopOptions)&&void 0!==i?i:{allowBearerTokens:!1};if(!t&&"DPoP"!==n.token_type)throw new R('Unable to parse OAuth flow response: DPoP was configured but "token_type" was not DPoP')}const u={},l=n.expires_in,d=n.token_type,h=n.access_token,f=n.id_token,p=n.refresh_token,g=Math.floor(Date.now()/1e3);if(h){const n=e.token.decode(h);u.accessToken={accessToken:h,claims:n.payload,expiresAt:Number(l)+g,tokenType:d,scopes:s,authorizeUrl:r.authorizeUrl,userinfoUrl:r.userinfoUrl},t.dpopPairId&&(u.accessToken.dpopPairId=t.dpopPairId),t.extraParams&&(u.accessToken.extraParams=t.extraParams)}if(p&&(u.refreshToken={refreshToken:p,expiresAt:Number(l)+g,scopes:s,tokenUrl:r.tokenUrl,authorizeUrl:r.authorizeUrl,issuer:r.issuer},t.dpopPairId&&(u.refreshToken.dpopPairId=t.dpopPairId),t.extraParams&&(u.refreshToken.extraParams=t.extraParams)),f){const n=e.token.decode(f),o={idToken:f,claims:n.payload,expiresAt:n.payload.exp-n.payload.iat+g,scopes:s,authorizeUrl:r.authorizeUrl,issuer:r.issuer,clientId:c};t.extraParams&&(o.extraParams=t.extraParams);const i={clientId:c,issuer:r.issuer,nonce:t.nonce,accessToken:h,acrValues:t.acrValues};void 0!==t.ignoreSignature&&(i.ignoreSignature=t.ignoreSignature),await ur(e,o,i),u.idToken=o}if(-1!==a.indexOf("token")&&!u.accessToken)throw new R('Unable to parse OAuth flow response: response type "token" was requested but "access_token" was not returned.');if(-1!==a.indexOf("id_token")&&!u.idToken)throw new R('Unable to parse OAuth flow response: response type "id_token" was requested but "id_token" was not returned.');return{tokens:u,state:n.state,code:n.code,responseType:a}}async function dr(e,t,n){n=n||L(e,t),t=Object.assign({},Qn(e),m(t));const{authorizationCode:r,interactionCode:o,codeVerifier:i,clientId:s,redirectUri:a,scopes:c,ignoreSignature:u,state:l,acrValues:d,dpop:h,dpopPairId:f,extraParams:p}=t,g={clientId:s,redirectUri:a,authorizationCode:r,interactionCode:o,codeVerifier:i,dpop:h},v=["token"];-1!==c.indexOf("openid")&&v.push("id_token");const y={clientId:s,redirectUri:a,scopes:c,responseType:v,ignoreSignature:u,acrValues:d,extraParams:p};try{if(h)if(f){const e=await tr(f);g.dpopKeyPair=e,y.dpop=h,y.dpopPairId=f}else{const{keyPair:e,keyPairId:t}=await rr();g.dpopKeyPair=e,y.dpop=h,y.dpopPairId=t}const t=await ar(e,g,n),o=await lr(e,y,t,n);return o.code=r,o.state=l,o}finally{e.transactionManager.clear()}}const hr=12e4;function fr(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,n)}function pr(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent("on"+t,n)}function gr(e,t){var n=t.popupTitle||"External Identity Provider User Authentication";return window.open(e,n,"toolbar=no, scrollbars=yes, resizable=yes, top=100, left=500, width=600, height=600")}function mr(e,t,n){var r,o;return new Promise((function(i,s){r=function(t){if(t.data&&t.data.state===n)return t.origin!==e.getIssuerOrigin()?s(new R("The request does not match client configuration")):void i(t.data)},fr(window,"message",r),o=setTimeout((function(){s(new R("OAuth flow timed out"))}),t||hr)})).finally((function(){clearTimeout(o),pr(window,"message",r)}))}async function vr(e,t){let{codeVerifier:n,codeChallenge:r,codeChallengeMethod:o}=t;return r=r||e.options.codeChallenge,r||(!function(e){if(!e.features.isPKCESupported()){var t="PKCE requires a modern browser with encryption support running in a secure context.";throw e.features.isHTTPS()||(t+="\nThe current page is not being served with HTTPS protocol. PKCE requires secure HTTPS protocol."),e.features.hasTextEncoder()||(t+='\n"TextEncoder" is not defined. To use PKCE, you may need to include a polyfill/shim for this browser.'),new R(t)}}(e),n=n||zn.generateVerifier(),r=await zn.computeChallenge(n)),o=await async function(e,t){if(t=t||e.options.codeChallengeMethod||te,-1===((await cr(e)).code_challenge_methods_supported||[]).indexOf(t))throw new R("Invalid code_challenge_method");return t}(e,o),t=Object.assign(Object.assign({},t),{responseType:"code",codeVerifier:n,codeChallenge:r,codeChallengeMethod:o})}async function yr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Qn(e);if(t=Object.assign(Object.assign({},n),t),t.dpop&&!e.features.isDPoPSupported())throw new R("DPoP has been configured, but is not supported by browser");return!1===t.pkce?t:vr(e,t)}function wr(e){var t=function(e){if(!e.clientId)throw new R("A clientId must be specified in the OktaAuth constructor to get a token");if(b(e.responseType)&&-1!==e.responseType.indexOf(" "))throw new R("Multiple OAuth responseTypes must be defined as an array");var t={client_id:e.clientId,code_challenge:e.codeChallenge,code_challenge_method:e.codeChallengeMethod,display:e.display,idp:e.idp,idp_scope:e.idpScope,login_hint:e.loginHint,max_age:e.maxAge,nonce:e.nonce,prompt:e.prompt,redirect_uri:e.redirectUri,response_mode:e.responseMode,response_type:e.responseType,sessionToken:e.sessionToken,state:e.state,acr_values:e.acrValues,enroll_amr_values:e.enrollAmrValues};if(t=g(t),["idp_scope","response_type","enroll_amr_values"].forEach((function(e){Array.isArray(t[e])&&(t[e]=t[e].join(" "))})),-1!==e.responseType.indexOf("id_token")&&-1===e.scopes.indexOf("openid"))throw new R("openid scope must be specified in the scopes argument when requesting an id_token");return e.scopes&&(t.scope=e.scopes.join(" ")),t}(e);return P(Object.assign(Object.assign({},t),e.extraParams&&Object.assign({},e.extraParams)))}function kr(e,t){if(arguments.length>2)return Promise.reject(new R('As of version 3.0, "getToken" takes only a single set of options'));const n=(t=t||{}).popupWindow;return t.popupWindow=void 0,yr(e,t).then((function(r){var o,i;t.sessionToken?Object.assign(r,{prompt:"none",responseMode:"okta_post_message",display:null}):t.idp&&Object.assign(r,{display:"popup"}),i=L(e,r),o=(t.codeVerifier?i.tokenUrl:i.authorizeUrl)+wr(r);switch(r.sessionToken||null===r.display?"IFRAME":"popup"===r.display?t.idpPopup?"IDP_POPUP":"POPUP":"IMPLICIT"){case"IFRAME":var s=mr(e,t.timeout,r.state),a=function(e){var t=document.createElement("iframe");return t.style.display="none",t.src=e,document.body.appendChild(t)}(o);return s.then((function(t){return lr(e,r,t,i)})).finally((function(){var e;document.body.contains(a)&&(null===(e=a.parentElement)||void 0===e||e.removeChild(a))}));case"POPUP":var c;if("okta_post_message"===r.responseMode){if(!e.features.isPopupPostMessageSupported())throw new R("This browser doesn't have full postMessage support");c=mr(e,t.timeout,r.state)}return n&&n.location.assign(o),new Promise((function(e,t){var r=setInterval((function(){n&&!n.closed||(clearInterval(r),t(new R("Unable to parse OAuth flow response")))}),100);c.then((function(t){clearInterval(r),e(t)})).catch((function(e){clearInterval(r),t(e)}))})).then((function(t){return lr(e,r,t,i)})).finally((function(){n&&!n.closed&&n.close()}));case"IDP_POPUP":var u=function(e,t,n,r){let o;return new Promise(((e,i)=>{n.onmessage=t=>{if(t.isTrusted&&t.data)return"object"===typeof t.data&&r===t.data.state?e(Object.assign({},t.data)):void i(new R("Unable to complete auth code exchange"))},o=setTimeout((function(){i(new R("OAuth flow timed out"))}),t||hr)})).finally((()=>{clearTimeout(o),n.close()}))}(0,t.timeout,t.channel,r.state);if(!n)throw new R("Unable to open popup window");return n.location.assign(o),u.then((function(t){return lr(e,r,t,i)}));default:throw new R("The full page redirect flow is not supported")}}))}function br(e,t){return arguments.length>2?Promise.reject(new R('As of version 3.0, "getWithoutPrompt" takes only a single set of options')):(t=m(t)||{},Object.assign(t,{prompt:"none",responseMode:"okta_post_message",display:null}),kr(e,t))}function Tr(e,t){if(arguments.length>2)return Promise.reject(new R('As of version 3.0, "getWithPopup" takes only a single set of options'));const n=gr("/",t);return t=m(t)||{},Object.assign(t,{display:"popup",responseMode:"okta_post_message",popupWindow:n}),kr(e,t)}function Sr(e,t){try{if(!BroadcastChannel)throw new R("Modern browser with `BroadcastChannel` support is required to use this method");if(!t.redirectUri)throw new R("`redirectUri` is a required param for `getWithIDPPopup`");t.state||(t.state=j());const n=gr("/",t),r=new BroadcastChannel(`popup-callback:${t.state}`);let o;t=m(t)||{},Object.assign(t,{display:"popup",responseMode:"query",popupWindow:n,idpPopup:!0,channel:r});const i=new Promise(((n,r)=>(o=r,kr(e,t).then((e=>n(e))).catch((e=>r(e))))));return{promise:i,cancel:()=>{r.close(),o(new R("Popup flow canceled"))}}}catch(n){return{promise:Promise.reject(n),cancel:()=>{}}}}async function Or(e,t){if(arguments.length>2)return Promise.reject(new R('As of version 3.0, "getWithRedirect" takes only a single set of options'));t=m(t)||{};const n=await yr(e,t),r=U(e,n),o=r.urls.authorizeUrl+wr(n);e.transactionManager.save(r),e.options.setLocation?e.options.setLocation(o):window.location.assign(o)}function Er(e){var t=e.options.pkce?"query":"fragment";return e.options.responseMode||t}function Ar(e,t){b(t=t||{})&&(t={url:t});var n,r=t.url,o=t.responseMode||Er(e),i=e.token.parseFromUrl._getLocation();if(!(n="query"===o?r?r.substring(r.indexOf("?")):i.search:r?r.substring(r.indexOf("#")):i.hash))throw new R("Unable to parse a token from the url");return fn(n)}async function _r(e,t){b(t=t||{})&&(t={url:t});const n=Ar(e,t),r=n.state,o=e.transactionManager.load({state:r});if(!o){if(e.options.pkce)throw new R("Could not load PKCE codeVerifier from storage. This may indicate the auth flow has already completed or multiple auth flows are executing concurrently.",void 0);throw new R("Unable to retrieve OAuth redirect params from storage")}const i=o.urls;return delete o.urls,t.url||function(e,t){"query"===(t.responseMode||Er(e))?function(e){var t=e.token.parseFromUrl._getHistory(),n=e.token.parseFromUrl._getDocument(),r=e.token.parseFromUrl._getLocation();t&&t.replaceState?t.replaceState(null,n.title,r.pathname+r.hash):r.search=""}(e):function(e){var t=e.token.parseFromUrl._getHistory(),n=e.token.parseFromUrl._getDocument(),r=e.token.parseFromUrl._getLocation();t&&t.replaceState?t.replaceState(null,n.title,r.pathname+r.search):r.hash=""}(e)}(e,t),lr(e,o,n,i).catch((t=>{throw _n(t)||e.transactionManager.clear({state:r}),t})).then((t=>(e.transactionManager.clear({state:r}),t)))}async function xr(e,t,n){const{clientId:r,dpop:o}=e.options;if(!r)throw new R("A clientId must be specified in the OktaAuth constructor to renew tokens");try{const i=Object.assign({},t,{clientId:r});n.extraParams&&(i.extraParams=n.extraParams);const s=Object.assign({},i);if(o){const e=await tr(null===n||void 0===n?void 0:n.dpopPairId);s.dpopKeyPair=e,i.dpop=o,i.dpopPairId=n.dpopPairId}const a=await async function(e,t,n){const r=Object.entries({client_id:t.clientId,grant_type:"refresh_token",scope:n.scopes.join(" "),refresh_token:n.refreshToken}).map((function(e){let[t,n]=e;return t+"="+encodeURIComponent(n)})).join("&");let o=n.tokenUrl;return t.extraParams&&Object.keys(t.extraParams).length>=1&&(o+=P(t.extraParams)),sr(e,{url:o,data:r,dpopKeyPair:null===t||void 0===t?void 0:t.dpopKeyPair})}(e,s,n),c=L(e,t),{tokens:u}=await lr(e,i,a,c),{refreshToken:l}=u;return l&&!function(e,t){return e.refreshToken===t.refreshToken}(l,n)&&e.tokenManager.updateRefreshToken(l),u}catch(s){throw it(i=s)&&"invalid_grant"===i.errorCode&&"The refresh token is invalid or expired."===i.errorSummary&&e.tokenManager.removeRefreshToken(),s}var i}function Pr(){throw new R("Renew must be passed a token with an array of scopes and an accessToken or idToken")}function Cr(e,t){return Ie(e)?t.idToken:je(e)?t.accessToken:void Pr()}async function Rr(e,t){Ie(t)||je(t)||Pr();let n=e.tokenManager.getTokensSync();if(n.refreshToken)return n=await xr(e,{scopes:t.scopes},n.refreshToken),Cr(t,n);var r;r=e.options.pkce?"code":je(t)?"token":"id_token";const{scopes:o,authorizeUrl:i,userinfoUrl:s,issuer:a,dpopPairId:c,extraParams:u}=t;return br(e,{responseType:r,scopes:o,authorizeUrl:i,userinfoUrl:s,issuer:a,dpopPairId:c,extraParams:u}).then((function(e){return Cr(t,e.tokens)}))}async function jr(e,t){var n;const r=null!==(n=null===t||void 0===t?void 0:t.tokens)&&void 0!==n?n:e.tokenManager.getTokensSync();if(r.refreshToken)return xr(e,t||{},r.refreshToken);if(!r.accessToken&&!r.idToken)throw new R("renewTokens() was called but there is no existing token");const o=r.accessToken||{},i=r.idToken||{},s=o.scopes||i.scopes;if(!s)throw new R("renewTokens: invalid tokens: could not read scopes");const a=o.authorizeUrl||i.authorizeUrl;if(!a)throw new R("renewTokens: invalid tokens: could not read authorizeUrl");const c=o.userinfoUrl||e.options.userinfoUrl,u=i.issuer||e.options.issuer,l=null===o||void 0===o?void 0:o.dpopPairId,d=(null===o||void 0===o?void 0:o.extraParams)||(null===i||void 0===i?void 0:i.extraParams);if(t=Object.assign({scopes:s,authorizeUrl:a,userinfoUrl:c,issuer:u,dpopPairId:l,extraParams:d},t),e.options.pkce)t.responseType="code";else{const{responseType:n}=Qn(e);t.responseType=n}return br(e,t).then((e=>e.tokens))}async function Ir(e,t){let n="",r="";if(t&&(n=t.accessToken,r=t.refreshToken),!n&&!r)throw new R("A valid access or refresh token object is required");var o=e.options.clientId,i=e.options.clientSecret;if(!o)throw new R("A clientId must be specified in the OktaAuth constructor to revoke a token");return Ae(e,L(e).revokeUrl,P({token_type_hint:r?"refresh_token":"access_token",token:r||n}).slice(1),{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+se(i?`${o}:${i}`:o)}})}const Mr={accessToken:"access_token",idToken:"id_token",refreshToken:"refresh_token"};async function Lr(e,t,n){var r;let o,i=e.options.clientId,s=e.options.clientSecret;if(n||(n=e.tokenManager.getTokens()[t]),!n)throw new R(`unable to find ${t} in storage or fn params`);if(o=t!==Pe.ACCESS?null===n||void 0===n?void 0:n.issuer:null===(r=null===n||void 0===n?void 0:n.claims)||void 0===r?void 0:r.iss,o=o||e.options.issuer,!i)throw new R("A clientId must be specified in the OktaAuth constructor to introspect a token");if(!o)throw new R("Unable to find issuer");const{introspection_endpoint:a}=await cr(e,o),c=se(s?`${i}:${s}`:i);return Ae(e,a,P({token_type_hint:Mr[t],token:n[t]}).slice(1),{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+c}})}function Ur(e,t){return function(e){if(!(e=Object.assign(Object.assign({},e),{responseType:"none",prompt:"enroll_authenticator",maxAge:0})).enrollAmrValues)throw new R("enroll_amr_values must be specified");if(!e.acrValues)throw new R("acr_values must be specified");return delete e.scopes,delete e.nonce,e}(Object.assign(Object.assign({},function(e){const{clientId:t,redirectUri:n,responseMode:r,state:o}=e.options,i=ue()?window.location.href:void 0;return g({clientId:t,redirectUri:n||i,responseMode:r,state:o||j(),responseType:"none",prompt:"enroll_authenticator"})}(e)),t))}function Dr(e,t){const n=Ur(e,t=m(t)||{}),r=function(e,t){return{issuer:e.options.issuer,urls:L(e,t),clientId:t.clientId,redirectUri:t.redirectUri,responseType:t.responseType,responseMode:t.responseMode,state:t.state,acrValues:t.acrValues,enrollAmrValues:t.enrollAmrValues}}(e,n),o=r.urls.authorizeUrl+wr(n);e.transactionManager.save(r),e.options.setLocation?e.options.setLocation(o):window.location.assign(o)}function Nr(e,t){const n=e=>$n.prototype.push.bind(t,e,null),r=n(Or.bind(null,e)),o=n(_r.bind(null,e)),i=Object.assign(o,{_getHistory:function(){return window.history},_getLocation:function(){return window.location},_getDocument:function(){return window.document}}),s={prepareTokenParams:yr.bind(null,e),exchangeCodeForTokens:dr.bind(null,e),getWithoutPrompt:br.bind(null,e),getWithPopup:Tr.bind(null,e),getWithIDPPopup:Sr.bind(null,e),getWithRedirect:r,parseFromUrl:i,decode:Jn,revoke:Ir.bind(null,e),renew:Rr.bind(null,e),renewTokensWithRefresh:xr.bind(null,e),renewTokens:jr.bind(null,e),getUserInfo:(t,n)=>async function(e,t,n){if(t||(t=(await e.tokenManager.getTokens()).accessToken),n||(n=(await e.tokenManager.getTokens()).idToken),!t||!je(t))return Promise.reject(new R("getUserInfo requires an access token object"));if(!n||!Ie(n))return Promise.reject(new R("getUserInfo requires an ID token object"));const r={url:t.userinfoUrl,method:"GET",accessToken:t.accessToken};if(e.options.dpop){const n=await e.getDPoPAuthorizationHeaders(Object.assign(Object.assign({},r),{accessToken:t}));r.headers=n,delete r.accessToken}return Oe(e,r).then((e=>e.sub===n.claims.sub?e:Promise.reject(new R("getUserInfo request was rejected due to token mismatch")))).catch((function(t){var n;if(t instanceof O&&!e.options.dpop){const{error:e,errorDescription:n}=t;throw new oe(e,n)}if(!e.options.dpop){let e=t;if(t instanceof re&&(null===(n=null===t||void 0===t?void 0:t.meta)||void 0===n?void 0:n.wwwAuthHeader)&&(e=O.parseHeader(t.meta.wwwAuthHeader)),e instanceof O){const{error:t,errorDescription:n}=e;throw new oe(t,n)}}throw t}))}(e,t,n),verify:ur.bind(null,e),isLoginRedirect:Cn.bind(null,e),introspect:Lr.bind(null,e)};return["getWithoutPrompt","getWithPopup","revoke","renew","renewTokensWithRefresh","renewTokens"].forEach((e=>{s[e]=n(s[e])})),s}function Hr(e,t){if(!Ie(e)&&!je(e)&&!Me(e))throw new R("Token must be an Object with scopes, expiresAt, and one of: an idToken, accessToken, or refreshToken property");if("accessToken"===t&&!je(e))throw new R("invalid accessToken");if("idToken"===t&&!Ie(e))throw new R("invalid idToken");if("refreshToken"===t&&!Me(e))throw new R("invalid refreshToken")}class Fr{constructor(e){this.localOffset=parseInt(e||0)}static create(){return new Fr(0)}now(){return(Date.now()+this.localOffset)/1e3}}const qr="expired",Vr="renewed",Br="added",Kr="removed",Wr="set_storage",$r={autoRenew:!0,autoRemove:!0,syncStorage:!0,clearPendingRemoveTokens:!0,storage:void 0,expireEarlySeconds:30,storageKey:V};class Gr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.sdk=e,this.emitter=e.emitter,!this.emitter)throw new R("Emitter should be initialized before TokenManager");t=Object.assign({},$r,g(t)),we()||(t.expireEarlySeconds=$r.expireEarlySeconds),this.options=t;const n=g({storageKey:t.storageKey,secure:t.secure});"object"===typeof t.storage?n.storageProvider=t.storage:t.storage&&(n.storageType=t.storage),this.storage=e.storageManager.getTokenStorage(Object.assign(Object.assign({},n),{useSeparateCookies:!0})),this.clock=Fr.create(),this.state={expireTimeouts:{},renewPromise:null}}on(e,t,n){n?this.emitter.on(e,t,n):this.emitter.on(e,t)}off(e,t){t?this.emitter.off(e,t):this.emitter.off(e)}start(){this.options.clearPendingRemoveTokens&&this.clearPendingRemoveTokens(),this.setExpireEventTimeoutAll(),this.state.started=!0}stop(){this.clearExpireEventTimeoutAll(),this.state.started=!1}isStarted(){return!!this.state.started}getOptions(){return m(this.options)}getExpireTime(e){const t=this.options.expireEarlySeconds||0;return e.expiresAt-t}hasExpired(e){return this.getExpireTime(e)<=this.clock.now()}emitExpired(e,t){this.emitter.emit(qr,e,t)}emitRenewed(e,t,n){this.emitter.emit(Vr,e,t,n)}emitAdded(e,t){this.emitter.emit(Br,e,t)}emitRemoved(e,t){this.emitter.emit(Kr,e,t)}emitError(e){this.emitter.emit("error",e)}clearExpireEventTimeout(e){clearTimeout(this.state.expireTimeouts[e]),delete this.state.expireTimeouts[e],this.state.renewPromise=null}clearExpireEventTimeoutAll(){var e=this.state.expireTimeouts;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&this.clearExpireEventTimeout(t)}setExpireEventTimeout(e,t){if(!Me(t)){var n=this.getExpireTime(t),r=1e3*Math.max(n-this.clock.now(),0);this.clearExpireEventTimeout(e);var o=setTimeout((()=>{this.emitExpired(e,t)}),r);this.state.expireTimeouts[e]=o}}setExpireEventTimeoutAll(){var e=this.storage.getStorage();for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];this.setExpireEventTimeout(t,n)}}resetExpireEventTimeoutAll(){this.clearExpireEventTimeoutAll(),this.setExpireEventTimeoutAll()}add(e,t){var n=this.storage.getStorage();Hr(t),n[e]=t,this.storage.setStorage(n),this.emitSetStorageEvent(),this.emitAdded(e,t),this.setExpireEventTimeout(e,t)}getSync(e){return this.storage.getStorage()[e]}async get(e){return this.getSync(e)}getTokensSync(){const e={},t=this.storage.getStorage();return Object.keys(t).forEach((n=>{const r=t[n];je(r)?e.accessToken=r:Ie(r)?e.idToken=r:Me(r)&&(e.refreshToken=r)})),e}async getTokens(){return this.getTokensSync()}getStorageKeyByType(e){const t=this.storage.getStorage();return Object.keys(t).filter((n=>{const r=t[n];return je(r)&&"accessToken"===e||Ie(r)&&"idToken"===e||Me(r)&&"refreshToken"===e}))[0]}getTokenType(e){if(je(e))return"accessToken";if(Ie(e))return"idToken";if(Me(e))return"refreshToken";throw new R("Unknown token type")}emitSetStorageEvent(){if(le()){const e=this.storage.getStorage();this.emitter.emit(Wr,e)}}getStorage(){return this.storage}setTokens(e,t,n,r){const o=(e,o)=>{const i=this.getTokenType(o);"accessToken"===i?t&&t(e,o):"idToken"===i?n&&n(e,o):"refreshToken"===i&&r&&r(e,o)},i=(e,t)=>{this.emitAdded(e,t),this.setExpireEventTimeout(e,t),o(e,t)},s=(e,t,n)=>{this.emitRenewed(e,t,n),this.clearExpireEventTimeout(e),this.setExpireEventTimeout(e,t),o(e,t)},a=(e,t)=>{this.clearExpireEventTimeout(e),this.emitRemoved(e,t),o(e,t)},c=["idToken","accessToken","refreshToken"],u=this.getTokensSync();c.forEach((t=>{const n=e[t];n&&Hr(n,t)}));const l=c.reduce(((t,n)=>{const r=e[n];if(r){t[this.getStorageKeyByType(n)||n]=r}return t}),{});this.storage.setStorage(l),this.emitSetStorageEvent(),c.forEach((t=>{const n=e[t],r=u[t],o=this.getStorageKeyByType(t)||t;n&&r?(a(o,r),i(o,n),s(o,n,r)):n?i(o,n):r&&a(o,r)}))}remove(e){this.clearExpireEventTimeout(e);var t=this.storage.getStorage(),n=t[e];delete t[e],this.storage.setStorage(t),this.emitSetStorageEvent(),this.emitRemoved(e,n)}async renewToken(e){var t;return null===(t=this.sdk.token)||void 0===t?void 0:t.renew(e)}validateToken(e){return Hr(e)}renew(e){if(this.state.renewPromise)return this.state.renewPromise;try{var t=this.getSync(e);let n=void 0!==t;if(!t&&"accessToken"===e){const e=this.getStorageKeyByType("refreshToken");n=void 0!==this.getSync(e)}if(!n)throw new R("The tokenManager has no token for the key: "+e)}catch(n){return this.emitError(n),Promise.reject(n)}this.clearExpireEventTimeout(e);return this.state.renewPromise=this.sdk.token.renewTokens().then((n=>{if(this.setTokens(n),!t&&"accessToken"===e){const t=n.accessToken;return this.emitRenewed(e,t,null),t}return n[this.getTokenType(t)]})).catch((t=>{throw this.remove(e),t.tokenKey=e,this.emitError(t),t})).finally((()=>{this.state.renewPromise=null}))}clear(){const e=this.getTokensSync();this.clearExpireEventTimeoutAll(),this.storage.clearStorage(),this.emitSetStorageEvent(),Object.keys(e).forEach((t=>{this.emitRemoved(t,e[t])}))}clearPendingRemoveTokens(){const e=this.storage.getStorage(),t={};Object.keys(e).forEach((n=>{e[n].pendingRemove&&(t[n]=e[n],delete e[n])})),this.storage.setStorage(e),this.emitSetStorageEvent(),Object.keys(t).forEach((e=>{this.clearExpireEventTimeout(e),this.emitRemoved(e,t[e])}))}updateRefreshToken(e){const t=this.getStorageKeyByType("refreshToken")||Y;var n=this.storage.getStorage();Hr(e),n[t]=e,this.storage.setStorage(n),this.emitSetStorageEvent()}removeRefreshToken(){const e=this.getStorageKeyByType("refreshToken")||Y;this.remove(e)}addPendingRemoveFlags(){const e=this.getTokensSync();Object.keys(e).forEach((t=>{e[t].pendingRemove=!0})),this.setTokens(e)}}var zr={browserHasLocalStorage:function(){try{var e=this.getLocalStorage();return this.testStorage(e)}catch(t){return!1}},browserHasSessionStorage:function(){try{var e=this.getSessionStorage();return this.testStorage(e)}catch(t){return!1}},testStorageType:function(e){var t=!1;switch(e){case"sessionStorage":t=this.browserHasSessionStorage();break;case"localStorage":t=this.browserHasLocalStorage();break;case"cookie":case"memory":t=!0;break;default:t=!1}return t},getStorageByType:function(e,t){let n;switch(e){case"sessionStorage":n=this.getSessionStorage();break;case"localStorage":n=this.getLocalStorage();break;case"cookie":n=this.getCookieStorage(t);break;case"memory":n=this.getInMemoryStorage();break;default:throw new R(`Unrecognized storage option: ${e}`)}return n},findStorageType:function(e){let t,n;return t=(e=e.slice()).shift(),n=e.length?e[0]:null,n?this.testStorageType(t)?t:(p(`This browser doesn't support ${t}. Switching to ${n}.`),this.findStorageType(e)):t},getLocalStorage:function(){return le()&&!window.onstorage&&(window.onstorage=function(){}),localStorage},getSessionStorage:function(){return sessionStorage},getCookieStorage:function(e){var t=this;const n=e.secure,r=e.sameSite,o=e.sessionCookie;if("undefined"===typeof n||"undefined"===typeof r)throw new R('getCookieStorage: "secure" and "sameSite" options must be provided');const i={getItem:this.storage.get,setItem:function(e,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2200-01-01T00:00:00.000Z";s=o?null:s,t.storage.set(e,i,s,{secure:n,sameSite:r})},removeItem:e=>{this.storage.delete(e)}};return e.useSeparateCookies?{getItem:function(e){var t=i.getItem(),n={};return Object.keys(t).forEach((r=>{0===r.indexOf(e)&&(n[r.replace(`${e}_`,"")]=JSON.parse(t[r]))})),JSON.stringify(n)},setItem:function(e,t){var n=JSON.parse(this.getItem(e));t=JSON.parse(t),Object.keys(t).forEach((r=>{var o=e+"_"+r,s=JSON.stringify(t[r]);i.setItem(o,s),delete n[r]})),Object.keys(n).forEach((t=>{i.removeItem(e+"_"+t)}))},removeItem:function(e){var t=JSON.parse(this.getItem(e));Object.keys(t).forEach((t=>{i.removeItem(e+"_"+t)}))}}:i},inMemoryStore:{},getInMemoryStorage:function(){return{getItem:e=>this.inMemoryStore[e],setItem:(e,t)=>{this.inMemoryStore[e]=t}}},testStorage:function(e){var t="okta-test-storage";try{return e.setItem(t,t),e.removeItem(t),!0}catch(n){return!1}},storage:{set:function(e,t,n,r){const{sameSite:o,secure:i}=r;if("undefined"===typeof i||"undefined"===typeof o)throw new R('storage.set: "secure" and "sameSite" options must be provided');var s={path:r.path||"/",secure:i,sameSite:o};return Date.parse(n)&&(s.expires=new Date(n)),Ce.set(e,t,s),this.get(e)},get:function(e){return arguments.length?Ce.get(e):Ce.get()},delete:function(e){return Ce.remove(e,{path:"/"})}}};function Jr(e,t){var n;const r=(o=e,class extends o{setOriginalUri(e,t){zr.getSessionStorage().setItem(X,e),(t=t||this.options.state)&&this.storageManager.getOriginalUriStorage().setItem(t,e)}getOriginalUri(e){if(e=e||this.options.state){const t=this.storageManager.getOriginalUriStorage().getItem(e);if(t)return t}const t=zr.getSessionStorage();return t&&t.getItem(X)||void 0}removeOriginalUri(e){if(zr.getSessionStorage().removeItem(X),e=e||this.options.state){const t=this.storageManager.getOriginalUriStorage();t.removeItem&&t.removeItem(e)}}});var o;return n=class extends r{constructor(){var e;super(...arguments),this.transactionManager=new t(Object.assign({storageManager:this.storageManager},this.options.transactionManager)),this.pkce={DEFAULT_CODE_CHALLENGE_METHOD:zn.DEFAULT_CODE_CHALLENGE_METHOD,generateVerifier:zn.generateVerifier,computeChallenge:zn.computeChallenge},this._pending={handleLogin:!1},this._tokenQueue=new $n,this.token=Nr(this,this._tokenQueue),this.tokenManager=new Gr(this,this.options.tokenManager),this.endpoints=(e=this,{authorize:{enrollAuthenticator:Dr.bind(null,e)}})}clearStorage(){super.clearStorage(),this.tokenManager.clear()}async isAuthenticated(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoRenew:t,autoRemove:r}=this.tokenManager.getOptions(),o=e.onExpiredToken?"renew"===e.onExpiredToken:t,i=e.onExpiredToken?"remove"===e.onExpiredToken:r;let{accessToken:s}=this.tokenManager.getTokensSync();if(s&&this.tokenManager.hasExpired(s))if(s=void 0,o)try{s=await this.tokenManager.renew("accessToken")}catch(n){}else i&&this.tokenManager.remove("accessToken");let{idToken:a}=this.tokenManager.getTokensSync();if(a&&this.tokenManager.hasExpired(a))if(a=void 0,o)try{a=await this.tokenManager.renew("idToken")}catch(c){}else i&&this.tokenManager.remove("idToken");return!(!s||!a)}async signInWithRedirect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{originalUri:t}=e,n=Le(e,["originalUri"]);if(!this._pending.handleLogin){this._pending.handleLogin=!0;try{t&&this.setOriginalUri(t);const e=Object.assign({scopes:this.options.scopes||["openid","email","profile"]},n);await this.token.getWithRedirect(e)}finally{this._pending.handleLogin=!1}}}async getUser(){const{idToken:e,accessToken:t}=this.tokenManager.getTokensSync();return this.token.getUserInfo(t,e)}getIdToken(){const{idToken:e}=this.tokenManager.getTokensSync();return e?e.idToken:void 0}getAccessToken(){const{accessToken:e}=this.tokenManager.getTokensSync();return e?e.accessToken:void 0}getRefreshToken(){const{refreshToken:e}=this.tokenManager.getTokensSync();return e?e.refreshToken:void 0}async getOrRenewAccessToken(){var e;const{accessToken:t}=this.tokenManager.getTokensSync();if(t&&!this.tokenManager.hasExpired(t))return t.accessToken;try{const t=this.tokenManager.getStorageKeyByType("accessToken"),n=await this.tokenManager.renew(null!==t&&void 0!==t?t:"accessToken");return null!==(e=null===n||void 0===n?void 0:n.accessToken)&&void 0!==e?e:null}catch(n){return this.emitter.emit("error",n),null}}async storeTokensFromRedirect(){const{tokens:e,responseType:t}=await this.token.parseFromUrl();"none"!==t&&this.tokenManager.setTokens(e)}isLoginRedirect(){return Cn(this)}isPKCE(){return!!this.options.pkce}hasResponseType(e){return function(e,t){let n=!1;return n=Array.isArray(t.responseType)&&t.responseType.length?t.responseType.indexOf(e)>=0:t.responseType===e,n}(e,this.options)}isAuthorizationCodeFlow(){return this.hasResponseType("code")}async invokeApiMethod(e){if(!e.accessToken){const t=(await this.tokenManager.getTokens()).accessToken;e.accessToken=null===t||void 0===t?void 0:t.accessToken}return Oe(this,e)}async revokeAccessToken(e){if(!e){const t=await this.tokenManager.getTokens();e=t.accessToken;const n=this.tokenManager.getStorageKeyByType("accessToken");this.tokenManager.remove(n),this.options.dpop&&await or("access",t)}return e?this.token.revoke(e):Promise.resolve(null)}async revokeRefreshToken(e){if(!e){const t=await this.tokenManager.getTokens();e=t.refreshToken;const n=this.tokenManager.getStorageKeyByType("refreshToken");this.tokenManager.remove(n),this.options.dpop&&await or("refresh",t)}return e?this.token.revoke(e):Promise.resolve(null)}getSignOutRedirectUrl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{idToken:t,postLogoutRedirectUri:n,state:r}=e;if(t||(t=this.tokenManager.getTokensSync().idToken),!t)return"";void 0===n&&(n=this.options.postLogoutRedirectUri);const o=L(this).logoutUrl,i=t.idToken;let s=o+"?id_token_hint="+encodeURIComponent(i);return n&&(s+="&post_logout_redirect_uri="+encodeURIComponent(n)),r&&(s+="&state="+encodeURIComponent(r)),s}async signOut(e){var t;e=Object.assign({},e);const n=window.location.origin,r=window.location.href,o=null===e.postLogoutRedirectUri?null:e.postLogoutRedirectUri||this.options.postLogoutRedirectUri||n,i=null===e||void 0===e?void 0:e.state;let s=e.accessToken,a=e.refreshToken;const c=!1!==e.revokeAccessToken,u=!1!==e.revokeRefreshToken;u&&"undefined"===typeof a&&(a=this.tokenManager.getTokensSync().refreshToken),c&&"undefined"===typeof s&&(s=this.tokenManager.getTokensSync().accessToken),e.idToken||(e.idToken=this.tokenManager.getTokensSync().idToken),u&&a&&await this.revokeRefreshToken(a),c&&s&&await this.revokeAccessToken(s);const l=null!==(t=null===s||void 0===s?void 0:s.dpopPairId)&&void 0!==t?t:null===a||void 0===a?void 0:a.dpopPairId;this.options.dpop&&l&&await nr(l);const d=this.getSignOutRedirectUrl(Object.assign(Object.assign({},e),{postLogoutRedirectUri:o}));if(d)return e.clearTokensBeforeRedirect?this.tokenManager.clear():this.tokenManager.addPendingRemoveFlags(),window.location.assign(d),!0;{const e=await this.closeSession(),t=new URL(o||n);return i&&t.searchParams.append("state",i),o===r?window.location.href=t.href:window.location.assign(t.href),e}}async getDPoPAuthorizationHeaders(e){if(!this.options.dpop)throw new R("DPoP is not configured for this client instance");let{accessToken:t}=e;if(t||(t=this.tokenManager.getTokensSync().accessToken),!t)throw new R("AccessToken is required to generate a DPoP Proof");const n=await tr(null===t||void 0===t?void 0:t.dpopPairId),r=await ir(Object.assign(Object.assign({},e),{keyPair:n,accessToken:t.accessToken}));return{Authorization:`DPoP ${t.accessToken}`,Dpop:r}}async clearDPoPStorage(){var e,t;if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return async function(){await er("clear")}();const n=await this.tokenManager.getTokens(),r=(null===(e=n.accessToken)||void 0===e?void 0:e.dpopPairId)||(null===(t=n.refreshToken)||void 0===t?void 0:t.dpopPairId);r&&await nr(r)}parseUseDPoPNonceError(e){var t;const n=O.getWWWAuthenticateHeader(e);if(Xn(O.parseHeader(null!==n&&void 0!==n?n:""))){let n=null;return S(null===e||void 0===e?void 0:e.get)&&(n=e.get("DPoP-Nonce")),n=null!==(t=null!==n&&void 0!==n?n:e["dpop-nonce"])&&void 0!==t?t:e["DPoP-Nonce"],n}return null}},n.crypto=s,n}var Qr=n(801);const Yr={updateAuthStatePromise:null,canceledTimes:0},Xr="authStateChange";class Zr{constructor(e){if(!e.emitter)throw new R("Emitter should be initialized before AuthStateManager");this._sdk=e,this._pending=Object.assign({},Yr),this._authState=null,this._logOptions={},this._prevAuthState=null,this._transformQueue=new $n({quiet:!0}),e.tokenManager.on(Br,((e,t)=>{this._setLogOptions({event:Br,key:e,token:t}),this.updateAuthState()})),e.tokenManager.on(Kr,((e,t)=>{this._setLogOptions({event:Kr,key:e,token:t}),this.updateAuthState()}))}_setLogOptions(e){this._logOptions=e}getAuthState(){return this._authState}getPreviousAuthState(){return this._prevAuthState}async updateAuthState(){const{transformAuthState:e,devMode:t}=this._sdk.options,n=e=>{const{event:t,key:n,token:r}=this._logOptions;f().group(`OKTA-AUTH-JS:updateAuthState: Event:${t} Status:${e}`),f().log(n,r),f().log("Current authState",this._authState),f().groupEnd(),this._logOptions={}},r=e=>{var r,o;(r=this._authState,o=e,r&&r.isAuthenticated===o.isAuthenticated&&JSON.stringify(r.idToken)===JSON.stringify(o.idToken)&&JSON.stringify(r.accessToken)===JSON.stringify(o.accessToken)&&r.error===o.error)?t&&n("unchanged"):(this._prevAuthState=this._authState,this._authState=e,this._sdk.emitter.emit(Xr,Object.assign({},e)),t&&n("emitted"))},o=e=>this._pending.updateAuthStatePromise.then((()=>{const t=this._pending.updateAuthStatePromise;return t&&t!==e?o(t):this.getAuthState()}));if(this._pending.updateAuthStatePromise){if(this._pending.canceledTimes>=10)return t&&n("terminated"),o(this._pending.updateAuthStatePromise);this._pending.updateAuthStatePromise.cancel()}const i=new Qr(((o,s,a)=>{a.shouldReject=!1,a((()=>{this._pending.updateAuthStatePromise=null,this._pending.canceledTimes=this._pending.canceledTimes+1,t&&n("canceled")}));const c=e=>{i.isCanceled?o():(r(e),o(),this._pending=Object.assign({},Yr))};this._sdk.isAuthenticated().then((()=>{if(i.isCanceled)return void o();const{accessToken:t,idToken:n,refreshToken:r}=this._sdk.tokenManager.getTokensSync(),s={accessToken:t,idToken:n,refreshToken:r,isAuthenticated:!(!t||!n)};(e?this._transformQueue.push(e,null,this._sdk,s):Promise.resolve(s)).then((e=>c(e))).catch((e=>c({accessToken:t,idToken:n,refreshToken:r,isAuthenticated:!1,error:e})))}))}));return this._pending.updateAuthStatePromise=i,o(i)}subscribe(e){this._sdk.emitter.on(Xr,e)}unsubscribe(e){this._sdk.emitter.off(Xr,e)}}class eo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.started=!1,this.tokenManager=e,this.options=t,this.renewTimeQueue=[],this.onTokenExpiredHandler=this.onTokenExpiredHandler.bind(this)}shouldThrottleRenew(){let e=!1;if(this.renewTimeQueue.push(Date.now()),this.renewTimeQueue.length>=10){const t=this.renewTimeQueue.shift();e=this.renewTimeQueue[this.renewTimeQueue.length-1]-t<3e4}return e}requiresLeadership(){return!!this.options.syncStorage&&ue()}processExpiredTokens(){const e=this.tokenManager.getStorage().getStorage();Object.keys(e).forEach((t=>{const n=e[t];!Me(n)&&this.tokenManager.hasExpired(n)&&this.onTokenExpiredHandler(t)}))}onTokenExpiredHandler(e){if(this.options.autoRenew)if(this.shouldThrottleRenew()){const e=new R("Too many token renew requests");this.tokenManager.emitError(e)}else this.tokenManager.renew(e).catch((()=>{}));else this.options.autoRemove&&this.tokenManager.remove(e)}canStart(){return(!!this.options.autoRenew||!!this.options.autoRemove)&&!this.started}async start(){this.canStart()&&(this.tokenManager.on(qr,this.onTokenExpiredHandler),this.tokenManager.isStarted()&&this.processExpiredTokens(),this.started=!0)}async stop(){this.started&&(this.tokenManager.off(qr,this.onTokenExpiredHandler),this.renewTimeQueue=[],this.started=!1)}isStarted(){return this.started}}Promise.resolve(!1);var to=Promise.resolve(!0),no=Promise.resolve();function ro(e,t){return e||(e=0),new Promise((function(n){return setTimeout((function(){return n(t)}),e)}))}function oo(){return Math.random().toString(36).substring(2)}var io=0;function so(){var e=1e3*Date.now();return e<=io&&(e=io+1),io=e,e}var ao={create:function(e){var t={time:so(),messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t},close:function(e){e.bc.close(),e.subFns=[]},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){try{return e.bc.postMessage(t,!1),no}catch(n){return Promise.reject(n)}},canBeUsed:function(){if("undefined"!==typeof globalThis&&globalThis.Deno&&globalThis.Deno.args)return!0;if("undefined"===typeof window&&"undefined"===typeof self||"function"!==typeof BroadcastChannel)return!1;if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0},type:"native",averageResponseTime:function(){return 150},microSeconds:so};class co{ttl;map=(()=>new Map)();_to=!1;constructor(e){this.ttl=e}has(e){return this.map.has(e)}add(e){this.map.set(e,uo()),this._to||(this._to=!0,setTimeout((()=>{this._to=!1,function(e){const t=uo()-e.ttl,n=e.map[Symbol.iterator]();for(;;){const r=n.next().value;if(!r)return;const o=r[0];if(!(r[1]<t))return;e.map.delete(o)}}(this)}),0))}clear(){this.map.clear()}}function uo(){return Date.now()}function lo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return"undefined"===typeof t.webWorkerSupport&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=45e3),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&"function"===typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=12e4),t.node.maxParallelWrites||(t.node.maxParallelWrites=2048),"undefined"===typeof t.node.useFastPath&&(t.node.useFastPath=!0),t}var ho="messages",fo={durability:"relaxed"};function po(){if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof window){if("undefined"!==typeof window.mozIndexedDB)return window.mozIndexedDB;if("undefined"!==typeof window.webkitIndexedDB)return window.webkitIndexedDB;if("undefined"!==typeof window.msIndexedDB)return window.msIndexedDB}return!1}function go(e){e.commit&&e.commit()}function mo(e,t){var n=e.transaction(ho,"readonly",fo),r=n.objectStore(ho),o=[],i=IDBKeyRange.bound(t+1,1/0);if(r.getAll){var s=r.getAll(i);return new Promise((function(e,t){s.onerror=function(e){return t(e)},s.onsuccess=function(t){e(t.target.result)}}))}return new Promise((function(e,s){var a=function(){try{return i=IDBKeyRange.bound(t+1,1/0),r.openCursor(i)}catch(e){return r.openCursor()}}();a.onerror=function(e){return s(e)},a.onsuccess=function(r){var i=r.target.result;i?i.value.id<t+1?i.continue(t+1):(o.push(i.value),i.continue()):(go(n),e(o))}}))}function vo(e){return function(e,t){var n=Date.now()-t,r=e.transaction(ho,"readonly",fo),o=r.objectStore(ho),i=[];return new Promise((function(e){o.openCursor().onsuccess=function(t){var o=t.target.result;if(o){var s=o.value;s.time<n?(i.push(s),o.continue()):(go(r),e(i))}else e(i)}}))}(e.db,e.options.idb.ttl).then((function(t){return function(e,t){if(e.closed)return Promise.resolve([]);var n=e.db.transaction(ho,"readwrite",fo).objectStore(ho);return Promise.all(t.map((function(e){var t=n.delete(e);return new Promise((function(e){t.onsuccess=function(){return e()}}))})))}(e,t.map((function(e){return e.id})))}))}function yo(e){e.closed||wo(e).then((function(){return ro(e.options.idb.fallbackInterval)})).then((function(){return yo(e)}))}function wo(e){return e.closed?no:e.messagesCallback?mo(e.db,e.lastCursorId).then((function(t){var n=t.filter((function(e){return!!e})).map((function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t})).filter((function(t){return function(e,t){return e.uuid!==t.uuid&&!t.eMIs.has(e.id)&&!(e.data.time<t.messagesCallbackTime)}(t,e)})).sort((function(e,t){return e.time-t.time}));return n.forEach((function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))})),no})):no}var ko={create:function(e,t){return t=lo(t),function(e){var t="pubkey.broadcast-channel-0-"+e,n=po().open(t);return n.onupgradeneeded=function(e){e.target.result.createObjectStore(ho,{keyPath:"id",autoIncrement:!0})},new Promise((function(e,t){n.onerror=function(e){return t(e)},n.onsuccess=function(){e(n.result)}}))}(e).then((function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:oo(),eMIs:new co(2*t.idb.ttl),writeBlockPromise:no,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},yo(r),r}))},close:function(e){e.closed=!0,e.db.close()},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,wo(e)},postMessage:function(e,t){return e.writeBlockPromise=e.writeBlockPromise.then((function(){return function(e,t,n){var r={uuid:t,time:Date.now(),data:n},o=e.transaction([ho],"readwrite",fo);return new Promise((function(e,t){o.oncomplete=function(){return e()},o.onerror=function(e){return t(e)},o.objectStore(ho).add(r),go(o)}))}(e.db,e.uuid,t)})).then((function(){var t,n;0===(t=0,n=10,Math.floor(Math.random()*(n-t+1)+t))&&vo(e)})),e.writeBlockPromise},canBeUsed:function(){return!!po()},type:"idb",averageResponseTime:function(e){return 2*e.idb.fallbackInterval},microSeconds:so};function bo(){var e;if("undefined"===typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(t){}return e}function To(e){return"pubkey.broadcastChannel-"+e}function So(){var e=bo();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch(n){return!1}return!0}var Oo={create:function(e,t){if(t=lo(t),!So())throw new Error("BroadcastChannel: localstorage cannot be used");var n=oo(),r=new co(t.localstorage.removeTimeout),o={channelName:e,uuid:n,eMIs:r};return o.listener=function(e,t){var n=To(e),r=function(e){e.key===n&&t(JSON.parse(e.newValue))};return window.addEventListener("storage",r),r}(e,(function(e){o.messagesCallback&&e.uuid!==n&&e.token&&!r.has(e.token)&&(e.data.time&&e.data.time<o.messagesCallbackTime||(r.add(e.token),o.messagesCallback(e.data)))})),o},close:function(e){var t;t=e.listener,window.removeEventListener("storage",t)},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){ro().then((function(){var r=To(e.channelName),o={token:oo(),time:Date.now(),data:t,uuid:e.uuid},i=JSON.stringify(o);bo().setItem(r,i);var s=document.createEvent("Event");s.initEvent("storage",!0,!0),s.key=r,s.newValue=i,window.dispatchEvent(s),n()}))}))},canBeUsed:So,type:"localstorage",averageResponseTime:function(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120},microSeconds:so},Eo=so,Ao=new Set;var _o={create:function(e){var t={time:Eo(),name:e,messagesCallback:null};return Ao.add(t),t},close:function(e){Ao.delete(e)},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){return new Promise((function(n){return setTimeout((function(){Array.from(Ao).forEach((function(n){n.name===e.name&&n!==e&&n.messagesCallback&&n.time<t.time&&n.messagesCallback(t)})),n()}),5)}))},canBeUsed:function(){return!0},type:"simulate",averageResponseTime:function(){return 5},microSeconds:Eo},xo=[ao,ko,Oo];var Po,Co=new Set,Ro=0,jo=function(e,t){this.id=Ro++,Co.add(this),this.name=e,Po&&(t=Po),this.options=lo(t),this.method=function(e){var t=[].concat(e.methods,xo).filter(Boolean);if(e.type){if("simulate"===e.type)return _o;var n=t.find((function(t){return t.type===e.type}));if(n)return n;throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||(t=t.filter((function(e){return"idb"!==e.type})));var r=t.find((function(e){return e.canBeUsed()}));if(r)return r;throw new Error("No usable method found in "+JSON.stringify(xo.map((function(e){return e.type}))))}(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,function(e){var t=e.method.create(e.name,e.options);n=t,n&&"function"===typeof n.then?(e._prepP=t,t.then((function(t){e._state=t}))):e._state=t;var n}(this)};function Io(e,t,n){var r={time:e.method.microSeconds(),type:t,data:n};return(e._prepP?e._prepP:no).then((function(){var t=e.method.postMessage(e._state,r);return e._uMP.add(t),t.catch().then((function(){return e._uMP.delete(t)})),t}))}function Mo(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function Lo(e,t,n){e._addEL[t].push(n),function(e){if(!e._iL&&Mo(e)){var t=function(t){e._addEL[t.type].forEach((function(e){t.time>=e.time&&e.fn(t.data)}))},n=e.method.microSeconds();e._prepP?e._prepP.then((function(){e._iL=!0,e.method.onMessage(e._state,t,n)})):(e._iL=!0,e.method.onMessage(e._state,t,n))}}(e)}function Uo(e,t,n){e._addEL[t]=e._addEL[t].filter((function(e){return e!==n})),function(e){if(e._iL&&!Mo(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}jo._pubkey=!0,jo.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return Io(this,"message",e)},postInternal:function(e){return Io(this,"internal",e)},set onmessage(e){var t={time:this.method.microSeconds(),fn:e};Uo(this,"message",this._onML),e&&"function"===typeof e?(this._onML=t,Lo(this,"message",t)):this._onML=null},addEventListener:function(e,t){Lo(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){Uo(this,e,this._addEL[e].find((function(e){return e.fn===t})))},close:function(){var e=this;if(!this.closed){Co.delete(this),this.closed=!0;var t=this._prepP?this._prepP:no;return this._onML=null,this._addEL.message=[],t.then((function(){return Promise.all(Array.from(e._uMP))})).then((function(){return Promise.all(e._befC.map((function(e){return e()})))})).then((function(){return e.method.close(e._state)}))}},get type(){return this.method.type},get isClosed(){return this.closed}};class Do{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.started=!1,this.enablePostMessage=!0,this.tokenManager=e,this.options=t,this.onTokenAddedHandler=this.onTokenAddedHandler.bind(this),this.onTokenRemovedHandler=this.onTokenRemovedHandler.bind(this),this.onTokenRenewedHandler=this.onTokenRenewedHandler.bind(this),this.onSetStorageHandler=this.onSetStorageHandler.bind(this),this.onSyncMessageHandler=this.onSyncMessageHandler.bind(this)}requiresLeadership(){return!1}isStarted(){return this.started}canStart(){return!!this.options.syncStorage&&ue()&&!this.started}async start(){if(!this.canStart())return;const{syncChannelName:e}=this.options;try{this.channel=new jo(e)}catch(t){throw new R("SyncStorageService is not supported in current browser.")}this.tokenManager.on(Br,this.onTokenAddedHandler),this.tokenManager.on(Kr,this.onTokenRemovedHandler),this.tokenManager.on(Vr,this.onTokenRenewedHandler),this.tokenManager.on(Wr,this.onSetStorageHandler),this.channel.addEventListener("message",this.onSyncMessageHandler),this.started=!0}async stop(){var e,t;this.started&&(this.tokenManager.off(Br,this.onTokenAddedHandler),this.tokenManager.off(Kr,this.onTokenRemovedHandler),this.tokenManager.off(Vr,this.onTokenRenewedHandler),this.tokenManager.off(Wr,this.onSetStorageHandler),null===(e=this.channel)||void 0===e||e.removeEventListener("message",this.onSyncMessageHandler),await(null===(t=this.channel)||void 0===t?void 0:t.close()),this.channel=void 0,this.started=!1)}onTokenAddedHandler(e,t){var n;this.enablePostMessage&&(null===(n=this.channel)||void 0===n||n.postMessage({type:Br,key:e,token:t}))}onTokenRemovedHandler(e,t){var n;this.enablePostMessage&&(null===(n=this.channel)||void 0===n||n.postMessage({type:Kr,key:e,token:t}))}onTokenRenewedHandler(e,t,n){var r;this.enablePostMessage&&(null===(r=this.channel)||void 0===r||r.postMessage({type:Vr,key:e,token:t,oldToken:n}))}onSetStorageHandler(e){var t;null===(t=this.channel)||void 0===t||t.postMessage({type:Wr,storage:e})}onSyncMessageHandler(e){switch(this.enablePostMessage=!1,e.type){case Wr:this.tokenManager.getStorage().setStorage(e.storage);break;case Br:this.tokenManager.emitAdded(e.key,e.token),this.tokenManager.setExpireEventTimeout(e.key,e.token);break;case Kr:this.tokenManager.clearExpireEventTimeout(e.key),this.tokenManager.emitRemoved(e.key,e.token);break;case Vr:this.tokenManager.emitRenewed(e.key,e.token,e.oldToken)}this.enablePostMessage=!0}}var No=n(285);var Ho=n(285),Fo="[object process]"===Object.prototype.toString.call("undefined"!==typeof Ho?Ho:0)?function(e){No.on("exit",(function(){return e()})),No.on("beforeExit",(function(){return e().then((function(){return No.exit()}))})),No.on("SIGINT",(function(){return e().then((function(){return No.exit()}))})),No.on("uncaughtException",(function(t){return e().then((function(){console.trace(t),No.exit(101)}))}))}:function(e){if("function"===typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var t=self.close.bind(self);self.close=function(){return e(),t()}}else{if("function"!==typeof window.addEventListener)return;window.addEventListener("beforeunload",(function(){e()}),!0),window.addEventListener("unload",(function(){e()}),!0)}},qo=new Set,Vo=!1;function Bo(e){if(Vo||(Vo=!0,Fo(Ko)),"function"!==typeof e)throw new Error("Listener is no function");return qo.add(e),{remove:function(){return qo.delete(e)},run:function(){return qo.delete(e),e()}}}function Ko(){var e=[];return qo.forEach((function(t){e.push(t()),qo.delete(t)})),Promise.all(e)}function Wo(e,t){var n={context:"leader",action:t,token:e.token};return e.broadcastChannel.postInternal(n)}function $o(e){e.isLeader=!0,e._hasLeader=!0;var t=Bo((function(){return e.die()}));e._unl.push(t);var n=function(t){"leader"===t.context&&"apply"===t.action&&Wo(e,"tell"),"leader"!==t.context||"tell"!==t.action||e._dpLC||(e._dpLC=!0,e._dpL(),Wo(e,"tell"))};return e.broadcastChannel.addEventListener("internal",n),e._lstns.push(n),Wo(e,"tell")}var Go=function(e,t){var n=this;this.broadcastChannel=e,e._befC.push((function(){return n.die()})),this._options=t,this.isLeader=!1,this.isDead=!1,this.token=oo(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN="pubkey-bc||"+e.method.type+"||"+e.name};Go.prototype={hasLeader:function(){var e=this;return navigator.locks.query().then((function(t){var n=t.held?t.held.filter((function(t){return t.name===e.lN})):[];return!!(n&&n.length>0)}))},awaitLeadership:function(){var e=this;if(!this._wLMP){this._wKMC.c=new AbortController;var t=new Promise((function(t,n){e._wKMC.res=t,e._wKMC.rej=n}));this._wLMP=new Promise((function(n){navigator.locks.request(e.lN,{signal:e._wKMC.c.signal},(function(){return e._wKMC.c=void 0,$o(e),n(),t})).catch((function(){}))}))}return this._wLMP},set onduplicate(e){},die:function(){var e=this;return this._lstns.forEach((function(t){return e.broadcastChannel.removeEventListener("internal",t)})),this._lstns=[],this._unl.forEach((function(e){return e.remove()})),this._unl=[],this.isLeader&&(this.isLeader=!1),this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort("LeaderElectionWebLock.die() called"),Wo(this,"death")}};var zo=function(e,t){var n=this;this.broadcastChannel=e,this._options=t,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=oo(),this._aplQ=no,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var r=function(e){"leader"===e.context&&("death"===e.action&&(n._hasLeader=!1),"tell"===e.action&&(n._hasLeader=!0))};this.broadcastChannel.addEventListener("internal",r),this._lstns.push(r)};function Jo(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=function(e,t){return e||(e={}),(e=JSON.parse(JSON.stringify(e))).fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}(t,e);var n="undefined"!==typeof navigator&&"undefined"!==typeof navigator.locks&&"function"===typeof navigator.locks.request?new Go(e,t):new zo(e,t);return e._befC.push((function(){return n.die()})),e._leaderElector=n,n}zo.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(e){var t=this;if(this.isLeader)return ro(0,!0);if(this.isDead)return ro(0,!1);if(this._aplQC>1)return this._aplQ;return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then((function(){return function(){if(t.isLeader)return to;var n,r=!1,o=new Promise((function(e){n=function(){r=!0,e()}})),i=function(e){"leader"===e.context&&e.token!=t.token&&("apply"===e.action&&e.token>t.token&&n(),"tell"===e.action&&(n(),t._hasLeader=!0))};t.broadcastChannel.addEventListener("internal",i);var s=e?4*t._options.responseTime:t._options.responseTime;return Wo(t,"apply").then((function(){return Promise.race([ro(s),o.then((function(){return Promise.reject(new Error)}))])})).then((function(){return Wo(t,"apply")})).then((function(){return Promise.race([ro(s),o.then((function(){return Promise.reject(new Error)}))])})).catch((function(){})).then((function(){return t.broadcastChannel.removeEventListener("internal",i),!r&&$o(t).then((function(){return!0}))}))}()})).then((function(){t._aplQC=t._aplQC-1})),this._aplQ.then((function(){return t.isLeader}))},awaitLeadership:function(){return this._aLP||(this._aLP=function(e){if(e.isLeader)return no;return new Promise((function(t){var n=!1;function r(){n||(n=!0,e.broadcastChannel.removeEventListener("internal",i),t(!0))}e.applyOnce().then((function(){e.isLeader&&r()}));var o=function(){return ro(e._options.fallbackInterval).then((function(){if(!e.isDead&&!n)return e.isLeader?void r():e.applyOnce(!0).then((function(){e.isLeader?r():o()}))}))};o();var i=function(t){"leader"===t.context&&"death"===t.action&&(e._hasLeader=!1,e.applyOnce().then((function(){e.isLeader&&r()})))};e.broadcastChannel.addEventListener("internal",i),e._lstns.push(i)}))}(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var e=this;return this._lstns.forEach((function(t){return e.broadcastChannel.removeEventListener("internal",t)})),this._lstns=[],this._unl.forEach((function(e){return e.remove()})),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,Wo(this,"death")}};class Qo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.started=!1,this.options=e,this.onLeaderDuplicate=this.onLeaderDuplicate.bind(this),this.onLeader=this.onLeader.bind(this)}onLeaderDuplicate(){}async onLeader(){var e,t;await(null===(t=(e=this.options).onLeader)||void 0===t?void 0:t.call(e))}isLeader(){var e;return!!(null===(e=this.elector)||void 0===e?void 0:e.isLeader)}hasLeader(){var e;return!!(null===(e=this.elector)||void 0===e?void 0:e.hasLeader)}async start(){if(this.canStart()){const{electionChannelName:e}=this.options;this.channel=new jo(e),this.elector=Jo(this.channel),this.elector.onduplicate=this.onLeaderDuplicate,this.elector.awaitLeadership().then(this.onLeader),this.started=!0}}async stop(){this.started&&(this.elector&&(await this.elector.die(),this.elector=void 0),this.channel&&(this.channel.postInternal=()=>Promise.resolve(),await this.channel.close(),this.channel=void 0),this.started=!1)}requiresLeadership(){return!1}isStarted(){return this.started}canStart(){return ue()&&!this.started}}const Yo=()=>Math.floor(Date.now()/1e3);class Xo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.started=!1,this.lastHidden=-1,this.tokenManager=e,this.options=t,this.onPageVisbilityChange=this._onPageVisbilityChange.bind(this)}_onPageVisbilityChange(){if(document.hidden)this.lastHidden=Yo();else if(this.lastHidden>0&&Yo()-this.lastHidden>=this.options.tabInactivityDuration){const{accessToken:e,idToken:t}=this.tokenManager.getTokensSync();if(e&&this.tokenManager.hasExpired(e)){const e=this.tokenManager.getStorageKeyByType("accessToken");this.tokenManager.renew(e).catch((()=>{}))}else if(t&&this.tokenManager.hasExpired(t)){const e=this.tokenManager.getStorageKeyByType("idToken");this.tokenManager.renew(e).catch((()=>{}))}}}async start(){this.canStart()&&document&&(document.addEventListener("visibilitychange",this.onPageVisbilityChange),this.started=!0)}async stop(){document&&(document.removeEventListener("visibilitychange",this.onPageVisbilityChange),this.started=!1)}canStart(){return ue()&&!!this.options.autoRenew&&!!this.options.renewOnTabActivation&&!this.started}requiresLeadership(){return!1}isStarted(){return this.started}}const Zo="autoRenew",ei="syncStorage",ti="leaderElection",ni="renewOnTabActivation";class ri{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.sdk=e,this.onLeader=this.onLeader.bind(this);const{autoRenew:n,autoRemove:r,syncStorage:o}=e.tokenManager.getOptions();t.electionChannelName=t.electionChannelName||t.broadcastChannelName,this.options=Object.assign({},ri.defaultOptions,{autoRenew:n,autoRemove:r,syncStorage:o},{electionChannelName:`${e.options.clientId}-election`,syncChannelName:`${e.options.clientId}-sync`},g(t)),this.started=!1,this.services=new Map,ri.knownServices.forEach((e=>{const t=this.createService(e);t&&this.services.set(e,t)}))}async onLeader(){this.started&&await this.startServices()}isLeader(){var e;return null===(e=this.getService(ti))||void 0===e?void 0:e.isLeader()}isLeaderRequired(){return[...this.services.values()].some((e=>e.canStart()&&e.requiresLeadership()))}async start(){this.started||(await this.startServices(),this.started=!0)}async stop(){await this.stopServices(),this.started=!1}getService(e){return this.services.get(e)}async startServices(){for(const[e,t]of this.services.entries())this.canStartService(e,t)&&await t.start()}async stopServices(){for(const e of this.services.values())await e.stop()}canStartService(e,t){let n=t.canStart()&&!t.isStarted();return e===ti?n&&(n=this.isLeaderRequired()):t.requiresLeadership()&&n&&(n=this.isLeader()),n}createService(e){const t=this.sdk.tokenManager;let n;switch(e){case ti:n=new Qo(Object.assign(Object.assign({},this.options),{onLeader:this.onLeader}));break;case Zo:n=new eo(t,Object.assign({},this.options));break;case ei:n=new Do(t,Object.assign({},this.options));break;case ni:n=new Xo(t,Object.assign({},this.options));break;default:throw new Error(`Unknown service ${e}`)}return n}}function oi(e){return e.session.get().then((function(e){return"ACTIVE"===e.status})).catch((function(){return!1}))}function ii(e){return Ee(e,"/api/v1/sessions/me",{withCredentials:!0}).then((function(t){var n=v(t,"_links");return n.refresh=function(){return Ae(e,w(t,"refresh").href,{},{withCredentials:!0})},n.user=function(){return Ee(e,w(t,"user").href,{withCredentials:!0})},n})).catch((function(){return{status:"INACTIVE"}}))}function si(e){return Oe(e,{url:e.getIssuerOrigin()+"/api/v1/sessions/me",method:"DELETE",withCredentials:!0})}function ai(e){return Ae(e,"/api/v1/sessions/me/lifecycle/refresh",{},{withCredentials:!0})}function ci(e,t,n){n=n||window.location.href,window.location.assign(e.getIssuerOrigin()+"/login/sessionCookieRedirect"+P({checkAccountSetupComplete:!0,token:t,redirectUrl:n}))}function ui(e){return class extends e{constructor(){var e;super(...arguments),this.session=(e=this,{close:si.bind(null,e),exists:oi.bind(null,e),get:ii.bind(null,e),refresh:ai.bind(null,e),setCookieAndRedirect:ci.bind(null,e)})}closeSession(){return this.session.close().then((async()=>(this.clearStorage(),!0))).catch((function(e){if("AuthApiError"===e.name&&"E0000007"===e.errorCode)return!1;throw e}))}}}function li(e,t,n){const i=function(e){class t{constructor(){const t=new e(arguments.length&&(arguments.length<=0?void 0:arguments[0])||{});this.options=g(t),this.emitter=new _e,this.features=o}}return t.features=o,t.constants=r,t.features=t.prototype.features=o,Object.assign(t,{constants:r}),t}(t),s=function(e,t){return class extends e{constructor(){super(...arguments);const{storageManager:e,cookies:n,storageUtil:r}=this.options;this.storageManager=new t(e,n,r)}clearStorage(){}}}(i,e),a=function(e){return class extends e{constructor(){super(...arguments),this._oktaUserAgent=new Mn,this.http={setRequestHeader:Ln.bind(null,this)}}setHeaders(e){this.options.headers=Object.assign({},this.options.headers,e)}getIssuerOrigin(){return this.options.issuer.split("/oauth2/")[0]}webfinger(e){return Ee(this,"/.well-known/webfinger"+P(e),{headers:{Accept:"application/jrd+json"}})}}}(s),c=function(e){return class extends e{constructor(){super(...arguments),this.authStateManager=new Zr(this),this.serviceManager=new ri(this,this.options.services)}async start(){await this.serviceManager.start(),this.tokenManager.start(),this.token.isLoginRedirect()||await this.authStateManager.updateAuthState()}async stop(){this.tokenManager.stop(),await this.serviceManager.stop()}async handleRedirect(e){await this.handleLoginRedirect(void 0,e)}async handleLoginRedirect(e,t){let n=this.options.state;if(e)this.tokenManager.setTokens(e),t=t||this.getOriginalUri(this.options.state);else{if(!this.isLoginRedirect())return;try{n=(await Ar(this,{})).state,t=t||this.getOriginalUri(n),await this.storeTokensFromRedirect()}catch(o){throw await this.authStateManager.updateAuthState(),o}}await this.authStateManager.updateAuthState(),this.removeOriginalUri(n);const{restoreOriginalUri:r}=this.options;r?await r(this,t):t&&window.location.replace(t)}handleIDPPopupRedirect(){const e=Ar(this,{responseMode:"query",url:arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href});if(!e.state)throw new R("Unable to parse auth code params");{const t=new BroadcastChannel(`popup-callback:${e.state}`);t.postMessage(e),t.close()}}}}(Jr(ui(a),n));return c}ri.knownServices=[Zo,ei,ti,ni],ri.defaultOptions={autoRenew:!0,autoRemove:!0,syncStorage:!0,renewOnTabActivation:!0,tabInactivityDuration:1800};function di(e,t){var n;if(!he())return Promise.reject(new R("Fingerprinting is not supported on this device"));const r=null!==(n=null===t||void 0===t?void 0:t.container)&&void 0!==n?n:document.body;let o,i,s;const a=new Promise((function(n,a){i=document.createElement("iframe"),i.style.display="none",s=function(t){var r;if(!((e,t)=>t.source===e.contentWindow)(i,t))return;if(!t||!t.data||t.origin!==e.getIssuerOrigin())return;let o;try{o=JSON.parse(t.data)}catch(s){return}return o?"FingerprintAvailable"===o.type?n(o.fingerprint):"FingerprintServiceReady"!==o.type?a(new R("No data")):void(null===(r=null===i||void 0===i?void 0:i.contentWindow)||void 0===r||r.postMessage(JSON.stringify({type:"GetFingerprint"}),t.origin)):void 0},fr(window,"message",s),i.src=e.getIssuerOrigin()+"/auth/services/devicefingerprint",r.appendChild(i),o=setTimeout((function(){a(new R("Fingerprinting timed out"))}),(null===t||void 0===t?void 0:t.timeout)||15e3)}));return a.finally((function(){var e;clearTimeout(o),pr(window,"message",s),r.contains(i)&&(null===(e=i.parentElement)||void 0===e||e.removeChild(i))}))}const hi=function(){const e=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>{"webauthn"===t.key&&e.push({type:"public-key",id:Vn(t.credentialId)})})),e},fi=(e,t)=>({publicKey:{rp:e.rp,user:{id:Vn(e.user.id),name:e.user.name,displayName:e.user.displayName},challenge:Vn(e.challenge),pubKeyCredParams:e.pubKeyCredParams,attestation:e.attestation,authenticatorSelection:e.authenticatorSelection,excludeCredentials:hi(t)}}),pi=(e,t)=>({publicKey:{challenge:Vn(e.challenge),userVerification:e.userVerification,allowCredentials:hi(t)}}),gi=e=>{const t=e.response;return{id:e.id,clientData:Bn(t.clientDataJSON),attestation:Bn(t.attestationObject)}},mi=e=>{const t=e.response;return{id:e.id,clientData:Bn(t.clientDataJSON),authenticatorData:Bn(t.authenticatorData),signatureData:Bn(t.signature)}};const vi={token:{storageTypes:["localStorage","sessionStorage","cookie"]},cache:{storageTypes:["localStorage","sessionStorage","cookie"]},transaction:{storageTypes:["sessionStorage","localStorage","cookie"]},"shared-transaction":{storageTypes:["localStorage"]},"original-uri":{storageTypes:["localStorage"]}};function yi(){const e=class{constructor(e){this.devMode=!!e.devMode}};return class extends e{constructor(e){super(e),this.cookies=function(){let e=arguments.length>1?arguments[1]:void 0;var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cookies||{};return"undefined"===typeof t.secure&&(t.secure=e),"undefined"===typeof t.sameSite&&(t.sameSite=t.secure?"none":"lax"),t.secure&&!e&&(p('The current page is not being served with the HTTPS protocol.\nFor security reasons, we strongly recommend using HTTPS.\nIf you cannot use HTTPS, set "cookies.secure" option to false.'),t.secure=!1),"none"!==t.sameSite||t.secure||(t.sameSite="lax"),t}(e,ye()),this.storageUtil=e.storageUtil||Object.assign({},zr,{inMemoryStore:{}}),this.storageManager=Object.assign(Object.assign({},vi),e.storageManager)}}}const wi=/application\/\w*\+?json/;function ki(e,t,n){var r=n.data,o=n.headers||{},i=o["Content-Type"]||o["content-type"]||"";r&&"string"!==typeof r&&(wi.test(i)?r=JSON.stringify(r):"application/x-www-form-urlencoded"===i&&(r=Object.entries(r).map((e=>{let[t,n]=e;return`${t}=${encodeURIComponent(n)}`})).join("&")));var s=(window.fetch||Re)(t,{method:e,headers:n.headers,body:r,credentials:n.withCredentials?"include":"omit"});return s.finally||(s=Promise.resolve(s)),s.then((function(e){var t=!e.ok,n=e.status;return function(e){return e.headers.get("Content-Type")&&e.headers.get("Content-Type").toLowerCase().indexOf("application/json")>=0?e.json().catch((e=>({error:e,errorSummary:"Could not parse server response"}))):e.text()}(e).then((t=>function(e,t,n){const r="object"===typeof t,o={};for(const s of n.headers.entries())o[s[0]]=s[1];const i={responseText:r?JSON.stringify(t):t,status:e,headers:o};return r&&(i.responseType="json",i.responseJSON=t),i}(n,t,e))).then((e=>{var n;if(t||(null===(n=e.responseJSON)||void 0===n?void 0:n.error))throw e;return e}))}))}function bi(){const e=function(){const e=yi();return class extends e{constructor(e){super(e),this.issuer=e.issuer,this.transformErrorXHR=e.transformErrorXHR,this.headers=e.headers,this.httpRequestClient=e.httpRequestClient||ki,this.httpRequestInterceptors=e.httpRequestInterceptors,this.pollDelay=e.pollDelay}}}();return class extends e{constructor(e){super(e),function(e){var t=(e=e||{}).scopes;if(t&&!Array.isArray(t))throw new R('scopes must be a array of strings. Required usage: new OktaAuth({scopes: ["openid", "email"]})');var n=e.issuer;if(!n)throw new R('No issuer passed to constructor. Required usage: new OktaAuth({issuer: "https://{yourOktaDomain}.com/oauth2/{authServerId}"})');if(!new RegExp("^http?s?://.+").test(n))throw new R('Issuer must be a valid URL. Required usage: new OktaAuth({issuer: "https://{yourOktaDomain}.com/oauth2/{authServerId}"})');if(-1!==n.indexOf("-admin.okta"))throw new R('Issuer URL passed to constructor contains "-admin" in subdomain. Required usage: new OktaAuth({issuer: "https://{yourOktaDomain}.com})')}(e),this.issuer=C(e.issuer),this.tokenUrl=C(e.tokenUrl),this.authorizeUrl=C(e.authorizeUrl),this.userinfoUrl=C(e.userinfoUrl),this.revokeUrl=C(e.revokeUrl),this.logoutUrl=C(e.logoutUrl),this.pkce=!1!==e.pkce,this.clientId=e.clientId,this.redirectUri=e.redirectUri,ue()&&(this.redirectUri=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return x(e)?e:(t=C(t),"/"===e[0]?`${t}${e}`:`${t}/${e}`)}(e.redirectUri,window.location.origin)),this.responseType=e.responseType,this.responseMode=e.responseMode,this.state=e.state,this.scopes=e.scopes,this.ignoreSignature=!!e.ignoreSignature,this.codeChallenge=e.codeChallenge,this.codeChallengeMethod=e.codeChallengeMethod,this.acrValues=e.acrValues,this.maxAge=e.maxAge,this.dpop=!0===e.dpop,this.dpopOptions=Object.assign({allowBearerTokens:!1},e.dpopOptions),this.tokenManager=e.tokenManager,this.postLogoutRedirectUri=e.postLogoutRedirectUri,this.restoreOriginalUri=e.restoreOriginalUri,this.transactionManager=Object.assign({enableSharedStorage:true},e.transactionManager),this.clientSecret=e.clientSecret,this.setLocation=e.setLocation,this.ignoreLifetime=!!e.ignoreLifetime,e.maxClockSkew||0===e.maxClockSkew?this.maxClockSkew=e.maxClockSkew:this.maxClockSkew=F}}}class Ti{constructor(e,t){if(!e)throw new R('"storage" is required');if("string"!==typeof t||!t.length)throw new R('"storageName" is required');this.storageName=t,this.storageProvider=e}getItem(e){return this.getStorage()[e]}setItem(e,t){return this.updateStorage(e,t)}removeItem(e){return this.clearStorage(e)}getStorage(){var e=this.storageProvider.getItem(this.storageName);e=e||"{}";try{return JSON.parse(e)}catch(t){throw new R("Unable to parse storage string: "+this.storageName)}}setStorage(e){try{var t=e?JSON.stringify(e):"{}";this.storageProvider.setItem(this.storageName,t)}catch(n){throw new R("Unable to set storage: "+this.storageName)}}clearStorage(e){if(e){var t=this.getStorage();delete t[e],this.setStorage(t)}else this.storageProvider.removeItem?this.storageProvider.removeItem(this.storageName):this.setStorage()}updateStorage(e,t){var n=this.getStorage();n[e]=t,this.setStorage(n)}}function Si(e){ue()||e.storageProvider||e.storageKey||p("Memory storage can only support simple single user use case on server side, please provide custom storageProvider or storageKey if advanced scenarios need to be supported.")}class Oi{constructor(e,t,n){this.storageManagerOptions=e,this.cookieOptions=t,this.storageUtil=n}getOptionsForSection(e,t){return Object.assign({},this.storageManagerOptions[e],t)}getStorage(e){if((e=Object.assign({},this.cookieOptions,e)).storageProvider)return e.storageProvider;let{storageType:t,storageTypes:n}=e;if("sessionStorage"===t&&(e.sessionCookie=!0),t&&n){const e=n.indexOf(t);e>=0&&(n=n.slice(e),t=void 0)}return t||(t=this.storageUtil.findStorageType(n)),this.storageUtil.getStorageByType(t,e)}getTokenStorage(e){Si(e=this.getOptionsForSection("token",e));const t=this.getStorage(e),n=e.storageKey||V;return new Ti(t,n)}getHttpCache(e){e=this.getOptionsForSection("cache",e);const t=this.getStorage(e),n=e.storageKey||B;return new Ti(t,n)}}function Ei(){return class extends Oi{constructor(e,t,n){super(e,t,n)}getTransactionStorage(e){Si(e=this.getOptionsForSection("transaction",e));const t=this.getStorage(e),n=e.storageKey||W;return new Ti(t,n)}getSharedTansactionStorage(e){Si(e=this.getOptionsForSection("shared-transaction",e));const t=this.getStorage(e),n=e.storageKey||$;return new Ti(t,n)}getOriginalUriStorage(e){Si(e=this.getOptionsForSection("original-uri",e));const t=this.getStorage(e),n=e.storageKey||G;return new Ti(t,n)}}}function Ai(e){return!(!e||"object"!==typeof e||0===Object.values(e).length)}function _i(e){return!!Ai(e)&&(!!e.redirectUri||!!e.responseType)}function xi(e){return!(!_i(e)&&!function(e){return!!Ai(e)&&void 0===Object.values(e).find((e=>"string"!==typeof e))}(e))}function Pi(){return class{constructor(e){this.storageManager=e.storageManager,this.enableSharedStorage=!1!==e.enableSharedStorage,this.saveLastResponse=!1!==e.saveLastResponse,this.options=e}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.storageManager.getTransactionStorage(),n=t.getStorage();if(t.clearStorage(),this.enableSharedStorage&&!1!==e.clearSharedStorage){const t=e.state||(null===n||void 0===n?void 0:n.state);t&&function(e,t){const n=e.getSharedTansactionStorage(),r=n.getStorage();delete r[t],n.setStorage(r)}(this.storageManager,t)}}save(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.storageManager.getTransactionStorage();xi(n.getStorage())&&!t.muteWarning&&p("a saved auth transaction exists in storage. This may indicate another auth flow is already in progress."),n.setStorage(e),this.enableSharedStorage&&e.state&&function(e,t,n){const r=e.getSharedTansactionStorage(),o=r.getStorage();o[t]={dateCreated:Date.now(),transaction:n},r.setStorage(o)}(this.storageManager,e.state,e)}exists(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return!!this.load(e)}catch(t){return!1}}load(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.enableSharedStorage&&t.state&&(function(e){const t=e.getSharedTansactionStorage(),n=t.getStorage();Object.keys(n).forEach((e=>{const t=n[e];Date.now()-t.dateCreated>18e5&&delete n[e]})),t.setStorage(n)}(this.storageManager),e=function(e,t){const n=e.getSharedTansactionStorage().getStorage()[t];return n&&n.transaction&&xi(n.transaction)?n.transaction:null}(this.storageManager,t.state),xi(e))?e:(e=this.storageManager.getTransactionStorage().getStorage(),xi(e)?e:null)}}}class Ci{constructor(e,t){const{res:n}=t,{headers:r}=n,o=Le(n,["headers"]);r&&(this.headers=r),Object.keys(o).forEach((e=>{"_links"!==e&&(this[e]=o[e])}))}}async function Ri(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ci;const{accessToken:r}=e.tokenManager.getTokensSync(),o=t.accessToken||r,i=e.getIssuerOrigin(),{url:s,method:a,payload:c}=t,u=s.startsWith(i)?s:`${i}${s}`;if(!o)throw new R("AccessToken is required to request MyAccount API endpoints.");let l=o;const d=Object.assign({headers:{Accept:"*/*;okta-version=1.0.0"},url:u,method:a},c&&{args:c});if(e.options.dpop){if("string"===typeof l)throw new R("AccessToken object must be provided when using dpop");const{Authorization:t,Dpop:n}=await e.getDPoPAuthorizationHeaders({method:a,url:u,accessToken:l});d.headers.Authorization=t,d.headers.Dpop=n}else l="string"===typeof l?l:l.accessToken,d.accessToken=l;const h=await Oe(e,d);let f;return f=Array.isArray(h)?h.map((t=>new n(e,{res:t,accessToken:l}))):new n(e,{res:h,accessToken:l}),f}function ji(e){let{oktaAuth:t,accessToken:n,methodName:r,links:o}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ci;for(const a of["GET","POST","PUT","DELETE"])if(a.toLowerCase()===r){const e=o.self;return async r=>Ri(t,{accessToken:n,url:e.href,method:a,payload:r},i)}const s=o[r];if(!s)throw new R(`No link is found with methodName: ${r}`);return async e=>Ri(t,{accessToken:n,url:s.href,method:s.hints.allow[0],payload:e},i)}class Ii extends Ci{constructor(e,t){super(e,t);const{createdAt:n,modifiedAt:r,profile:o}=t.res;this.createdAt=n,this.modifiedAt=r,this.profile=o}}class Mi extends Ci{constructor(e,t){super(e,t),this.properties=t.res.properties}}var Li,Ui,Di;!function(e){e.PRIMARY="PRIMARY",e.SECONDARY="SECONDARY"}(Li||(Li={})),function(e){e.VERIFIED="VERIFIED",e.UNVERIFIED="UNVERIFIED"}(Ui||(Ui={})),function(e){e.NOT_ENROLLED="NOT_ENROLLED",e.ACTIVE="ACTIVE"}(Di||(Di={}));const Ni=async(e,t)=>await Ri(e,{url:"/idp/myaccount/profile",method:"GET",accessToken:null===t||void 0===t?void 0:t.accessToken},Ii),Hi=async(e,t)=>{const{payload:n,accessToken:r}=t;return await Ri(e,{url:"/idp/myaccount/profile",method:"PUT",payload:n,accessToken:r},Ii)},Fi=async(e,t)=>await Ri(e,{url:"/idp/myaccount/profile/schema",method:"GET",accessToken:null===t||void 0===t?void 0:t.accessToken},Mi);class qi extends Ci{constructor(e,t){super(e,t);const{res:n}=t,{id:r,profile:o,expiresAt:i,status:s}=n;this.id=r,this.expiresAt=i,this.profile=o,this.status=s}}class Vi extends Ci{constructor(e,t){super(e,t);const{accessToken:n,res:r}=t,{id:o,expiresAt:i,profile:s,status:a,_links:c}=r;this.id=o,this.expiresAt=i,this.profile=s,this.status=a,this.poll=async()=>{const t=ji({oktaAuth:e,accessToken:n,methodName:"poll",links:c},qi);return await t()},this.verify=async t=>{const r=ji({oktaAuth:e,accessToken:n,methodName:"verify",links:c},Vi);return await r(t)}}}class Bi extends Ci{constructor(e,t){super(e,t);const{accessToken:n,res:r}=t,{id:o,profile:i,roles:s,status:a,_links:c}=r;this.id=o,this.profile=i,this.roles=s,this.status=a,this.get=async()=>{const t=ji({oktaAuth:e,accessToken:n,methodName:"get",links:c},Bi);return await t()},this.delete=async()=>{const t=ji({oktaAuth:e,accessToken:n,methodName:"delete",links:c});return await t()},this.challenge=async()=>{const t=ji({oktaAuth:e,accessToken:n,methodName:"challenge",links:c},Vi);return await t()},c.poll&&(this.poll=async()=>{const t=ji({oktaAuth:e,accessToken:n,methodName:"poll",links:c},qi);return await t()}),c.verify&&(this.verify=async t=>{const r=ji({oktaAuth:e,accessToken:n,methodName:"verify",links:c});return await r(t)})}}const Ki=async(e,t)=>await Ri(e,{url:"/idp/myaccount/emails",method:"GET",accessToken:null===t||void 0===t?void 0:t.accessToken},Bi),Wi=async(e,t)=>{const{id:n,accessToken:r}=t;return await Ri(e,{url:`/idp/myaccount/emails/${n}`,method:"GET",accessToken:r},Bi)},$i=async(e,t)=>{const{accessToken:n,payload:r}=t;return await Ri(e,{url:"/idp/myaccount/emails",method:"POST",payload:r,accessToken:n},Bi)},Gi=async(e,t)=>{const{id:n,accessToken:r}=t;return await Ri(e,{url:`/idp/myaccount/emails/${n}`,method:"DELETE",accessToken:r})},zi=async(e,t)=>{const{id:n,accessToken:r}=t;return await Ri(e,{url:`/idp/myaccount/emails/${n}/challenge`,method:"POST",accessToken:r},Vi)},Ji=async(e,t)=>{const{emailId:n,challengeId:r,accessToken:o}=t;return await Ri(e,{url:`/idp/myaccount/emails/${n}/challenge/${r}`,method:"POST",accessToken:o},Vi)},Qi=async(e,t)=>{const{emailId:n,challengeId:r,payload:o,accessToken:i}=t;return await Ri(e,{url:`/idp/myaccount/emails/${n}/challenge/${r}/verify`,method:"POST",payload:o,accessToken:i})};class Yi extends Ci{constructor(e,t){super(e,t);const{res:n,accessToken:r}=t,{id:o,profile:i,status:s,_links:a}=n;this.id=o,this.profile=i,this.status=s,this.get=async()=>{const t=ji({oktaAuth:e,accessToken:r,methodName:"get",links:a},Yi);return await t()},this.delete=async()=>{const t=ji({oktaAuth:e,accessToken:r,methodName:"delete",links:a});return await t()},this.challenge=async t=>{const n=ji({oktaAuth:e,accessToken:r,methodName:"challenge",links:a});return await n(t)},a.verify&&(this.verify=async t=>{const n=ji({oktaAuth:e,accessToken:r,methodName:"verify",links:a});return await n(t)})}}const Xi=async(e,t)=>await Ri(e,{url:"/idp/myaccount/phones",method:"GET",accessToken:null===t||void 0===t?void 0:t.accessToken},Yi),Zi=async(e,t)=>{const{accessToken:n,id:r}=t;return await Ri(e,{url:`/idp/myaccount/phones/${r}`,method:"GET",accessToken:n},Yi)},es=async(e,t)=>{const{accessToken:n,payload:r}=t;return await Ri(e,{url:"/idp/myaccount/phones",method:"POST",payload:r,accessToken:n},Yi)},ts=async(e,t)=>{const{id:n,accessToken:r}=t;return await Ri(e,{url:`/idp/myaccount/phones/${n}`,method:"DELETE",accessToken:r})},ns=async(e,t)=>{const{accessToken:n,id:r,payload:o}=t;return await Ri(e,{url:`/idp/myaccount/phones/${r}/challenge`,method:"POST",payload:o,accessToken:n})},rs=async(e,t)=>{const{id:n,payload:r,accessToken:o}=t;return await Ri(e,{url:`/idp/myaccount/phones/${n}/verify`,method:"POST",payload:r,accessToken:o})};class os extends Ci{constructor(e,t){super(e,t);const{res:n,accessToken:r}=t,{id:o,status:i,created:s,lastUpdated:a,_links:c}=n;this.id=o,this.status=i,this.created=s,this.lastUpdated=a,this.status==Di.NOT_ENROLLED?this.enroll=async t=>{const n=ji({oktaAuth:e,accessToken:r,methodName:"enroll",links:c},os);return await n(t)}:(this.get=async()=>{const t=ji({oktaAuth:e,accessToken:r,methodName:"get",links:c},os);return await t()},this.update=async t=>{const n=ji({oktaAuth:e,accessToken:r,methodName:"put",links:c},os);return await n(t)},this.delete=async()=>{const t=ji({oktaAuth:e,accessToken:r,methodName:"delete",links:c});return await t()})}}const is=async(e,t)=>await Ri(e,{url:"/idp/myaccount/password",method:"GET",accessToken:null===t||void 0===t?void 0:t.accessToken},os),ss=async(e,t)=>{const{accessToken:n,payload:r}=t;return await Ri(e,{url:"/idp/myaccount/password",method:"POST",payload:r,accessToken:n},os)},as=async(e,t)=>{const{accessToken:n,payload:r}=t;return await Ri(e,{url:"/idp/myaccount/password",method:"PUT",payload:r,accessToken:n},os)},cs=async(e,t)=>await Ri(e,{url:"/idp/myaccount/password",method:"DELETE",accessToken:null===t||void 0===t?void 0:t.accessToken});function us(e,t){var n={};return Object.assign(n,t),!n.stateToken&&e.stateToken&&(n.stateToken=e.stateToken),n}function ls(e,t){return t=us(e,t),Ae(e,e.getIssuerOrigin()+"/api/v1/authn",t,{withCredentials:!0})}function ds(e,t,n){if(!n||!n.stateToken){var r=ps(e);if(!r)return Promise.reject(new R("No transaction to evaluate"));n={stateToken:r}}return function(e,t){return t=us(e,t),Ae(e,e.getIssuerOrigin()+"/api/v1/authn/introspect",t,{withCredentials:!0})}(e,n).then((function(e){return t.createTransaction(e)}))}function hs(e){return!!ps(e)}function fs(e,t,n,r,o){return Ae(e,n,r,o=Object.assign({withCredentials:!0},o)).then((function(e){return t.createTransaction(e)}))}function ps(e){return e.options.storageUtil.storage.get(D)}function gs(e,t,n,r,o,i){if(Array.isArray(o))return function(s,a){if(!s)throw new R("Must provide a link name");var c=y(o,{name:s});if(!c)throw new R("No link found for that name");return gs(e,t,n,r,c,i)(a)};if(o.hints&&o.hints.allow&&1===o.hints.allow.length)switch(o.hints.allow[0]){case"GET":return function(){return Ee(e,o.href,{withCredentials:!0})};case"POST":return function(s){i&&i.isPolling&&(i.isPolling=!1);var a=us(n,s);"MFA_ENROLL"!==n.status&&"FACTOR_ENROLL"!==n.status||Object.assign(a,{factorType:r.factorType,provider:r.provider});var c={},u=a.autoPush;if(void 0!==u){if("function"===typeof u)try{c.autoPush=!!u()}catch(h){return Promise.reject(new R("AutoPush resulted in an error."))}else null!==u&&(c.autoPush=!!u);a=v(a,"autoPush")}var l=a.rememberDevice;if(void 0!==l){if("function"===typeof l)try{c.rememberDevice=!!l()}catch(h){return Promise.reject(new R("RememberDevice resulted in an error."))}else null!==l&&(c.rememberDevice=!!l);a=v(a,"rememberDevice")}else a.profile&&void 0!==a.profile.updatePhone&&(a.profile.updatePhone&&(c.updatePhone=!0),a.profile=v(a.profile,"updatePhone"));var d=o.href+P(c);return fs(e,t,d,a)}}}class ms extends k{constructor(){super("The poll was stopped by the sdk")}}function vs(e,t,n){return function(r){var o,i,s,a,c;c=r,"[object Number]"===Object.prototype.toString.call(c)?o=r:T(r)&&(o=r.delay,i=r.rememberDevice,s=r.autoPush,a=r.transactionCallBack),o||0===o||(o=N);var u=w(t,"next","poll");function l(){var n={};if("function"===typeof s)try{n.autoPush=!!s()}catch(o){return Promise.reject(new R("AutoPush resulted in an error."))}else void 0!==s&&null!==s&&(n.autoPush=!!s);if("function"===typeof i)try{n.rememberDevice=!!i()}catch(o){return Promise.reject(new R("RememberDevice resulted in an error."))}else void 0!==i&&null!==i&&(n.rememberDevice=!!i);var r=u.href+P(n);return Ae(e,r,function(e){return us(e)}(t),{saveAuthnState:!1,withCredentials:!0,pollingIntent:!0})}n.isPolling=!0;var d=0,h=function(){return n.isPolling?l().then((function(t){if(d=0,t.factorResult&&"WAITING"===t.factorResult){if(!n.isPolling)throw new ms;return"function"===typeof a&&a(t),A(o).then(h)}return n.isPolling=!1,e.tx.createTransaction(t)})).catch((function(e){if(e.xhr&&(0===e.xhr.status||429===e.xhr.status)&&d<=4){var t=1e3*Math.pow(2,d);return d++,A(t).then(h)}throw e})):Promise.reject(new ms)};return h().catch((function(e){throw n.isPolling=!1,e}))}}function ys(e,t,n,r,o){if(r=m(r=r||n),Array.isArray(r)){for(var i=[],s=0,a=r.length;s<a;s++)i.push(ys(e,t,n,r[s],o));return i}var c=r._embedded||{};for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(T(c[u])||Array.isArray(c[u]))&&(c[u]=ys(e,t,n,c[u],o));var l=function(e,t,n,r,o){var i={};for(var s in r._links)if(Object.prototype.hasOwnProperty.call(r._links,s)){var a=r._links[s];if("next"===s&&(s=a.name),a.type)i[s]=a;else if("poll"===s)i.poll=vs(e,n,o);else{var c=gs(e,t,n,r,a,o);c&&(i[s]=c)}}return i}(e,t,n,r,o);return Object.assign(c,l),r=v(r,"_embedded","_links"),Object.assign(r,c),r}class ws{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.data=void 0,this.status=void 0,n&&(this.data=n,Object.assign(this,ys(e,t,n,n,{})),delete this.stateToken,"RECOVERY_CHALLENGE"!==n.status||n._links||(this.cancel=function(){return Promise.resolve(t.createTransaction())}))}}function ks(e){const t={status:ls.bind(null,e),resume:n=>function(e,t,n){if(!n||!n.stateToken){var r=ps(e);if(!r)return Promise.reject(new R("No transaction to resume"));n={stateToken:r}}return ls(e,n).then((function(e){return t.createTransaction(e)}))}(e,t,n),exists:hs.bind(null,e),introspect:n=>ds(e,t,n),createTransaction:n=>new ws(e,t,n),postToTransaction:(n,r,o)=>fs(e,t,n,r,o)};return t}const bs=function(){const e=function(){const e=bi();return class extends e{constructor(e){super(e),this.services=e.services,this.transformAuthState=e.transformAuthState}}}();return class extends e{constructor(e){super(e),this.flow=e.flow,this.activationToken=e.activationToken,this.recoveryToken=e.recoveryToken,this.idx=e.idx}}}(),Ts=function(){const e=Ei();return class extends e{constructor(e,t,n){super(e,t,n)}getIdxResponseStorage(e){let t;if(ue())try{t=this.storageUtil.getStorageByType("memory",e)}catch(n){p("No response storage found, you may want to provide custom implementation for intermediate idx responses to optimize the network traffic")}else{const n=this.getTransactionStorage(e);n&&(t={getItem:e=>{const t=n.getStorage();return t&&t[e]?t[e]:null},setItem:(e,t)=>{const r=n.getStorage();if(!r)throw new R("Transaction has been cleared, failed to save idxState");r[e]=t,n.setStorage(r)},removeItem:e=>{const t=n.getStorage();t&&(delete t[e],n.setStorage(t))}})}return t?new Ti(t,z):null}}}(),Ss=function(e,t,n){const r=function(e){var t;return t=class extends e{constructor(){super(...arguments),this.idx=jn(this),this.fingerprint=di.bind(null,this)}},t.webauthn=a,t}(li(e,t,n));return r}(Ts,bs,function(){const e=Pi();return class extends e{constructor(e){super(e)}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super.clear(e),!1!==e.clearIdxResponse&&this.clearIdxResponse()}saveIdxResponse(e){if(!this.saveLastResponse)return;const t=this.storageManager.getIdxResponseStorage();t&&t.setStorage(e)}loadIdxResponse(e){if(!this.saveLastResponse)return null;const t=this.storageManager.getIdxResponseStorage();if(!t)return null;const n=t.getStorage();if(!n||!ot(n.rawIdxResponse))return null;if(e){const{stateHandle:t,interactionHandle:r}=e;if(!e.useGenericRemediator&&t&&n.stateHandle!==t)return null;if(r&&n.interactionHandle!==r)return null}return n}clearIdxResponse(){if(!this.saveLastResponse)return;const e=this.storageManager.getIdxResponseStorage();null===e||void 0===e||e.clearStorage()}}}());var Os;const Es=function(e){return class extends e{constructor(){super(...arguments),this.authn=this.tx=ks(this),this.fingerprint=di.bind(null,this)}async signIn(e){e=m(e||{});const t=t=>(delete e.sendFingerprint,this.tx.postToTransaction("/api/v1/authn",e,t));return e.sendFingerprint?this.fingerprint().then((function(e){return t({headers:{"X-Device-Fingerprint":e}})})):t()}async signInWithCredentials(e){return this.signIn(e)}forgotPassword(e){return this.tx.postToTransaction("/api/v1/authn/recovery/password",e)}unlockAccount(e){return this.tx.postToTransaction("/api/v1/authn/recovery/unlock",e)}verifyRecoveryToken(e){return this.tx.postToTransaction("/api/v1/authn/recovery/token",e)}}}((Os=Ss,class extends Os{constructor(){super(...arguments),this.myaccount=Object.entries(d).filter((e=>{let[t]=e;return"default"!==t})).reduce(((e,t)=>{let[n,r]=t;return e[n]=r.bind(null,this),e}),{})}}));class As extends Es{constructor(e){super(e)}}},285:e=>{var t,n,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"===typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var a,c=[],u=!1,l=-1;function d(){u&&a&&(u=!1,a.length?c=a.concat(c):l=-1,c.length&&h())}function h(){if(!u){var e=s(d);u=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},633:(e,t,n)=>{var r=n(738).default;function o(){"use strict";e.exports=o=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},i=Object.prototype,s=i.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",d=c.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(t){h=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof k?t:k,i=Object.create(o.prototype),s=new I(r||[]);return a(i,"_invoke",{value:P(e,n,s)}),i}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=f;var g="suspendedStart",m="suspendedYield",v="executing",y="completed",w={};function k(){}function b(){}function T(){}var S={};h(S,u,(function(){return this}));var O=Object.getPrototypeOf,E=O&&O(O(M([])));E&&E!==i&&s.call(E,u)&&(S=E);var A=T.prototype=k.prototype=Object.create(S);function _(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,i,a,c){var u=p(e[o],e,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==r(d)&&s.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}})}function P(e,n,r){var o=g;return function(i,s){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===i)throw s;return{value:t,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===w)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===g)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=p(e,n,r);if("normal"===u.type){if(o=r.done?y:m,u.arg===w)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function C(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),w;var i=p(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,w;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,w):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,w)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(s.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(r(e)+" is not iterable")}return b.prototype=T,a(A,"constructor",{value:T,configurable:!0}),a(T,"constructor",{value:b,configurable:!0}),b.displayName=h(T,d,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,T):(e.__proto__=T,h(e,d,"GeneratorFunction")),e.prototype=Object.create(A),e},n.awrap=function(e){return{__await:e}},_(x.prototype),h(x.prototype,l,(function(){return this})),n.AsyncIterator=x,n.async=function(e,t,r,o,i){void 0===i&&(i=Promise);var s=new x(f(e,t,r,o),i);return n.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},_(A),h(A,d,"Generator"),h(A,u,(function(){return this})),h(A,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=s.call(i,"catchLoc"),u=s.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,w):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),w}},n}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},641:(e,t,n)=>{"use strict";n.d(t,{pG:()=>ve,rg:()=>pe});var r={};function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.r(r),n.d(r,{AbortedDeferredError:()=>h.tH,Await:()=>d.jD,BrowserRouter:()=>F,Form:()=>G,HashRouter:()=>q,Link:()=>W,MemoryRouter:()=>d.fS,NavLink:()=>$,Navigate:()=>d.C5,NavigationType:()=>h.rc,Outlet:()=>d.sv,Route:()=>d.qh,Router:()=>d.Ix,RouterProvider:()=>D,Routes:()=>d.BV,ScrollRestoration:()=>z,UNSAFE_DataRouterContext:()=>d.sp,UNSAFE_DataRouterStateContext:()=>d.Rq,UNSAFE_ErrorResponseImpl:()=>h.VV,UNSAFE_FetchersContext:()=>R,UNSAFE_LocationContext:()=>d.yN,UNSAFE_NavigationContext:()=>d.jb,UNSAFE_RouteContext:()=>d.UX,UNSAFE_ViewTransitionContext:()=>C,UNSAFE_useRouteId:()=>d.$3,UNSAFE_useScrollRestoration:()=>ue,createBrowserRouter:()=>A,createHashRouter:()=>_,createMemoryRouter:()=>d.bg,createPath:()=>h.AO,createRoutesFromChildren:()=>d.AV,createRoutesFromElements:()=>d.Eu,createSearchParams:()=>y,defer:()=>h.v6,generatePath:()=>h.tW,isRouteErrorResponse:()=>h.pX,json:()=>h.Pq,matchPath:()=>h.B6,matchRoutes:()=>h.ue,parsePath:()=>h.Rr,redirect:()=>h.V2,redirectDocument:()=>h.Sk,renderMatches:()=>d.KT,replace:()=>h.HC,resolvePath:()=>h.o1,unstable_HistoryRouter:()=>V,unstable_usePrompt:()=>de,useActionData:()=>d.mP,useAsyncError:()=>d.oI,useAsyncValue:()=>d.J8,useBeforeUnload:()=>le,useBlocker:()=>d.KP,useFetcher:()=>ie,useFetchers:()=>se,useFormAction:()=>oe,useHref:()=>d.$P,useInRouterContext:()=>d.Ri,useLinkClickHandler:()=>Z,useLoaderData:()=>d.LG,useLocation:()=>d.zy,useMatch:()=>d.RQ,useMatches:()=>d.FE,useNavigate:()=>d.Zp,useNavigation:()=>d.cq,useNavigationType:()=>d.wQ,useOutlet:()=>d.P1,useOutletContext:()=>d.KC,useParams:()=>d.g,useResolvedPath:()=>d.x$,useRevalidator:()=>d.vL,useRouteError:()=>d.r5,useRouteLoaderData:()=>d.Ew,useRoutes:()=>d.Ye,useSearchParams:()=>ee,useSubmit:()=>re,useViewTransitionState:()=>he});n(756);var s=n(43),a=n.t(s,2),c=n(259),u=n(950),l=n.t(u,2),d=n(216),h=n(387);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}const g="get",m="application/x-www-form-urlencoded";function v(e){return null!=e&&"string"===typeof e.tagName}function y(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map((e=>[n,e])):[[n,r]])}),[]))}let w=null;const k=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function b(e){return null==e||k.has(e)?e:null}function T(e,t){let n,r,o,i,s;if(v(a=e)&&"form"===a.tagName.toLowerCase()){let s=e.getAttribute("action");r=s?(0,h.pb)(s,t):null,n=e.getAttribute("method")||g,o=b(e.getAttribute("enctype"))||m,i=new FormData(e)}else if(function(e){return v(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return v(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||s.getAttribute("action");if(r=a?(0,h.pb)(a,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||g,o=b(e.getAttribute("formenctype"))||b(s.getAttribute("enctype"))||m,i=new FormData(s,e),!function(){if(null===w)try{new FormData(document.createElement("form"),0),w=!1}catch(e){w=!0}return w}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?t+".":"";i.append(e+"x","0"),i.append(e+"y","0")}else t&&i.append(t,r)}}else{if(v(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=g,r=null,o=m,s=e}var a;return i&&"text/plain"===o&&(s=i,i=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:i,body:s}}const S=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],O=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],E=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(ye){}function A(e,t){return(0,h.aE)({basename:null==t?void 0:t.basename,future:f({},null==t?void 0:t.future,{v7_prependBasename:!0}),history:(0,h.zR)({window:null==t?void 0:t.window}),hydrationData:(null==t?void 0:t.hydrationData)||x(),routes:e,mapRouteProperties:d.wE,dataStrategy:null==t?void 0:t.dataStrategy,patchRoutesOnNavigation:null==t?void 0:t.patchRoutesOnNavigation,window:null==t?void 0:t.window}).initialize()}function _(e,t){return(0,h.aE)({basename:null==t?void 0:t.basename,future:f({},null==t?void 0:t.future,{v7_prependBasename:!0}),history:(0,h.TM)({window:null==t?void 0:t.window}),hydrationData:(null==t?void 0:t.hydrationData)||x(),routes:e,mapRouteProperties:d.wE,dataStrategy:null==t?void 0:t.dataStrategy,patchRoutesOnNavigation:null==t?void 0:t.patchRoutesOnNavigation,window:null==t?void 0:t.window}).initialize()}function x(){var e;let t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=f({},t,{errors:P(t.errors)})),t}function P(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,o]of t)if(o&&"RouteErrorResponse"===o.__type)n[r]=new h.VV(o.status,o.statusText,o.data,!0===o.internal);else if(o&&"Error"===o.__type){if(o.__subType){let e=window[o.__subType];if("function"===typeof e)try{let t=new e(o.message);t.stack="",n[r]=t}catch(ye){}}if(null==n[r]){let e=new Error(o.message);e.stack="",n[r]=e}}else n[r]=o;return n}const C=s.createContext({isTransitioning:!1});const R=s.createContext(new Map);const j=a.startTransition,I=l.flushSync,M=a.useId;function L(e){I?I(e):e()}class U{constructor(){this.status="pending",this.promise=new Promise(((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}}))}}function D(e){let{fallbackElement:t,router:n,future:r}=e,[o,i]=s.useState(n.state),[a,c]=s.useState(),[u,l]=s.useState({isTransitioning:!1}),[h,f]=s.useState(),[p,g]=s.useState(),[m,v]=s.useState(),y=s.useRef(new Map),{v7_startTransition:w}=r||{},k=s.useCallback((e=>{w?function(e){j?j(e):e()}(e):e()}),[w]),b=s.useCallback(((e,t)=>{let{deletedFetchers:r,flushSync:o,viewTransitionOpts:s}=t;e.fetchers.forEach(((e,t)=>{void 0!==e.data&&y.current.set(t,e.data)})),r.forEach((e=>y.current.delete(e)));let a=null==n.window||null==n.window.document||"function"!==typeof n.window.document.startViewTransition;if(s&&!a){if(o){L((()=>{p&&(h&&h.resolve(),p.skipTransition()),l({isTransitioning:!0,flushSync:!0,currentLocation:s.currentLocation,nextLocation:s.nextLocation})}));let t=n.window.document.startViewTransition((()=>{L((()=>i(e)))}));return t.finished.finally((()=>{L((()=>{f(void 0),g(void 0),c(void 0),l({isTransitioning:!1})}))})),void L((()=>g(t)))}p?(h&&h.resolve(),p.skipTransition(),v({state:e,currentLocation:s.currentLocation,nextLocation:s.nextLocation})):(c(e),l({isTransitioning:!0,flushSync:!1,currentLocation:s.currentLocation,nextLocation:s.nextLocation}))}else o?L((()=>i(e))):k((()=>i(e)))}),[n.window,p,h,y,k]);s.useLayoutEffect((()=>n.subscribe(b)),[n,b]),s.useEffect((()=>{u.isTransitioning&&!u.flushSync&&f(new U)}),[u]),s.useEffect((()=>{if(h&&a&&n.window){let e=a,t=h.promise,r=n.window.document.startViewTransition((async()=>{k((()=>i(e))),await t}));r.finished.finally((()=>{f(void 0),g(void 0),c(void 0),l({isTransitioning:!1})})),g(r)}}),[k,a,h,n.window]),s.useEffect((()=>{h&&a&&o.location.key===a.location.key&&h.resolve()}),[h,p,o.location,a]),s.useEffect((()=>{!u.isTransitioning&&m&&(c(m.state),l({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),v(void 0))}),[u.isTransitioning,m]),s.useEffect((()=>{}),[]);let T=s.useMemo((()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:e=>n.navigate(e),push:(e,t,r)=>n.navigate(e,{state:t,preventScrollReset:null==r?void 0:r.preventScrollReset}),replace:(e,t,r)=>n.navigate(e,{replace:!0,state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})})),[n]),S=n.basename||"/",O=s.useMemo((()=>({router:n,navigator:T,static:!1,basename:S})),[n,T,S]),E=s.useMemo((()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath})),[n.future.v7_relativeSplatPath]);return s.useEffect((()=>(0,d.V8)(r,n.future)),[r,n.future]),s.createElement(s.Fragment,null,s.createElement(d.sp.Provider,{value:O},s.createElement(d.Rq.Provider,{value:o},s.createElement(R.Provider,{value:y.current},s.createElement(C.Provider,{value:u},s.createElement(d.Ix,{basename:S,location:o.location,navigationType:o.historyAction,navigator:T,future:E},o.initialized||n.future.v7_partialHydration?s.createElement(N,{routes:n.routes,future:n.future,state:o}):t))))),null)}const N=s.memo(H);function H(e){let{routes:t,future:n,state:r}=e;return(0,d.ph)(t,void 0,r,n)}function F(e){let{basename:t,children:n,future:r,window:o}=e,i=s.useRef();null==i.current&&(i.current=(0,h.zR)({window:o,v5Compat:!0}));let a=i.current,[c,u]=s.useState({action:a.action,location:a.location}),{v7_startTransition:l}=r||{},f=s.useCallback((e=>{l&&j?j((()=>u(e))):u(e)}),[u,l]);return s.useLayoutEffect((()=>a.listen(f)),[a,f]),s.useEffect((()=>(0,d.V8)(r)),[r]),s.createElement(d.Ix,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}function q(e){let{basename:t,children:n,future:r,window:o}=e,i=s.useRef();null==i.current&&(i.current=(0,h.TM)({window:o,v5Compat:!0}));let a=i.current,[c,u]=s.useState({action:a.action,location:a.location}),{v7_startTransition:l}=r||{},f=s.useCallback((e=>{l&&j?j((()=>u(e))):u(e)}),[u,l]);return s.useLayoutEffect((()=>a.listen(f)),[a,f]),s.useEffect((()=>(0,d.V8)(r)),[r]),s.createElement(d.Ix,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}function V(e){let{basename:t,children:n,future:r,history:o}=e,[i,a]=s.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=s.useCallback((e=>{c&&j?j((()=>a(e))):a(e)}),[a,c]);return s.useLayoutEffect((()=>o.listen(u)),[o,u]),s.useEffect((()=>(0,d.V8)(r)),[r]),s.createElement(d.Ix,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:o,future:r})}const B="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,K=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,W=s.forwardRef((function(e,t){let n,{onClick:r,relative:o,reloadDocument:i,replace:a,state:c,target:u,to:l,preventScrollReset:g,viewTransition:m}=e,v=p(e,S),{basename:y}=s.useContext(d.jb),w=!1;if("string"===typeof l&&K.test(l)&&(n=l,B))try{let e=new URL(window.location.href),t=l.startsWith("//")?new URL(e.protocol+l):new URL(l),n=(0,h.pb)(t.pathname,y);t.origin===e.origin&&null!=n?l=n+t.search+t.hash:w=!0}catch(ye){}let k=(0,d.$P)(l,{relative:o}),b=Z(l,{replace:a,state:c,target:u,preventScrollReset:g,relative:o,viewTransition:m});return s.createElement("a",f({},v,{href:n||k,onClick:w||i?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:u}))}));const $=s.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:o="",end:i=!1,style:a,to:c,viewTransition:u,children:l}=e,g=p(e,O),m=(0,d.x$)(c,{relative:g.relative}),v=(0,d.zy)(),y=s.useContext(d.Rq),{navigator:w,basename:k}=s.useContext(d.jb),b=null!=y&&he(m)&&!0===u,T=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,S=v.pathname,E=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(S=S.toLowerCase(),E=E?E.toLowerCase():null,T=T.toLowerCase()),E&&k&&(E=(0,h.pb)(E,k)||E);const A="/"!==T&&T.endsWith("/")?T.length-1:T.length;let _,x=S===T||!i&&S.startsWith(T)&&"/"===S.charAt(A),P=null!=E&&(E===T||!i&&E.startsWith(T)&&"/"===E.charAt(T.length)),C={isActive:x,isPending:P,isTransitioning:b},R=x?n:void 0;_="function"===typeof o?o(C):[o,x?"active":null,P?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let j="function"===typeof a?a(C):a;return s.createElement(W,f({},g,{"aria-current":R,className:_,ref:t,style:j,to:c,viewTransition:u}),"function"===typeof l?l(C):l)}));const G=s.forwardRef(((e,t)=>{let{fetcherKey:n,navigate:r,reloadDocument:o,replace:i,state:a,method:c=g,action:u,onSubmit:l,relative:d,preventScrollReset:h,viewTransition:m}=e,v=p(e,E),y=re(),w=oe(u,{relative:d}),k="get"===c.toLowerCase()?"get":"post";return s.createElement("form",f({ref:t,method:k,action:w,onSubmit:o?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,o=(null==t?void 0:t.getAttribute("formmethod"))||c;y(t||e.currentTarget,{fetcherKey:n,method:o,navigate:r,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:m})}},v))}));function z(e){let{getKey:t,storageKey:n}=e;return ue({getKey:t,storageKey:n}),null}var J,Q;function Y(e){let t=s.useContext(d.sp);return t||(0,h.Oi)(!1),t}function X(e){let t=s.useContext(d.Rq);return t||(0,h.Oi)(!1),t}function Z(e,t){let{target:n,replace:r,state:o,preventScrollReset:i,relative:a,viewTransition:c}=void 0===t?{}:t,u=(0,d.Zp)(),l=(0,d.zy)(),f=(0,d.x$)(e,{relative:a});return s.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:(0,h.AO)(l)===(0,h.AO)(f);u(e,{replace:n,state:o,preventScrollReset:i,relative:a,viewTransition:c})}}),[l,u,f,r,o,n,e,i,a,c])}function ee(e){let t=s.useRef(y(e)),n=s.useRef(!1),r=(0,d.zy)(),o=s.useMemo((()=>function(e,t){let n=y(e);return t&&t.forEach(((e,r)=>{n.has(r)||t.getAll(r).forEach((e=>{n.append(r,e)}))})),n}(r.search,n.current?null:t.current)),[r.search]),i=(0,d.Zp)(),a=s.useCallback(((e,t)=>{const r=y("function"===typeof e?e(o):e);n.current=!0,i("?"+r,t)}),[i,o]);return[o,a]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(J||(J={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Q||(Q={}));let te=0,ne=()=>"__"+String(++te)+"__";function re(){let{router:e}=Y(J.UseSubmit),{basename:t}=s.useContext(d.jb),n=(0,d.$3)();return s.useCallback((function(r,o){void 0===o&&(o={}),function(){if("undefined"===typeof document)throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}();let{action:i,method:s,encType:a,formData:c,body:u}=T(r,t);if(!1===o.navigate){let t=o.fetcherKey||ne();e.fetch(t,n,o.action||i,{preventScrollReset:o.preventScrollReset,formData:c,body:u,formMethod:o.method||s,formEncType:o.encType||a,flushSync:o.flushSync})}else e.navigate(o.action||i,{preventScrollReset:o.preventScrollReset,formData:c,body:u,formMethod:o.method||s,formEncType:o.encType||a,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})}),[e,t,n])}function oe(e,t){let{relative:n}=void 0===t?{}:t,{basename:r}=s.useContext(d.jb),o=s.useContext(d.UX);o||(0,h.Oi)(!1);let[i]=o.matches.slice(-1),a=f({},(0,d.x$)(e||".",{relative:n})),c=(0,d.zy)();if(null==e){a.search=c.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some((e=>""===e))){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();a.search=n?"?"+n:""}}return e&&"."!==e||!i.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),"/"!==r&&(a.pathname="/"===a.pathname?r:(0,h.HS)([r,a.pathname])),(0,h.AO)(a)}function ie(e){var t;let{key:n}=void 0===e?{}:e,{router:r}=Y(J.UseFetcher),o=X(Q.UseFetcher),i=s.useContext(R),a=s.useContext(d.UX),c=null==(t=a.matches[a.matches.length-1])?void 0:t.route.id;i||(0,h.Oi)(!1),a||(0,h.Oi)(!1),null==c&&(0,h.Oi)(!1);let u=M?M():"",[l,p]=s.useState(n||u);n&&n!==l?p(n):l||p(ne()),s.useEffect((()=>(r.getFetcher(l),()=>{r.deleteFetcher(l)})),[r,l]);let g=s.useCallback(((e,t)=>{c||(0,h.Oi)(!1),r.fetch(l,c,e,t)}),[l,c,r]),m=re(),v=s.useCallback(((e,t)=>{m(e,f({},t,{navigate:!1,fetcherKey:l}))}),[l,m]),y=s.useMemo((()=>s.forwardRef(((e,t)=>s.createElement(G,f({},e,{navigate:!1,fetcherKey:l,ref:t}))))),[l]),w=o.fetchers.get(l)||h.HW,k=i.get(l);return s.useMemo((()=>f({Form:y,submit:v,load:g},w,{data:k})),[y,v,g,w,k])}function se(){let e=X(Q.UseFetchers);return Array.from(e.fetchers.entries()).map((e=>{let[t,n]=e;return f({},n,{key:t})}))}const ae="react-router-scroll-positions";let ce={};function ue(e){let{getKey:t,storageKey:n}=void 0===e?{}:e,{router:r}=Y(J.UseScrollRestoration),{restoreScrollPosition:o,preventScrollReset:i}=X(Q.UseScrollRestoration),{basename:a}=s.useContext(d.jb),c=(0,d.zy)(),u=(0,d.FE)(),l=(0,d.cq)();s.useEffect((()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"})),[]),function(e,t){let{capture:n}=t||{};s.useEffect((()=>{let t=null!=n?{capture:n}:void 0;return window.addEventListener("pagehide",e,t),()=>{window.removeEventListener("pagehide",e,t)}}),[e,n])}(s.useCallback((()=>{if("idle"===l.state){let e=(t?t(c,u):null)||c.key;ce[e]=window.scrollY}try{sessionStorage.setItem(n||ae,JSON.stringify(ce))}catch(e){}window.history.scrollRestoration="auto"}),[n,t,l.state,c,u])),"undefined"!==typeof document&&(s.useLayoutEffect((()=>{try{let e=sessionStorage.getItem(n||ae);e&&(ce=JSON.parse(e))}catch(ye){}}),[n]),s.useLayoutEffect((()=>{let e=t&&"/"!==a?(e,n)=>t(f({},e,{pathname:(0,h.pb)(e.pathname,a)||e.pathname}),n):t,n=null==r?void 0:r.enableScrollRestoration(ce,(()=>window.scrollY),e);return()=>n&&n()}),[r,a,t]),s.useLayoutEffect((()=>{if(!1!==o)if("number"!==typeof o){if(c.hash){let e=document.getElementById(decodeURIComponent(c.hash.slice(1)));if(e)return void e.scrollIntoView()}!0!==i&&window.scrollTo(0,0)}else window.scrollTo(0,o)}),[c,o,i]))}function le(e,t){let{capture:n}=t||{};s.useEffect((()=>{let t=null!=n?{capture:n}:void 0;return window.addEventListener("beforeunload",e,t),()=>{window.removeEventListener("beforeunload",e,t)}}),[e,n])}function de(e){let{when:t,message:n}=e,r=(0,d.KP)(t);s.useEffect((()=>{if("blocked"===r.state){window.confirm(n)?setTimeout(r.proceed,0):r.reset()}}),[r,n]),s.useEffect((()=>{"blocked"!==r.state||t||r.reset()}),[r,t])}function he(e,t){void 0===t&&(t={});let n=s.useContext(C);null==n&&(0,h.Oi)(!1);let{basename:r}=Y(J.useViewTransitionState),o=(0,d.x$)(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=(0,h.pb)(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=(0,h.pb)(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=(0,h.B6)(o.pathname,a)||null!=(0,h.B6)(o.pathname,i)}var fe=s.createContext(null),pe=function(){return s.useContext(fe)},ge=function(e){var t=e.error;return t.name&&t.message?s.createElement("p",null,t.name,": ",t.message):s.createElement("p",null,"Error: ",t.toString())};var me=!1,ve=function(e){var t=e.errorComponent,n=e.loadingElement,r=void 0===n?null:n,o=e.onAuthResume,a=pe(),c=a.oktaAuth,u=a.authState,l=i(s.useState(null),2),d=l[0],h=l[1],f=t||ge;s.useEffect((function(){var e=c.idx.isInteractionRequired||c.isInteractionRequired.bind(c);o&&e()?o():me||(c.handleLoginRedirect().catch((function(e){h(e)})),me=!0)}),[c]);var p=null===u||void 0===u?void 0:u.error,g=d||p;return g?s.createElement(f,{error:g}):r}},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,n)=>{var r=n(633)();e.exports=r;try{regeneratorRuntime=r}catch(o){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},801:e=>{"use strict";class t extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class n{static fn(e){return function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return new n(((t,n,o)=>{r.push(o),e(...r).then(t,n)}))}}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise(((t,n)=>{this._reject=n;const r=e=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(e)};return Object.defineProperties(r,{shouldReject:{get:()=>this._rejectOnCancel,set:e=>{this._rejectOnCancel=e}}}),e((e=>{this._isCanceled&&r.shouldReject||(this._isPending=!1,t(e))}),(e=>{this._isPending=!1,n(e)}),r)}))}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(const e of this._cancelHandlers)e()}catch(n){return void this._reject(n)}this._rejectOnCancel&&this._reject(new t(e))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(n.prototype,Promise.prototype),e.exports=n,e.exports.CancelError=t},841:e=>{function t(){}t.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function o(){r.off(e,o),t.apply(n,arguments)}return o._=t,this.on(e,o,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,s=r.length;i<s;i++)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}},e.exports=t}}]);
//# sourceMappingURL=22.bcb29eec.chunk.js.map