"use strict";(self.webpackChunkerp_product_hub=self.webpackChunkerp_product_hub||[]).push([[6],{4174:(e,l,t)=>{t.d(l,{A:()=>r});t(65043);var i=t(8417),o=t(11906),n=t(81e3),a=t(60446),d=t.n(a),s=t(92960);const r=e=>{const{setOpenView:l,setView:t,onChange:a,value:r,...u}=e;return(0,s.jsxs)(n.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,s.jsx)(i.l,{...e}),(0,s.jsx)(o.A,{onClick:()=>{const e=d()();a(e)},variant:"outlined",size:"small",style:{margin:"8px",position:"absolute",bottom:"2.5px",left:"2.5px"},children:"Today"})]})}},41484:()=>{},49476:(e,l,t)=>{t.d(l,{A:()=>d});t(65043);var i=t(72126),o=t(81e3),n=t(77739),a=t(92960);const d=function(e){let{title:l}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(n.A,{title:l,children:(0,a.jsxs)(o.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,width:"100%",zIndex:9},children:[(0,a.jsx)(i.A,{sx:{fontSize:60,color:"#1976d2",animation:"spin 1.5s linear infinite",width:"25px",height:"25px",position:"absolute"}}),(0,a.jsx)("style",{children:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "})]})})})}},78351:(e,l,t)=>{t.r(l),t.d(l,{default:()=>Je});var i=t(65043),o=t(34535),n=t(81e3),a=t(85865),d=t(68903),s=t(11906),r=t(29013),u=t(24056),v=t(83462),c=t(26600),p=t(35316),m=t(98533),h=t(29347),y=t(21803),x=t.n(y),f=t(1009),g=t(93291),b=t(73216),w=t(66578),j=t(5137),P=t(31026),A=t(26814),O=t(77115),E=t(10039),R=t(72221),C=t(37970),T=t(79650),k=t(63336),S=t(71806),D=t(84882),I=t(28076),M=t(73460),N=t(92960);const L=e=>{var l;let t="grey";switch(null===e||void 0===e||null===(l=e.status)||void 0===l?void 0:l.toLowerCase()){case"success":t="limegreen";break;case"inprogress":t="orange";break;case"failed":t="red";break;default:t="grey"}return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)("span",{title:(i=null===e||void 0===e?void 0:e.status,i&&i[0].toUpperCase()+i.slice(1)||""),style:{width:"10px",height:"10px",backgroundColor:t,borderRadius:"50%",display:"block",margin:"auto"}})});var i};var F=t(77214),B=t(15795),_=t(74605),V=t(51962),H=t(57972),$=t(14256),U=t(63516),Y=t(80899);const G=(0,o.Ay)({spanRed:{color:"#FF3D57"}}),W=(0,i.forwardRef)(((e,l)=>{const{selectedRowData:t,selectedRowFormdata:o,responseData:n,masterData:a,selectedRowIndex:s}=(0,j.d4)((e=>{var l,t,i,o,n;return{selectedRowData:null===e||void 0===e||null===(l=e.mcoDetails)||void 0===l?void 0:l.selectedRowData,selectedRowFormdata:null===e||void 0===e||null===(t=e.mcoDetails)||void 0===t?void 0:t.selectedRowFormdata,responseData:null===e||void 0===e||null===(i=e.mcoDetails)||void 0===i?void 0:i.responseData,masterData:null===e||void 0===e||null===(o=e.mcoDetails)||void 0===o?void 0:o.masterData,selectedRowIndex:null===e||void 0===e||null===(n=e.mcoDetails)||void 0===n?void 0:n.selectedRowIndex}}),j.bN),[r,u]=(0,i.useState)({}),[v,c]=(0,i.useState)({}),p=G();(0,i.useEffect)((()=>{let e={},l={};Object.keys(o).length&&(null===o||void 0===o||o.forEach((i=>{const o=null===i||void 0===i?void 0:i.name;if(Object.keys(t).includes(null===i||void 0===i?void 0:i.name)||null!==t&&void 0!==t&&t.attributeGroupData&&Object.keys(null===t||void 0===t?void 0:t.attributeGroupData).includes(null===i||void 0===i?void 0:i.name))return!0;"Y"===(null===i||void 0===i?void 0:i.mandatory)&&(e[o]=Y.Yj().required(o+" required!")),""!==(null===i||void 0===i?void 0:i.defaultValues)?l[o]=null===i||void 0===i?void 0:i.defaultValues:l[o]=""}))),c(e),u(l)}),[t,o]);const m=Y.Ik().shape(v);return(0,N.jsx)(U.l1,{initialValues:r,onSubmit:l=>(null===e||void 0===e||e.saveMaterialDetails(l),!1),enableReinitialize:!0,validationSchema:m,validateOnChange:!1,validateOnBlur:!1,children:function(e){let{values:r,errors:u,touched:v,handleChange:c,handleBlur:m,handleSubmit:h,isSubmitting:y,setSubmitting:f,setFieldValue:g,validateForm:b,isValid:w,submitForm:j}=e;return(0,i.useEffect)((()=>{setTimeout((async()=>{var e,l;const i=[],n=Object.keys(o).length&&(null===o||void 0===o?void 0:o.map(((e,l)=>e.name)));var d,r,u,v;null!==a&&void 0!==a&&null!==(e=a.mcoaffectedItem)&&void 0!==e&&e.length&&null!==a&&void 0!==a&&null!==(l=a.mcoaffectedItem[s])&&void 0!==l&&l.materialType&&null!==s&&n&&Object.keys(null===a||void 0===a||null===(d=a.mcoaffectedItem[s])||void 0===d||null===(r=d.materialType)||void 0===r?void 0:r.attributeMap).forEach((e=>{var l,d;const r=e;if(null!==a&&void 0!==a&&null!==(l=a.mcoaffectedItem[s])&&void 0!==l&&null!==(d=l.materialType)&&void 0!==d&&d.attributeMap[e]&&!i.includes(r)&&n.includes(r)&&(i.push(r),Object.keys(o).length)){var u,v;if(((null===o||void 0===o?void 0:o.filter(((e,l)=>(null===e||void 0===e?void 0:e.name)===r&&(Object.keys(t).includes(null===e||void 0===e?void 0:e.name)||(null===t||void 0===t?void 0:t.attributeGroupData)&&Object.keys(null===t||void 0===t?void 0:t.attributeGroupData).includes(null===e||void 0===e?void 0:e.name)))))||[]).length)return!0;const l=null===a||void 0===a||null===(u=a.mcoaffectedItem[s])||void 0===u||null===(v=u.materialType)||void 0===v?void 0:v.attributeMap[e];if(Array.isArray(l))return!0;g(r,l)}}));t&&Object.keys(t).length&&((null===t||void 0===t||null===(u=t.materialType)||void 0===u?void 0:u.attributeMap)&&Object.keys(null===t||void 0===t||null===(v=t.materialType)||void 0===v?void 0:v.attributeMap).forEach((e=>{var l;const a=e;if(null!==t&&void 0!==t&&null!==(l=t.materialType)&&void 0!==l&&l.attributeMap[e]&&n.includes(a)&&(i.push(a),Object.keys(o).length)){var d;if(((null===o||void 0===o?void 0:o.filter(((e,l)=>(null===e||void 0===e?void 0:e.name)===a&&(Object.keys(t).includes(null===e||void 0===e?void 0:e.name)||(null===t||void 0===t?void 0:t.attributeGroupData)&&Object.keys(null===t||void 0===t?void 0:t.attributeGroupData).includes(null===e||void 0===e?void 0:e.name)))))||[]).length)return!0;const l=null===t||void 0===t||null===(d=t.materialType)||void 0===d?void 0:d.attributeMap[e];if(Array.isArray(l))return!0;g(a,l)}})))}),500)}),[g]),(0,i.useImperativeHandle)(l,(()=>({callsubmitForm:()=>(j(),w)}))),(0,N.jsx)("form",{onSubmit:h,children:(0,N.jsx)("div",{children:Object.keys(o).length?null===o||void 0===o?void 0:o.map(((e,l)=>{var i;const o=null===e||void 0===e?void 0:e.name;if("N"===(null===n||void 0===n?void 0:n.isMaster)&&["Copy From"].includes(o))return!0;if(Object.keys(t).includes(o)||null!==t&&void 0!==t&&t.attributeGroupData&&Object.keys(null===t||void 0===t?void 0:t.attributeGroupData).includes(o))return!0;let s;s=!!(a&&Object.keys(a).length&&null!==a&&void 0!==a&&a.plantName.includes("SAP"))&&(Object.keys(a).length&&"N"===(null===a||void 0===a?void 0:a.master)&&"Y"===(null===e||void 0===e?void 0:e.material_master));const v=r[o]||(null===e||void 0===e?void 0:e.defaultValues);return(0,N.jsx)("div",{className:"attribute-section",children:(0,N.jsxs)(d.Ay,{container:!0,spacing:3,alignItems:"center",children:[(0,N.jsx)(d.Ay,{item:!0,md:4,sm:6,xs:12,className:"font-medium",children:(0,N.jsxs)("span",{children:[null===e||void 0===e?void 0:e.name," ","Y"===(null===e||void 0===e?void 0:e.mandatory)?(0,N.jsx)("span",{className:p.spanRed,children:"*"}):""]})}),(0,N.jsxs)(d.Ay,{item:!0,md:8,sm:6,xs:12,children:["text"===(null===e||void 0===e?void 0:e.inputType)&&(0,N.jsx)(B.A,{className:"mb-4 w-full ",color:null!==u&&void 0!==u&&u[o]?"warning":"",fullWidth:!0,size:"small",variant:"outlined",id:o,name:o,value:v,onChange:e=>{g(o,e.target.value)},type:"text",disabled:s,style:{marginBottom:"10px"}}),"select"===(null===e||void 0===e?void 0:e.inputType)&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{children:r[o]}),(0,N.jsxs)(R.A,{disabled:s,value:v,onChange:e=>{g(o,e.target.value)},displayEmpty:!0,renderValue:l=>l?(null===e||void 0===e?void 0:e.values.length)&&(null===e||void 0===e?void 0:e.values[0][l]):(0,N.jsx)("em",{children:"--Select--"}),style:{height:"37.13px",marginBottom:"1rem",width:"100%"},children:[(0,N.jsx)(C.A,{id:"",children:"Select"}),(null===e||void 0===e?void 0:e.values.length)&&Object.keys(null===e||void 0===e?void 0:e.values[0]).map((l=>(0,N.jsx)(C.A,{value:l,children:null===e||void 0===e?void 0:e.values[0][l]},x().generate())))]})]}),"checkbox"===(null===e||void 0===e?void 0:e.inputType)&&(0,N.jsx)(N.Fragment,{children:null===e||void 0===e?void 0:e.values.map(((e,l)=>(0,N.jsx)("div",{children:(0,N.jsx)(_.A,{value:e,label:e,labelPlacement:"end",control:(0,N.jsx)(V.A,{})})},x().generate())))}),"radio"===(null===e||void 0===e?void 0:e.inputType)&&(0,N.jsx)(H.A,{row:!0,name:o,sx:{mb:2},value:null!==(i=r[o])&&void 0!==i?i:"",onChange:e=>{g(o,e.target.value)},style:{display:"flex"},children:null===e||void 0===e?void 0:e.values.map(((e,l)=>(0,N.jsx)("div",{children:(0,N.jsx)(_.A,{value:e,label:e,labelPlacement:"end",control:(0,N.jsx)($.A,{color:"secondary"})})},x().generate())))}),(0,N.jsx)("div",{style:{textAlign:"left",color:"red",position:"relative",top:"-15px"},children:null===u||void 0===u?void 0:u[o]})]})]})})})):(0,N.jsx)("div",{children:"No attributes found."})})})}})})),q=()=>{var e;const{selectedRowData:l,selectedRowFormdata:t,responseData:o,showMaterialForm:n}=(0,j.d4)((e=>{var l,t,i,o;return{selectedRowData:null===e||void 0===e||null===(l=e.mcoDetails)||void 0===l?void 0:l.selectedRowData,selectedRowFormdata:null===e||void 0===e||null===(t=e.mcoDetails)||void 0===t?void 0:t.selectedRowFormdata,responseData:null===e||void 0===e||null===(i=e.mcoDetails)||void 0===i?void 0:i.responseData,showMaterialForm:null===e||void 0===e||null===(o=e.mcoDetails)||void 0===o?void 0:o.showMaterialForm}}),j.bN),a=(0,j.wA)(),d=(0,i.useRef)({});return(0,N.jsxs)(v.A,{open:n,onClose:()=>{a((0,A.RY)({showMaterialForm:!1}))},scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",maxWidth:"md",fullWidth:!0,children:[(0,N.jsx)(c.A,{id:"scroll-dialog-title",children:"Material Details"}),(0,N.jsx)(p.A,{dividers:!0,children:(0,N.jsx)(m.A,{id:"scroll-dialog-description",tabIndex:-1,children:(0,N.jsx)(W,{ref:d,saveMaterialDetails:async e=>{const t=await(async()=>{var e,l;const t=P.i.getState(),i=(null===t||void 0===t||null===(e=t.mcoDetails)||void 0===e?void 0:e.responseData)||{},o=(null===t||void 0===t||null===(l=t.mcoDetails)||void 0===l?void 0:l.affectedPartsData)||[];return null!==o&&void 0!==o&&o.length?o||[]:(null===i||void 0===i?void 0:i.mcoaffectedItem)||[]})(),i=[...t],o=i.findIndex(((e,t)=>(null===l||void 0===l?void 0:l.id)===e.id));i[o].materialType={name:i[o].materialType.name,attributeMap:e},a((0,A.RY)({affectedPartsData:i,isMaterialFormEdited:!0,showMaterialForm:!1}))}})})}),(0,N.jsxs)(h.A,{children:[(0,N.jsx)(s.A,{onClick:()=>{a((0,A.RY)({showMaterialForm:!1}))},children:"Cancel"}),(0,N.jsx)(s.A,{onClick:()=>{d.current.callsubmitForm()},disabled:["Review","Release","Implemented"].includes(null===o||void 0===o||null===(e=o.mcoaffectedItem)||void 0===e?void 0:e.mcostate)||!Object.keys(t||{}).length,children:"Save"})]})]})};var z=t(30761);const K=[{label:"Yes",value:!0},{label:"No",value:!1}],J=[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],Q=[{label:"Make",value:"make"},{label:"Buy",value:"buy"}];function X(e){return e&&""!==e?e:"--"}const Z=[{width:50,label:"Old\nRev",dataKey:"oldRevision",textAlign:"center"},{width:50,label:"New\nRev",dataKey:"newRevision",textAlign:"center"},{width:"20ch",label:"Type",dataKey:"type"},{width:"25ch",label:"Part Name",dataKey:"name"},{width:"30ch",label:"Description",dataKey:"description",textAlign:"left"},{width:"30ch",label:"Material Type Template",dataKey:"materialTypeTemplate",textAlign:"center"},{width:90,label:"Make-Buy",dataKey:"makeOrBuy",textAlign:"center"},{width:80,label:"Export\nStatus",dataKey:"ErpStatus",textAlign:"center"},{width:80,label:"Export \nTo ERP",dataKey:"exportToERP",textAlign:"center"},{width:80,label:"Sequence",dataKey:"currentSequence",textAlign:"center"},{width:100,label:"Item Status",dataKey:"ERPStatus",textAlign:"left"},{width:120,label:"Actions",dataKey:"actions",textAlign:"center"}],ee={};Z.forEach((e=>{ee[e.dataKey]=e.width}));const le=i.memo((e=>{var l,t,o,n,a,d,r,u,v,c,p,m,h,y,x,f,g,b,w,P,A,O,T,k,S,D,I,M,F,B;let{row:_,rowIndex:V,dropdownOpts:H,handleIconClick:$}=e;const{responseData:U,masterData:Y,materialData:G,mrDetails:W,eachTemplateOptions:q,affectedPartsData:Z,parentMCODetails:le}=(0,j.d4)((e=>{var l,t,i,o,n,a,d;return{responseData:null===(l=e.mcoDetails)||void 0===l?void 0:l.responseData,masterData:null===(t=e.mcoDetails)||void 0===t?void 0:t.masterData,materialData:null===(i=e.mcoDetails)||void 0===i?void 0:i.materialData,mrDetails:null===(o=e.mcoDetails)||void 0===o?void 0:o.mrDetails,eachTemplateOptions:null===(n=e.mcoDetails)||void 0===n?void 0:n.eachTemplateOptions,affectedPartsData:null===(a=e.mcoDetails)||void 0===a?void 0:a.affectedPartsData,parentMCODetails:null===(d=e.mcoDetails)||void 0===d?void 0:d.parentMCODetails}}),j.bN),[te,ie]=(0,i.useState)(_||{});let oe=(0,z.u_)(te),ne=!1;Y&&Object.keys(Y).length&&null!==Y&&void 0!==Y&&Y.plantName.includes("SAP")&&(ne=Object.keys(Y).length&&"N"===(null===Y||void 0===Y?void 0:Y.master)),["Review","Release","Implemented","Complete"].includes(null===U||void 0===U||null===(l=U.mcoPropeties)||void 0===l?void 0:l.mcostate)&&(ne=!0),Object.keys(oe||{}).length&&(null===(t=oe)||void 0===t?void 0:t.desc)===(null===te||void 0===te||null===(o=te.attributeGroupData)||void 0===o?void 0:o.ERPItemTypeTemplate)&&(ne=!0);let ae=(null===U||void 0===U?void 0:U.itemERPStatus)&&(null===U||void 0===U?void 0:U.itemERPStatus.filter((e=>(null===e||void 0===e?void 0:e.Item_Name)===(null===te||void 0===te?void 0:te.name))));ae=null!==(n=ae)&&void 0!==n&&n.length?null===(a=ae[0])||void 0===a?void 0:a.status:"Not yet processed!";const de=(0,z.m1)(oe);let se=(null===q||void 0===q?void 0:q[null===te||void 0===te?void 0:te.name])||[];null!==(d=Object.keys(H))&&void 0!==d&&d.length&&null!==(r=Object.keys(H))&&void 0!==r&&r.includes(null===te||void 0===te?void 0:te.name)&&(se=H[null===te||void 0===te?void 0:te.name]);const re=(null===(u=se)||void 0===u?void 0:u.find((e=>(null===e||void 0===e?void 0:e.id)===oe.id)))||{};if((null===(v=Object.keys(re))||void 0===v||!v.length)&&null!==(c=Object.keys(oe))&&void 0!==c&&c.length){let e=null===G||void 0===G?void 0:G.find((e=>{var l;return(null===(l=oe)||void 0===l?void 0:l.Name)===e.templateName}));e&&(se=[...se,e])}const ue=null!==(p=Object.keys(W))&&void 0!==p&&p.length&&null!==W&&void 0!==W&&null!==(m=W.activeMR)&&void 0!==m&&m.hasOwnProperty(null===te||void 0===te?void 0:te.name)&&null!==W&&void 0!==W&&null!==(h=W.activeMR[null===te||void 0===te?void 0:te.name])&&void 0!==h&&h.length?null===W||void 0===W?void 0:W.activeMR[null===te||void 0===te?void 0:te.name][0]:{},ve=null!==(y=Object.keys(W))&&void 0!==y&&y.length&&null!==W&&void 0!==W&&null!==(x=W.activeMR)&&void 0!==x&&x.hasOwnProperty(null===te||void 0===te?void 0:te.name)&&null!==W&&void 0!==W&&null!==(f=W.previousSeqMR[null===te||void 0===te?void 0:te.name])&&void 0!==f&&f.length?null===W||void 0===W?void 0:W.previousSeqMR[null===te||void 0===te?void 0:te.name][0]:{},ce=(null===(g=se)||void 0===g?void 0:g.find((e=>{var l;return(null===e||void 0===e?void 0:e.id)===(null===(l=oe)||void 0===l?void 0:l.id)})))||{};if(null===(b=Object.keys(ce))||void 0===b||!b.length){let e=null===G||void 0===G?void 0:G.find((e=>(null===ue||void 0===ue?void 0:ue.template)===e.templateName));!e||null!==te&&void 0!==te&&te.isTemplateValueChange||(se=[...se,e],oe=e)}let pe={};if(null!==(w=Object.keys(ve||{}))&&void 0!==w&&w.length){var me;let e=(null===G||void 0===G?void 0:G.find(((e,l)=>(null===e||void 0===e?void 0:e.templateName)===(null===ve||void 0===ve?void 0:ve.template))))||{};null!==(me=Object.keys(e))&&void 0!==me&&me.length&&(se.push(e),null!==te&&void 0!==te&&te.isTemplateValueChange||(pe=e))}if((null===(P=Object.keys(oe||{}))||void 0===P||!P.length)&&(null===te||void 0===te||!te.isTemplateValueChange)){var he,ye,xe,fe;const e=(null===(he=se)||void 0===he?void 0:he.find((e=>(null===e||void 0===e?void 0:e.templateName)===(null===ve||void 0===ve?void 0:ve.template))))||{};null!==(ye=Object.keys(e))&&void 0!==ye&&ye.length||null===(xe=Object.keys(pe))||void 0===xe||!xe.length?null!==(fe=Object.keys(e))&&void 0!==fe&&fe.length&&(oe=e):oe=pe}let ge=null===te||void 0===te||null===(A=te.makeOrBuy)||void 0===A?void 0:A.toLowerCase(),be=null===te||void 0===te?void 0:te.exportToERP,we=null===te||void 0===te||null===(O=te.itemStatus)||void 0===O?void 0:O.toLowerCase();var je;(ge||null!==te&&void 0!==te&&te.isMakeOrBuyValueChange||(ge=null===ue||void 0===ue?void 0:ue.makeOrBuy),we||null!==te&&void 0!==te&&te.isItemStatusValueChange)||(we=null===ue||void 0===ue||null===(je=ue.ERPStatus)||void 0===je?void 0:je.toLowerCase());if(null!==(T=se)&&void 0!==T&&T.length){let e=[...se].filter(((e,l,t)=>t.indexOf(e)===l));se=e}let Pe=!1;if(null!==(k=Object.keys(le))&&void 0!==k&&k.length){var Ae,Oe,Ee;let e=(null===le||void 0===le||null===(Ae=le.mcoaffectedItem)||void 0===Ae?void 0:Ae.find((e=>(null===e||void 0===e?void 0:e.name)===(null===_||void 0===_?void 0:_.name))))||{};Object.keys(e||{}).length&&(null===e||void 0===e||null===(Oe=e.materialType)||void 0===Oe||null===(Ee=Oe.name)||void 0===Ee?void 0:Ee.length)>0&&(Pe=!0)}return null!==U&&void 0!==U&&null!==(S=U.mcoProperties)&&void 0!==S&&null!==(D=S.name)&&void 0!==D&&D.includes("MVO")&&(Pe=!0),(0,i.useEffect)((()=>{(async()=>{let e=_;null!==Z&&void 0!==Z&&Z.length&&(e=null===Z||void 0===Z?void 0:Z.find((e=>e.id===(null===_||void 0===_?void 0:_.id)))),ie(e)})()}),[_]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.A,{style:{textAlign:"center",width:null===ee||void 0===ee?void 0:ee.oldRevision,paddingLeft:"20px"},children:X(null===te||void 0===te?void 0:te.oldRevision)}),(0,N.jsx)(E.A,{style:{textAlign:"center",width:null===ee||void 0===ee?void 0:ee.newRevision},children:X(null===te||void 0===te?void 0:te.newRevision)}),(0,N.jsx)(E.A,{style:{textAlign:"left",width:null===ee||void 0===ee?void 0:ee.type},children:X(null===te||void 0===te?void 0:te.displayType)}),(0,N.jsx)(E.A,{style:{textAlign:"left",minWidth:null===ee||void 0===ee?void 0:ee.name,maxWidth:"340px"},children:X(null===te||void 0===te?void 0:te.name)}),(0,N.jsx)(E.A,{style:{textAlign:"left",width:null===ee||void 0===ee?void 0:ee.description},children:X(null===te||void 0===te?void 0:te.description)}),(0,N.jsxs)(E.A,{style:{textAlign:"center",width:null===ee||void 0===ee?void 0:ee.materialTypeTemplate},children:[(0,N.jsx)("span",{children:(0,N.jsxs)(R.A,{disabled:ne,className:"form-control customSelectCss",value:(null===(I=oe)||void 0===I?void 0:I.id)||"",onChange:e=>{(0,z.WH)(e.target.value,null===_||void 0===_?void 0:_.id,"template")},style:{width:"100%"},displayEmpty:!0,title:de||null,renderValue:e=>{var l;const t=null===(l=se)||void 0===l?void 0:l.find((l=>l.id===e));return null!==t&&void 0!==t&&t.templateName?t.templateName:"Unassigned"},children:[(0,N.jsx)(C.A,{value:"",children:"Unassigned"}),null===(M=se)||void 0===M?void 0:M.map(((e,l)=>{const t="dpKey"+l;return(0,N.jsx)(C.A,{value:e.id,children:e.templateName?e.templateName:""},t)}))]})}),null!==(F=se)&&void 0!==F&&F.length?(0,N.jsx)(N.Fragment,{}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("br",{}),(0,N.jsx)("span",{style:{color:"red"},children:Pe?"Template not available!":"MVO is required to be set first"})]})]}),(0,N.jsx)(E.A,{style:{textAlign:"center",width:null===ee||void 0===ee?void 0:ee.makeBuy},children:(0,N.jsx)(R.A,{disabled:!0,className:"form-control customSelectCss",value:ge,onChange:e=>(0,z.WH)(e.target.value,null===_||void 0===_?void 0:_.id,"makeOrBuy"),style:{width:"100%"},displayEmpty:!0,renderValue:e=>{const l=null===Q||void 0===Q?void 0:Q.find((l=>l.value===e));return null===l||void 0===l?void 0:l.label},children:null===Q||void 0===Q?void 0:Q.map(((e,l)=>{const t="dpKeyMakeBuy"+l;return(0,N.jsx)(C.A,{value:e.value,children:e.label},t)}))})}),(0,N.jsx)(E.A,{style:{textAlign:"center",width:null===ee||void 0===ee?void 0:ee.exportStatus},children:(0,N.jsx)(L,{colorCode:"red",status:ae})}),(0,N.jsx)(E.A,{style:{textAlign:"center",width:null===ee||void 0===ee?void 0:ee.exportToERP},children:(0,N.jsx)(R.A,{disabled:!0,className:"form-control customSelectCss",value:be,onChange:e=>(0,z.WH)(e.target.value,null===_||void 0===_?void 0:_.id,"exportToERP"),style:{width:"100%"},displayEmpty:!0,renderValue:e=>{const l=null===K||void 0===K?void 0:K.find((l=>l.value===e));return null===l||void 0===l?void 0:l.label},children:null===K||void 0===K?void 0:K.map(((e,l)=>{const t="dpKey2"+l;return(0,N.jsx)(C.A,{value:e.value,children:e.label},t)}))})}),(0,N.jsx)(E.A,{style:{textAlign:"center",width:null===ee||void 0===ee?void 0:ee.currentSequence},children:X(null===te||void 0===te?void 0:te.currentSequence)}),(0,N.jsx)(E.A,{style:{textAlign:"center",width:null===ee||void 0===ee?void 0:ee.itemStatus},children:(0,N.jsx)(R.A,{disabled:!0,className:"form-control customSelectCss",value:we,onChange:e=>(0,z.WH)(e.target.value,null===_||void 0===_?void 0:_.id,"itemStatus"),style:{width:"100%"},displayEmpty:!0,renderValue:e=>{const l=null===J||void 0===J?void 0:J.find((l=>l.value===e));return null===l||void 0===l?void 0:l.label},children:null===J||void 0===J?void 0:J.map(((e,l)=>{const t="dpKey3"+l;return(0,N.jsx)(C.A,{value:e.value,children:e.label},t)}))})}),null!==U&&void 0!==U&&null!==(B=U.mcoPropeties)&&void 0!==B&&B.organizationId.includes("SAP")?(0,N.jsx)(E.A,{style:{textAlign:"center",width:null===ee||void 0===ee?void 0:ee.actions},children:(0,N.jsx)(s.A,{onClick:async e=>{await $(te,G,"form",U)},children:(0,N.jsx)("span",{role:"img","aria-label":"Open Form",children:"\ud83d\udcdd"})})}):null]})}),((e,l)=>e.row===l.row&&e.rowIndex===l.rowIndex)),te=i.memo((e=>{const{responseData:l}=(0,j.d4)((e=>{var l;return{responseData:null===(l=e.mcoDetails)||void 0===l?void 0:l.responseData}}),j.bN),[t,o]=(0,i.useState)({}),[n,a]=(0,i.useState)({key:"name",direction:"asc"}),[d,s]=(0,i.useState)((null===l||void 0===l?void 0:l.mcoaffectedItem)||[]),r=(0,i.useRef)(null),u=(0,j.wA)(),v=localStorage.getItem("instance"),c={Scroller:i.forwardRef(((e,l)=>(0,N.jsx)(T.A,{component:k.A,...e,ref:l,className:"affTableContainer"}))),Table:e=>(0,N.jsx)(S.A,{...e,sx:{borderCollapse:"separate"}}),TableHead:D.A,TableRow:e=>{let{item:l,...t}=e;return(0,N.jsx)(I.A,{...t})},TableBody:i.forwardRef(((e,l)=>(0,N.jsx)(M.A,{...e,ref:l})))};return(0,i.useEffect)((()=>{setTimeout((()=>{(async()=>{var e;if(null!==(e=window)&&void 0!==e&&e.ExternalClass){const e=new window.ExternalClass({affectedItemsInfo:l}),t=await e.getDropdownOptions();o(t)}else console.error("ExternalClass class is not defined.")})()}),100)}),[]),(0,i.useEffect)((()=>{const e=(0,z.sN)(n);s(e),u((0,A.RY)({exportAffectedPartsData:e}))}),[n,l]),(0,N.jsxs)("div",{className:"partsTableSty",children:[d.length?(0,N.jsx)(k.A,{className:"height100Per",children:(0,N.jsx)(F.Sd,{ref:r,data:d,components:c,fixedHeaderContent:function(){return(0,N.jsx)(I.A,{children:Z.filter((e=>{var t,i;return"actions"!==e.dataKey&&"onPrem"===v?null===l||void 0===l||null===(t=l.mcoPropeties)||void 0===t?void 0:t.organizationId.includes("ORACLE"):null===l||void 0===l||null===(i=l.mcoPropeties)||void 0===i?void 0:i.organizationId.includes("SAP")})).map((e=>{var t;let i=e.label;"materialTypeTemplate"===(null===e||void 0===e?void 0:e.dataKey)&&null!==l&&void 0!==l&&null!==(t=l.mcoPropeties)&&void 0!==t&&t.organizationId.includes("SAP")?i="Material Type Template":"materialTypeTemplate"===(null===e||void 0===e?void 0:e.dataKey)&&(i="Template");let o={textAlign:e.textAlign,width:e.width,paddingLeft:"oldRevision"===(null===e||void 0===e?void 0:e.dataKey)?"20px":""};return"name"===e.dataKey&&(o={textAlign:e.textAlign,width:e.width}),(0,N.jsxs)(E.A,{style:o,sx:{backgroundColor:"background.paper",cursor:"pointer"},onClick:()=>{return l=e.dataKey,void a((e=>({key:l,direction:"asc"===e.direction?"desc":"asc"})));var l},children:[i,n.key===e.dataKey?(0,N.jsx)("span",{children:"asc"===n.direction?" \u2191":" \u2193"}):null]},e.dataKey)}))})},itemContent:(l,i)=>(0,N.jsx)(le,{row:i,rowIndex:l,dropdownOpts:t,handleIconClick:null===e||void 0===e?void 0:e.handleIconClick})})}):(0,N.jsx)("div",{style:{textAlign:"center"},children:"No parts available!"}),(0,N.jsx)(q,{})]})})),ie=te;var oe=t(88911),ne=t(87450),ae=t(25078),de=t(88446),se=t(49476);const re="Promote >>",ue="<< Demote";function ve(e){var l,t,o,n,a,s;const{responseData:r,lifeCycleData:u}=(0,j.d4)((e=>{var l;return{responseData:null===(l=e.mcoDetails)||void 0===l?void 0:l.responseData,lifeCycleData:e.mcoDetails.lifeCycleData}}),j.bN),{stepData:v,lifeCycleStep:c}=e,[p,m]=(0,i.useState)("Create");let h=[];return h="SaaS"===localStorage.getItem("instance")?["Prepare","In Work","In Approval","Approved","Complete"]:["Create","Review","Release","Implemented"],(0,i.useEffect)((()=>{m(v)}),[v]),(0,N.jsx)(d.Ay,{item:!0,md:12,sm:12,xs:12,className:"font-medium",children:(0,N.jsx)("div",{className:"",style:{margin:"auto auto 25px auto",textAlign:"center",width:"75%",position:"relative"},children:(0,N.jsxs)(oe.A,{sx:{width:"100%"},spacing:4,children:["review"!==(null===r||void 0===r||null===(l=r.mcoPropeties)||void 0===l||null===(t=l.mcostate)||void 0===t?void 0:t.toLowerCase())||"inprogress"!==(null===u||void 0===u||null===(o=u[null===r||void 0===r||null===(n=r.mcoPropeties)||void 0===n?void 0:n.name])||void 0===o?void 0:o.promoted)&&!["Item","BOM"].includes(c)?null:(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(se.A,{title:null===u||void 0===u||null===(a=u[null===r||void 0===r||null===(s=r.mcoPropeties)||void 0===s?void 0:s.name])||void 0===a?void 0:a.promoted})}),(0,N.jsx)(ne.A,{alternativeLabel:!0,activeStep:1,style:{marginTop:"0px"},children:h.map(((l,t)=>(0,N.jsxs)(ae.A,{children:[p===l?(0,N.jsxs)("div",{style:{width:"auto",minWidth:"110px",display:"inline-table",padding:"10px",color:"#ffffff",background:"#42a2da",zIndex:"1",position:"relative",top:"-10px",borderRadius:"-10px",boxShadow:"0px 2px 2px 0px rgba(0, 0, 0, 0.3)"},"data-state":l,children:[0!==t&&(0,N.jsx)("span",{style:{width:"0",height:"0",borderStyle:"solid",borderTop:"7px solid transparent",borderBottom:"7px solid transparent",borderLeft:"10px solid #bdbdbd",borderRight:"0",position:"absolute",left:"-10px",top:"15.5px"}}),l]}):(0,N.jsxs)("div",{style:{width:"auto",minWidth:"110px",display:"inline-table",padding:"10px",color:"#5c5c5c",background:"#e6e7e8",zIndex:"1",position:"relative",top:"-10px",borderRadius:"-10px",boxShadow:"0px 2px 2px 0px rgba(0, 0, 0, 0.3)"},"data-state":l,children:[0!==t&&(0,N.jsx)("span",{style:{width:"0",height:"0",borderStyle:"solid",borderTop:"7px solid transparent",borderBottom:"7px solid transparent",borderLeft:"10px solid #bdbdbd",borderRight:"0",position:"absolute",left:"-10px",top:"15.5px"}}),l]}),p===l&&(0,N.jsxs)("div",{children:[!["Item","BOM"].includes(c)&&["Release"].includes(p)&&(0,N.jsx)(de.A,{component:"button",variant:"body2",underline:"none",title:re,onClick:()=>{e.handleLifeCycle(l,"promote")},children:re}),["Item","BOM"].includes(c)&&["Review","Release","Implemented","In Work","In Approval","Approved"].includes(p)&&(0,N.jsx)(de.A,{component:"button",variant:"body2",underline:"none",title:re,style:{color:"lightgrey"},children:re}),!["Item","BOM"].includes(c)&&["Review","In Work","In Approval","Approved"].includes(p)&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{children:(0,N.jsx)(de.A,{component:"button",variant:"body2",underline:"none",title:re,onClick:()=>{e.handleLifeCycle(l,"promote")},children:re})}),(0,N.jsx)("div",{children:(0,N.jsx)(de.A,{component:"button",variant:"body2",underline:"none",title:ue,onClick:()=>{e.demoteState(l,"demote")},children:ue})})]}),["Create","Prepare"].includes(p)&&(0,N.jsx)(de.A,{component:"button",variant:"body2",underline:"none",title:re,onClick:()=>{e.handleLifeCycle(l,"promote")},children:re})]})]},l)))})]})})})}var ce=t(7960),pe=t(82357),me=t(58390),he=t(89302),ye=t(71732),xe=t(60446),fe=t.n(xe),ge=t(76987),be=t(4174);t(41484);const we=e=>e&&e[0].toUpperCase()+e.slice(1),je=localStorage.getItem("instance"),Pe={startDate:"Startdate",rme:"onPrem"===je?"Responsible Manufacturing Engineer":"",rsme:"onPrem"===je?"Responsible Senior Manufacturing Engineer":"",mcostate:"State",responseFromErp:"Export Status",plantName:"Plant",businessUnit:"Design Organization",description:"Description",ECOExportToERP:"ECO Export To ERP"},Ae=e=>{let{plantType:l,selectedRoute:t}=e;const o=(0,j.wA)(),{responseData:a,RSMEList:d,RMEList:s,currentMcoDetails:r,isPropertyFormEdited:u}=(0,j.d4)((e=>e.mcoDetails)),[v,c]=(0,i.useState)({}),[p,m]=(0,i.useState)(!1),[h,y]=(0,i.useState)(null);return(0,i.useEffect)((()=>{!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",l={};if(Object.keys((null===a||void 0===a?void 0:a.mcoPropeties)||{}).length){var t,i;const e=null===a||void 0===a?void 0:a.mcoPropeties;if(e.startdate){let t=new Date;t.setHours(0,0,0,0);let i=e.startdate.split(/[\s/:]+/);new Date(i[2],i[0]-1,i[1],i[3],i[4],i[5])<t&&(l.startdate=`${Pe.startDate} must be a present or future date`)}else l.startdate=`${Pe.startDate} is required`;e.rme&&"unassigned"!==(null===(t=e.rme)||void 0===t?void 0:t.toLowerCase())||"onPrem"!==je||(l.rme=`${Pe.rme} is required`),(!e.rsme||"unassigned"===(null===(i=e.rsme)||void 0===i?void 0:i.toLowerCase())&&"onPrem"===je)&&(l.rsme=`${Pe.rsme} is required`),e.description||(l.description=`${Pe.description} is required`),e.ECOExportToERP||(l.ECOExportToERP=`${Pe.ECOExportToERP} is required`)}if(c(l),Object.keys(l||{}).length){var o;const t=null===(o=Object.keys(l||{}))||void 0===o?void 0:o.map((e=>(0,N.jsx)("li",{children:l[e]},x().generate())));"click"===e&&(m(!0),y({severity:"error",desc:t}))}}()}),[a]),(0,N.jsxs)(N.Fragment,{children:[Object.keys((null===a||void 0===a?void 0:a.mcoPropeties)||{}).map((e=>{var i,u,c,p,m,h,y,f,g,b,w,j,P,O,E,T;if(["id","type","physicalid","organizationId","rmeEmailAddress","rsmeEmailAddress","startDateDisplayValue","errorMsg"].includes(e)||"responseFromErp"===e&&(!r||null===r||void 0===r||!r.ERPstatus||!r))return!1;let k=null;var S;["rme","rsme"].includes(e)&&"onPrem"===je&&(k=null===(S=("rme"===e?s:d)||[])||void 0===S?void 0:S.find((l=>l.key===(null===a||void 0===a?void 0:a.mcoPropeties[e]))));let D=null===a||void 0===a||null===(i=a.mcoPropeties)||void 0===i?void 0:i.ECOExportToERP;if("ECOExportToERP"===e&&(null===a||void 0===a||null===(u=a.mcoPropeties)||void 0===u||!u.ECOExportToERP||""===(null===a||void 0===a||null===(c=a.mcoPropeties)||void 0===c?void 0:c.ECOExportToERP))){let e=null===a||void 0===a?void 0:a.mcoPropeties;e.ECOExportToERP="yes",o((0,A.H1)({mcoPropeties:e}))}const I=!(null!==(p=["Create","Review","Prepare","In Work"])&&void 0!==p&&p.includes(null===a||void 0===a||null===(m=a.mcoPropeties)||void 0===m?void 0:m.mcostate));return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(ce.A,{container:!0,spacing:3,alignItems:"center",children:[(0,N.jsx)(ce.A,{item:!0,md:3,sm:4,xs:12,className:"font-medium",children:["startdate"].includes(e)&&null!==a&&void 0!==a&&null!==(h=a.mcoPropeties)&&void 0!==h&&h.startDateDisplayValue&&"null"!==(null===a||void 0===a||null===(y=a.mcoPropeties)||void 0===y?void 0:y.startDateDisplayValue)?(0,N.jsx)("span",{style:{position:"relative",top:"-25px"},children:Object.keys(Pe||{}).includes(e)?we(Pe[e]):we(e)}):(0,N.jsx)("span",{children:Object.keys(Pe||{}).includes(e)?we(Pe[e]):we(e)})}),(0,N.jsxs)(ce.A,{item:!0,md:9,sm:8,xs:12,children:[["startdate"].includes(e)&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(me.$,{dateAdapter:he.R,children:(0,N.jsx)(ye.K,{disabled:I,minDate:fe()(),views:["year","month","day"],value:a.mcoPropeties[e]&&""!==a.mcoPropeties[e]?fe()(a.mcoPropeties[e]):null,onChange:e=>{let l=null===a||void 0===a?void 0:a.mcoPropeties;if(e){let t=fe()(e.$d).format("MM/DD/YYYY hh:mm:ss A");"Invalid Date"!==t?(l.startdate=null!==t&&void 0!==t?t:null,o((0,A.H1)({mcoPropeties:l}))):e||(l.startdate=e,o((0,A.H1)({mcoPropeties:l}))),o((0,A.RY)({isPropertyFormEdited:!0}))}else e||(l.startdate=e,o((0,A.H1)({mcoPropeties:l})))},className:`datatimeInputCls ${null===a||void 0===a||null===(f=a.mcoPropeties)||void 0===f?void 0:f.mcostate}`,sx:{padding:"0px!important",width:"100%!important",marginBottom:"1rem !important","@global":{input:{padding:"8.5px 14px!important",height:"0.4375em!important"}}},slots:{toolbar:be.A}})}),null!==a&&void 0!==a&&null!==(g=a.mcoPropeties)&&void 0!==g&&g.startDateDisplayValue&&"null"!==(null===a||void 0===a||null===(b=a.mcoPropeties)||void 0===b?void 0:b.startDateDisplayValue)?(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{style:{padding:"0px 15px 15px 0px"},children:[(0,N.jsx)("b",{children:"Start Date Equivalent To:"})," ",null===a||void 0===a||null===(w=a.mcoPropeties)||void 0===w?void 0:w.startDateDisplayValue]})}):null]}),["rme","rsme"].includes(e)&&"onPrem"===je&&(0,N.jsx)(pe.A,{disabled:I,id:"autoComplete_"+e,value:(null===(j=k)||void 0===j?void 0:j.label)||null,autoHighlight:!0,onChange:(l,t)=>{let i=a.mcoPropeties;i[e]=t&&t.key||null,o((0,A.H1)({mcoPropeties:i})),o((0,A.RY)({isPropertyFormEdited:!0}))},onInputChange:(e,l)=>{},options:"rme"===e?s:d,renderInput:l=>(0,N.jsx)(B.A,{...l,className:null!==v&&void 0!==v&&v[e]?"errorAutocomplete":""}),renderOption:(e,l)=>(0,N.jsx)(n.A,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...e,children:l.label})}),["responseFromErp"].includes(e)&&r&&(0,N.jsx)(B.A,{fullWidth:!0,className:"mb-4 w-full "+(null!==v&&void 0!==v&&v[e]?"error-border":""),size:"small",variant:"outlined",name:e,value:null!==(P=null===r||void 0===r?void 0:r.ERPstatus)&&void 0!==P?P:"",type:"text",disabled:["responseFromErp"].includes(e)}),["ECOExportToERP"].includes(e)&&r&&(0,N.jsxs)(R.A,{disabled:I,className:null!==v&&void 0!==v&&v[e]?"error-border":"",value:null!==D&&void 0!==D?D:"yes",onChange:e=>{let l=null===a||void 0===a?void 0:a.mcoPropeties;l.ECOExportToERP=e.target.value||null,o((0,A.H1)({mcoPropeties:l})),o((0,A.RY)({isPropertyFormEdited:!0}))},displayEmpty:!0,renderValue:e=>e?we(D||"yes"):(0,N.jsx)("em",{children:"--Select--"}),style:{height:"37.13px",marginBottom:"1rem",width:"100%"},children:[(0,N.jsx)(C.A,{id:"",children:"Select"}),["yes","no"].map((e=>(0,N.jsx)(C.A,{value:e,children:we(e)},x().generate())))]}),!["startdate","rme","rsme","responseFromErp","ECOExportToERP"].includes(e)&&(0,N.jsx)(B.A,{className:null!==v&&void 0!==v&&v[e]?"error-border":"",fullWidth:!0,size:"small",variant:"outlined",name:e,value:"plantName"===e?l:"name"===e?(null===t||void 0===t?void 0:t.title)||"":null!==(O=null===a||void 0===a?void 0:a.mcoPropeties[e])&&void 0!==O?O:"",onChange:e=>{let l=a.mcoPropeties;["name","originator","businessUnit","mcostate","plantName","organizationId"].includes(e.target.name)||(l[e.target.name]=e.target.value||null,o((0,A.H1)({mcoPropeties:l})),o((0,A.RY)({isPropertyFormEdited:!0})))},type:"text",disabled:["name","originator","businessUnit","mcostate","plantName","organizationId"].includes(e)||I})]}),["responseFromErp"].includes(e)&&r&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(ce.A,{item:!0,md:3,sm:4,xs:12,className:"font-medium",children:(0,N.jsx)("span",{})}),(0,N.jsx)(ce.A,{item:!0,md:9,sm:8,xs:12,style:{padding:"0px"},children:r&&"success"!==(null===r||void 0===r||null===(E=r.ERPstatus)||void 0===E?void 0:E.toLowerCase())?(0,N.jsx)(N.Fragment,{children:(null===r||void 0===r?void 0:r.ERPErrorDescription)instanceof Array?(0,N.jsx)(N.Fragment,{children:(0,N.jsx)("ul",{children:null===r||void 0===r||null===(T=r.ERPErrorDescription)||void 0===T?void 0:T.map((e=>(0,N.jsx)("li",{children:(0,z.T_)(e)},x().generate())))})}):(0,N.jsx)(N.Fragment,{children:(0,N.jsx)("ul",{children:(0,N.jsx)("li",{children:`${(0,z.T_)(null===r||void 0===r?void 0:r.ERPErrorDescription)}`},x().generate())})})}):null})]})]},e)})})),h&&(0,N.jsx)(ge.A,{openAlert:p,openDesc:h,setOpenAlert:m})]})};var Oe=t(89454);var Ee;const Re=(Ee=e=>(0,N.jsxs)("div",{children:[(0,N.jsx)(s.A,{variant:"contained",onClick:()=>null===e||void 0===e?void 0:e.bulkUploadPartandTemplate(),style:{position:"absolute",right:"165px",top:"0px",zIndex:1},disabled:["Review","Release","Implemented"].includes(null===e||void 0===e?void 0:e.stepData),children:"Upload Part Templates"}),(0,N.jsx)(s.A,{variant:"contained",onClick:()=>null===e||void 0===e?void 0:e.exportMCOData(),style:{position:"absolute",right:"80px",top:"0px",zIndex:1},children:"Export"}),(0,N.jsx)(s.A,{variant:"contained",onClick:()=>null===e||void 0===e?void 0:e.submitAffectedParts("form"),style:{position:"absolute",right:"0px",top:"0px",zIndex:1},disabled:["Review","Release","Implemented"].includes(null===e||void 0===e?void 0:e.stepData)||!(null!==e&&void 0!==e&&e.isMaterialFormEdited),children:"Save"})]}),e=>{const l=(0,j.d4)((e=>e.mcoDetails.isMaterialFormEdited));return(0,N.jsx)(Ee,{...e,isMaterialFormEdited:l})});var Ce=t(17392),Te=t(74802);const ke=[{id:"createdDateTime",label:"Date",width:"120px"},{id:"actionUserDetails",label:"User",width:"120px"},{id:"actionType",label:"Action",width:"80px"},{id:"state",label:"State",width:"80px"},{id:"description",label:"Description",width:"400px"}];function Se(){const[e,l]=(0,i.useState)([]),[t,o]=(0,i.useState)(!0),[n,a]=(0,i.useState)(null),d=new g.f,s=(0,b.g)();return(0,i.useEffect)((()=>{(async()=>{try{await d.getMcoHistorybyid([null===s||void 0===s?void 0:s.mco_id]).then((async e=>{var t,i,n;console.log(e,"===histData"),"success"===(null===e||void 0===e?void 0:e.status)?null!==(t=Object.keys(null===e||void 0===e?void 0:e.data))&&void 0!==t&&t.length&&null!==(i=Object.keys(null===e||void 0===e?void 0:e.data))&&void 0!==i&&i.includes(null===s||void 0===s?void 0:s.mco_id)&&l(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n[null===s||void 0===s?void 0:s.mco_id]):a("No result found!"),o(!1)})).catch((e=>{throw e}))}catch(e){throw e}})()}),[]),(0,N.jsx)(k.A,{sx:{maxWidth:"1200px",overflow:"hidden"},children:(0,N.jsxs)(T.A,{sx:{maxHeight:440},children:[(0,N.jsxs)(S.A,{stickyHeader:!0,"aria-label":"sticky table",style:{padding:"0px 10px 10px"},children:[(0,N.jsx)(D.A,{children:(0,N.jsx)(I.A,{children:ke.map((e=>(0,N.jsx)(E.A,{align:e.align,style:{top:0,minWidth:e.minWidth,width:e.width},children:e.label},e.id)))})}),(0,N.jsx)(M.A,{children:null===e||void 0===e?void 0:e.map((e=>(0,N.jsx)(I.A,{tabIndex:-1,children:ke.map((l=>{const t=e[l.id];return(0,N.jsx)(E.A,{align:l.align,children:l.format&&"number"===typeof t?l.format(t):t},l.id)}))},e.code)))})]}),t?(0,N.jsx)("div",{style:{textAlign:"center"},children:(0,N.jsx)(w.A,{show:t})}):null,n?(0,N.jsx)("div",{style:{textAlign:"center",padding:"10px 0px 20px"},children:n}):null]})})}const De=(0,o.Ay)(v.A)((e=>{let{theme:l}=e;return{"& .MuiDialogContent-root":{padding:l.spacing(2)},"& .MuiDialogActions-root":{padding:l.spacing(1)}}}));function Ie(e){let{showHistoryBox:l,setShowHistoryBox:t}=e;const[o,n]=i.useState(!1),a=(e,l)=>{"backdropClick"!==l&&"escapeKeyDown"!==l&&(n(!1),t(!1))};return(0,i.useEffect)((()=>{n(l)}),[l]),(0,N.jsx)(i.Fragment,{children:(0,N.jsxs)(De,{onClose:a,"aria-labelledby":"customized-dialog-title",open:o,maxWidth:"xl",children:[(0,N.jsx)(c.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:"History"}),(0,N.jsx)(Ce.A,{"aria-label":"close",onClick:a,sx:e=>({position:"absolute",right:8,top:8,color:e.palette.grey[500]}),children:(0,N.jsx)(Te.A,{})}),(0,N.jsx)(p.A,{dividers:!0,children:(0,N.jsx)(Se,{})}),(0,N.jsx)(h.A,{children:(0,N.jsx)(s.A,{autoFocus:!0,onClick:a,children:"Close"})})]})})}const Me=e=>{let{handleRefreshButtonFunc:l,responseData:t}=e;return(0,N.jsxs)("div",{className:"buttonRefreshContainer",children:[(0,N.jsx)(s.A,{variant:"contained",title:"Refresh MCO data",onClick:()=>{l(!0,t)},className:"refreshBtn",children:"Refresh"}),(0,N.jsx)(s.A,{variant:"contained",title:"Reload Affected Items",className:"reloadBtn",onClick:()=>{window.location.reload()},children:"Reload Affected Items"})]})},Ne=e=>{var l,t,i,o;let{responseData:n,setShowTrackerBox:a,setShowHistoryBox:d}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(de.A,{component:"button",underline:"none",onClick:()=>{d(!0)},children:"History"}),(0,N.jsx)("span",{style:{padding:"10px"},children:"|"}),"create"===(null===n||void 0===n||null===(l=n.mcoPropeties)||void 0===l||null===(t=l.mcostate)||void 0===t?void 0:t.toLowerCase())?(0,N.jsx)(de.A,{component:"button",underline:"none",disabled:!0,style:{color:"grey"},children:"Tracker"}):(0,N.jsx)(de.A,{component:"button",underline:"none",onClick:()=>{a(!0)},disabled:"create"===(null===n||void 0===n||null===(i=n.mcoPropeties)||void 0===i||null===(o=i.mcostate)||void 0===o?void 0:o.toLowerCase()),children:"Tracker"})]})};var Le=t(97709),Fe=t(53078),Be=t(78043);const _e=()=>{const{getTemplateMappingsFunc:e,getTemplateMappingsFuncForTypeAndBU:l}=(()=>{const{responseData:e,templateMappingsInfo:l,ORGAllowedTemplateMappings:t}=(0,j.d4)((e=>({responseData:e.mcoDetails.responseData,templateMappingsInfo:e.mcoDetails.templateMappingsInfo,ORGAllowedTemplateMappings:e.mcoDetails.ORGAllowedTemplateMappings})),j.bN);return{getTemplateMappingsFunc:i=>i?"ORGAllowedTemplateMappings"===i?(null===t||void 0===t?void 0:t.filter((l=>{var t;return l.BUID===(null===e||void 0===e||null===(t=e.mcoPropeties)||void 0===t?void 0:t.businessUnit)})))||[]:(null===l||void 0===l?void 0:l.filter((l=>{var t;return l.MappingType===i&&l.BUID===(null===e||void 0===e||null===(t=e.mcoPropeties)||void 0===t?void 0:t.businessUnit)})))||[]:[],getTemplateMappingsFuncForTypeAndBU:function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return i?"ORGAllowedTemplateMappings"===i?(null===t||void 0===t?void 0:t.filter((l=>{var t;return l.BUID===(null===e||void 0===e||null===(t=e.mcoPropeties)||void 0===t?void 0:t.businessUnit)})))||[]:(null===l||void 0===l?void 0:l.filter((e=>e.MappingType===i&&e.BUID===o)))||[]:[]}}})(),{responseData:t,templateList:i,mrDetails:o}=(0,j.d4)((e=>({responseData:e.mcoDetails.responseData,templateList:e.mcoDetails.templates,mrDetails:e.mcoDetails.mrDetails})),j.bN),n=function(l){let t=[];if(l&&"Unassigned"!==l){let p=null;switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""){case"mvoallowedchanges":const m=e("mvoallowedchanges");var i,o,n;if(p=(null===m||void 0===m?void 0:m.filter((e=>{var t;return(null===e||void 0===e||null===(t=e.details)||void 0===t?void 0:t.MVO_TEMPLATE_FROM)===l})))||[],p.length)t=null===(i=p[0])||void 0===i||null===(o=i.details)||void 0===o||null===(n=o.MVO_TEMPLATES_TO)||void 0===n?void 0:n.map((e=>e.MVO_TEMPLATE_TO));break;case"mvoTemplateCompatibility":const h=e("mvoTemplateCompatibility");var a,d,s,r;if(p=(null===h||void 0===h?void 0:h.filter((e=>{var t;return(null===e||void 0===e||null===(t=e.details)||void 0===t?void 0:t.MVO_TEMPLATE_OPTION)===l})))||[],p.length)t=null===(a=p[0])||void 0===a||null===(d=a.details)||void 0===d||null===(s=d.allowableOrgTemplates)||void 0===s||null===(r=s.filter((e=>{var l;return"active"===(null===(l=e.status)||void 0===l?void 0:l.toLowerCase())})))||void 0===r?void 0:r.map((e=>e.ALLOWABLE_ORG_TEMPLATE));break;case"setcompatibletemplates":const y=e("setcompatibletemplates");var u,v,c;if(p=(null===y||void 0===y?void 0:y.filter((e=>{var t;return(null===e||void 0===e||null===(t=e.details)||void 0===t?void 0:t.TEMPLATE_ORG_EXISTING)===l})))||[],p.length)t=null===(u=p[0])||void 0===u||null===(v=u.details)||void 0===v||null===(c=v.TEMPLATE_ORG_MODIFYING)||void 0===c?void 0:c.map((e=>e.TEMPLATE_ORG_MODIFYING))}}return t},a=function(){var e;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t&&l&&null!==(e=Object.keys(l))&&void 0!==e&&e.includes(null===t||void 0===t?void 0:t.name)?l[null===t||void 0===t?void 0:t.name][0]:{}},d=e=>{var l;if(!e)return new Map;const t=new Map;let i="";return null===(l=Object.keys(e))||void 0===l||l.map((l=>{if(i=e[l],t.has(i)){const e=t.get(i);t.set(i,[...e,l])}else t.set(i,[l])})),t},s=function(){let e=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").find((e=>{var l;return"buplantmapping"===e.MappingType&&"NONE OR PO ORG"===(null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.Entity.toUpperCase())}));if(e&&Object.keys(e).length){var l;const t=null===(l=e.details)||void 0===l?void 0:l.PLANT;return Object.keys(t).forEach((e=>{"None"!==t[e]&&""!==t[e]||delete t[e]})),t}return{}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]);return d(e)};return async function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!r)return[];let u=[];const v=null===r||void 0===r?void 0:r.displayType,c=[];if((()=>{var e,l;return null===Fe||void 0===Fe||null===(e=Fe.masterPlants)||void 0===e?void 0:e.includes(null===t||void 0===t||null===(l=t.mcoPropeties)||void 0===l?void 0:l.plantName)})()){var p,m;if((e=>{var l,t;let i=!1;const n=a(null===o||void 0===o?void 0:o.activeMR,e)||{},d=a(null===o||void 0===o?void 0:o.previousSeqMR,e)||{};return null!==(l=Object.keys(n))&&void 0!==l&&l.length&&null!==(t=Object.keys(d))&&void 0!==t&&t.length?(d&&(null===n||void 0===n?void 0:n.sequence)!==(null===d||void 0===d?void 0:d.sequence)&&(i=!0),i):i})(r)){if(null!==o&&void 0!==o&&null!==(p=o.previousSeqMR)&&void 0!==p&&p.hasOwnProperty(null===r||void 0===r?void 0:r.name)&&null!==o&&void 0!==o&&null!==(m=o.previousSeqMR[null===r||void 0===r?void 0:r.name])&&void 0!==m&&m.length){c.push("story 2");const e=a(null===o||void 0===o?void 0:o.previousSeqMR,r)||{};u=n(null===e||void 0===e?void 0:e.template,"mvoallowedchanges",r)}}else c.push("story 1"),u=function(l){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=null,n=[];switch(l){case"partTypeAndORGAllowed_TemplateMappings":const l=e("parttypetotemplate"),r=e("ORGAllowedTemplateMappings"),u=l.filter((e=>e.details.ENGG_ITEM_TYPE===i))||[],v=(null===r||void 0===r?void 0:r.filter((e=>{var l,i,o,n;return Object.keys(null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.Plants).includes(null===t||void 0===t||null===(i=t.mcoPropeties)||void 0===i?void 0:i.plantName)&&"Y"===(null===e||void 0===e||null===(o=e.details)||void 0===o?void 0:o.Plants[null===t||void 0===t||null===(n=t.mcoPropeties)||void 0===n?void 0:n.plantName])})))||[];let c=[];if(u.length)v.forEach((e=>{var l,t;((null===(l=u[0])||void 0===l||null===(t=l.details)||void 0===t?void 0:t.allowableOrgTemplates.filter((l=>{var t;return l.org_allowed_template===(null===e||void 0===e||null===(t=e.details)||void 0===t?void 0:t.ALLOWABLE_ORG_TEMPLATES)})))||[]).length&&c.push(e)}));else{var a,d;const e=null===l||void 0===l||null===(a=l.map((e=>{var l;return null===(l=e.details)||void 0===l?void 0:l.allowableOrgTemplates})))||void 0===a?void 0:a.flat(),t=null===e||void 0===e||null===(d=e.filter((e=>{var l;return"yes"===(null===(l=e.exclusive_use)||void 0===l?void 0:l.toLowerCase())})))||void 0===d?void 0:d.map((e=>e.org_allowed_template));let i=t.filter(((e,l)=>t.indexOf(e)===l));c=null===v||void 0===v?void 0:v.filter((e=>{var l;return!(null!==i&&void 0!==i&&i.includes(null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.ALLOWABLE_ORG_TEMPLATES))}))}var s;c.length&&(n=null===(s=c)||void 0===s?void 0:s.map((e=>{var l;return null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.ALLOWABLE_ORG_TEMPLATES}))),o=n;break;case"buplantmapping":const p=e("buplantmapping");o=(null===p||void 0===p?void 0:p.filter((e=>{var l,i;return(null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.PO_ORG)===(null===t||void 0===t||null===(i=t.mcoPropeties)||void 0===i?void 0:i.plantName)})))||[]}return o}("partTypeAndORGAllowed_TemplateMappings",v)}else{var h,y,x,f,g;if(null!==o&&void 0!==o&&o.getHighestSeqCurrentOrActiveMR&&null!==(h=Object.keys(null===o||void 0===o?void 0:o.getHighestSeqCurrentOrActiveMR))&&void 0!==h&&h.length){const e=a(null===o||void 0===o?void 0:o.getHighestSeqCurrentOrActiveMR,r)||{};u=n(null===e||void 0===e?void 0:e.template,"mvoTemplateCompatibility",r),c.push("story 4")}const i=e("ORGAllowedTemplateMappings"),p=(null===i||void 0===i||null===(y=i.filter((e=>{var l,i,o;return"Y"===(null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.Plants[null===t||void 0===t||null===(i=t.mcoPropeties)||void 0===i?void 0:i.plantName])&&u.includes(null===e||void 0===e||null===(o=e.details)||void 0===o?void 0:o.ALLOWABLE_ORG_TEMPLATES)})))||void 0===y?void 0:y.map((e=>{var l;return null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.ALLOWABLE_ORG_TEMPLATES})))||[],m=e("buplantmapping"),E=s(m);E&&E.has(null===t||void 0===t||null===(x=t.mcoPropeties)||void 0===x?void 0:x.plantName)?null!==o&&void 0!==o&&o.isFirstSequence&&Object.keys(null===o||void 0===o?void 0:o.isFirstSequence).includes(null===r||void 0===r?void 0:r.name)&&null!==o&&void 0!==o&&o.isFirstSequence[null===r||void 0===r?void 0:r.name]&&(u=p):u=p,null!==p&&void 0!==p&&p.length&&c.push("story 5");const R=e("parttypetotemplate"),C=R.filter((e=>e.details.ENGG_ITEM_TYPE===v))||[];if(null!==C&&void 0!==C&&C.length){var b,w,j;let e=(null===(b=C[0])||void 0===b||null===(w=b.details)||void 0===w||null===(j=w.allowableOrgTemplates)||void 0===j?void 0:j.filter((e=>u.includes(null===e||void 0===e?void 0:e.org_allowed_template))))||[];null!==e&&void 0!==e&&e.length&&(u=null===e||void 0===e?void 0:e.map((e=>null===e||void 0===e?void 0:e.org_allowed_template)),c.push("story 6"))}else{var P,A,O;const e=null===R||void 0===R||null===(P=R.map((e=>{var l;return null===(l=e.details)||void 0===l?void 0:l.allowableOrgTemplates})))||void 0===P?void 0:P.flat(),l=(null===e||void 0===e||null===(A=e.filter((e=>{var l;return"yes"===(null===(l=e.exclusive_use)||void 0===l?void 0:l.toLowerCase())})))||void 0===A?void 0:A.map((e=>e.org_allowed_template)))||[];u=null===(O=u)||void 0===O?void 0:O.filter((e=>!(null!==l&&void 0!==l&&l.includes(e))))}const T=function(){var e,l;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=(null===t||void 0===t||null===(e=t.find((e=>{var l;return"buplantmapping"===e.MappingType&&e.BUID===i&&"RDO OU ORG SET"===(null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.Entity.toUpperCase())})))||void 0===e||null===(l=e.details)||void 0===l?void 0:l.PLANT)||{},a=[];if(n&&n[o]&&"yes"===n[o].toLowerCase()){var s;const e=null===(s=t.find((e=>{var l;return"buplantmapping"===e.MappingType&&e.BUID===i&&"PLANTGROUP"===(null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.Entity.toUpperCase())})))||void 0===s?void 0:s.details.PLANT;d(e).forEach(((e,l)=>{const t=null===e||void 0===e?void 0:e.filter((e=>n&&n[e]&&"yes"===n[e].toLowerCase()));if(null!==t&&void 0!==t&&t.includes(o))return a=t,a}))}return a}(l("buplantmapping",r.organization),r.organization,null===t||void 0===t||null===(f=t.mcoPropeties)||void 0===f?void 0:f.plantName);let k=[];T.forEach((e=>{var l;if(e!==(null===t||void 0===t||null===(l=t.mcoPropeties)||void 0===l?void 0:l.plantName)){let l=((e,l)=>{var t;const i=null===o||void 0===o?void 0:o.getHighestSeqCurrentPendingOrActiveMR;if(i&&null!==(t=Object.keys(i))&&void 0!==t&&t.length&&Object.keys(i).includes(l.name))return i[l.name].filter((e=>e.partName===(null===l||void 0===l?void 0:l.name))).find((t=>t.partAndPlant===`${l.name}_${e}`));return{}})(e,r);if(l){let e=n(l.template,"setcompatibletemplates",r);null!==e&&void 0!==e&&e.length&&k.push(e)}}}));const S=(null===(g=u)||void 0===g?void 0:g.filter((e=>k.flat().includes(e))))||[];u=k.length?S:u,c.push("story 8")}let E=[];return u.length&&u.forEach((e=>{const l=i.find((l=>(null===l||void 0===l?void 0:l.templateName)===e));l&&E.push(l)})),E.sort(((e,l)=>e.templateName.localeCompare(l.templateName))),console.log(c,"=======dropdown option appliedChecks",null===r||void 0===r?void 0:r.name),E=E.sort(((e,l)=>e.templateName.localeCompare(l.templateName))),E}};var Ve=t(62954),He=t(81807);const $e=(0,o.Ay)(S.A)((()=>({whiteSpace:"pre","& thead":{"& tr":{"& th":{paddingLeft:0,paddingRight:0}}},"& tbody":{"& tr":{"& td":{paddingLeft:0,textTransform:"capitalize"}}}}))),Ue=(0,o.Ay)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),Ye=e=>{const l=new g.f,{importBulkUpdateFile:t,setImportBulkUpdateFile:o,savePartAndOracleTempInRedux:a}=e,[d,r]=(0,i.useState)(!1),[u,y]=(0,i.useState)(!1),[f,b]=(0,i.useState)(!1),[j,P]=(0,i.useState)(!1),[A,O]=(0,i.useState)(null),[R,C]=(0,i.useState)(null),T=localStorage.getItem("instance"),[k,S]=(0,i.useState)(!1),[D,L]=(0,i.useState)(null);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(v.A,{open:t,PaperProps:{style:{backgroundColor:"#fff",boxShadow:"none"}},style:{zIndex:999},children:[(0,N.jsx)(c.A,{style:{cursor:"move"},id:"draggable-dialog-title",children:"Bulk Upload Oracle Template"}),(0,N.jsx)(p.A,{children:(0,N.jsx)(m.A,{children:(0,N.jsx)(n.A,{width:"100%",overflow:"auto",children:(0,N.jsx)($e,{children:(0,N.jsxs)(M.A,{children:[(0,N.jsxs)(I.A,{children:[(0,N.jsx)(E.A,{align:"left",children:"Upload File (Excel File)"}),(0,N.jsxs)(E.A,{align:"left",children:[(0,N.jsxs)("div",{style:{paddingTop:"10px"},children:[(0,N.jsxs)(s.A,{component:"label",variant:"contained",startIcon:(0,N.jsx)(Ve.A,{}),children:["Upload file",(0,N.jsx)(Ue,{type:"file",name:"file",accept:".xls, .xlsx",onChange:e=>{console.log("file selected");const l=e.target.files[0];if(l){const t=l.name.split(".").pop();"xlsx"===t||"xls"===t?(O(e.target.files[0]),C(e.target.files[0].name),y(!1)):(y(!0),C(null),O(null))}else y(!0),C(null),O(null)}})]}),u&&(0,N.jsx)("p",{children:"Please Select xlsx file to Upload "})]}),R&&(0,N.jsx)("p",{children:R})]})]}),(0,N.jsx)(I.A,{children:(0,N.jsxs)(E.A,{colSpan:2,children:[(0,N.jsxs)("div",{style:{paddingTop:"10px"},children:[(0,N.jsx)("a",{onClick:()=>{l.downloadSampleFile("partAndOracleTemp/sample-partAndOracleTemp.xlsx")},download:"Example-XLSX-document",rel:"noreferrer",style:{color:"blue",cursor:"pointer"},children:"Click Here"})," to download the sample Excel template for the Oracle Template Update."]}),(0,N.jsxs)("div",{style:{paddingTop:"10px"},children:[(0,N.jsx)("b",{children:"Note:"})," Upload file must contain two columns with header labels in following order."]}),(0,N.jsxs)("div",{style:{paddingTop:"10px"},children:["1. Part Name",(0,N.jsx)("br",{}),"2. Oracle Template(Case sensitive)",(0,N.jsx)("br",{})]})]})})]})})})})}),(0,N.jsxs)(h.A,{children:[(0,N.jsx)(s.A,{onClick:()=>{let e=!1;if((null===A||A.length<1)&&(y(!0),e=!0),!e&&null!==A){let e={file:A,data:{Instance:T}};console.log(e,"postData"),r(!0),l.bulkUploadPartAndTemplate(e).then((async e=>{if(P(!0),O(null),C(null),o(!1),"success"===e.status){var l;b(e);const t=await a(null===e||void 0===e?void 0:e.data);if(null!==(l=Object.keys(t))&&void 0!==l&&l.length){const l=((e,l)=>{var t,i,o,n,a;return(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{style:{fontWeight:"bold"},children:[null===e||void 0===e||null===(t=e.success)||void 0===t?void 0:t.length," of ",null===l||void 0===l?void 0:l.length," MR assignments successfully updated. ",(null===e||void 0===e||null===(i=e.error)||void 0===i?void 0:i.length)+(null===e||void 0===e||null===(o=e.warning)||void 0===o?void 0:o.length)," failed."]}),null===e||void 0===e||null===(n=e.error)||void 0===n?void 0:n.map((e=>(0,N.jsx)("div",{children:(0,N.jsx)("b",{style:{color:"red"},children:e})},x().generate()))),null===e||void 0===e||null===(a=e.warning)||void 0===a?void 0:a.map((e=>(0,N.jsx)("div",{children:(0,N.jsx)("b",{style:{color:"#ebc034"},children:e})},x().generate())))]})})(t,null===e||void 0===e?void 0:e.data);S(!0),L({severity:"info",desc:l})}}else{var t;if(null!==e&&void 0!==e&&null!==(t=e.msg)&&void 0!==t&&t.length){var i;const l=(null===e||void 0===e||null===(i=e.msg)||void 0===i?void 0:i.map((e=>(0,N.jsx)("li",{children:e},x().generate()))))||[];S(!0),L({severity:"failed"===(null===e||void 0===e?void 0:e.status)?"error":null===e||void 0===e?void 0:e.status,desc:l})}}r(!1)}))}},children:"Done"}),(0,N.jsx)(s.A,{autoFocus:!0,onClick:()=>{O(null),o(!1)},children:"Cancel"})]})]}),D?(0,N.jsx)(He.A,{openAlert:k,openDesc:D,setOpenAlert:S}):(0,N.jsx)(N.Fragment,{}),d?(0,N.jsx)("div",{style:{textAlign:"center"},children:(0,N.jsx)(w.A,{show:d})}):(0,N.jsx)(N.Fragment,{})]})};t(56659);const Ge="Promote >>";function We(e){const{selectedRoute:l}=e,[t,o]=(0,i.useState)("Create"),[n,a]=(0,i.useState)(["Create"]),[s,r]=(0,i.useState)(!1),[u,v]=(0,i.useState)(null),[c,p]=(0,i.useState)(!1);let m="SaaS"===localStorage.getItem("instance")?["Create","Review","Release"]:["Create","Release","Implemented"];const h=new g.f;(0,i.useEffect)((()=>{const e=localStorage.getItem(`saasLifecycleStep_${null===l||void 0===l?void 0:l.id}`);if(e&&m.includes(e)){o(e);const l=m.indexOf(e);a(m.slice(0,l+1))}}),[null===l||void 0===l?void 0:l.id]);const y=async()=>{if(l&&l.id){p(!0);try{m.indexOf(t);if("Create"===t){const e=await h.routeStart(l.id);if(console.log("routeStartResponse",e),"Started"!==(null===e||void 0===e?void 0:e.routeStatus))throw new Error("Route not started properly")}const e=await h.getTaskList(l.id);let i=null;if(Array.isArray(e)){const l=e.find((e=>{var l;return"complete"!==(null===(l=e.current)||void 0===l?void 0:l.toLowerCase())}));i=null===l||void 0===l?void 0:l.id,i||1!==e.length||(i=e[0].id)}else"string"===typeof e&&(i=e);if(i){const e=await h.taskApproval(i);if(null!==e&&void 0!==e&&e.success){const e=m.indexOf(t),i=m[e+1];i&&(a((e=>[...new Set([...e,i])])),o(i),localStorage.setItem(`saasLifecycleStep_${null===l||void 0===l?void 0:l.id}`,i)),r(!0),v({severity:"success",desc:" Task successfully approved!"})}}}catch(s){var e,i,n,d;r(!0),v({severity:"error",desc:(null===s||void 0===s||null===(e=s.response)||void 0===e||null===(i=e.data)||void 0===i||null===(n=i.details)||void 0===n||null===(d=n.Response)||void 0===d?void 0:d.ErrorMessage)||"Approval failed"})}finally{p(!1)}}};return(0,N.jsx)(d.Ay,{item:!0,md:12,sm:12,xs:12,className:"font-medium",children:(0,N.jsxs)("div",{style:{margin:"auto auto 25px auto",textAlign:"center",width:"75%",position:"relative"},children:[u&&(0,N.jsx)(He.A,{openAlert:s,openDesc:u,setOpenAlert:r}),c&&(0,N.jsx)("div",{style:{textAlign:"center"},children:(0,N.jsx)(w.A,{show:c})}),(0,N.jsx)(oe.A,{sx:{width:"100%"},spacing:4,children:(0,N.jsx)(ne.A,{alternativeLabel:!0,activeStep:m.indexOf(t),children:m.map(((e,l)=>(0,N.jsxs)(ae.A,{children:[(0,N.jsxs)("div",{style:{width:"auto",minWidth:"110px",display:"inline-table",padding:"10px",color:t===e?"#ffffff":"#5c5c5c",background:t===e?"#42a2da":"#e6e7e8",zIndex:"1",position:"relative",top:"-10px",borderRadius:"-10px",boxShadow:"0px 2px 2px 0px rgba(0, 0, 0, 0.3)"},"data-state":e,children:[0!==l&&(0,N.jsx)("span",{style:{width:"0",height:"0",borderStyle:"solid",borderTop:"7px solid transparent",borderBottom:"7px solid transparent",borderLeft:"10px solid #bdbdbd",position:"absolute",left:"-10px",top:"15.5px"}}),e]}),n.includes(e)&&t===e&&"Release"!==e&&(0,N.jsx)("div",{children:(0,N.jsx)(de.A,{component:"button",variant:"body2",underline:"none",title:Ge,onClick:y,children:Ge})})]},e)))})})]})})}const qe=(0,o.Ay)("div")((e=>{let{theme:l}=e;return{margin:"30px",[l.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[l.breakpoints.down("sm")]:{marginBottom:"16px"}}}}));function ze(e){return(0,N.jsx)("div",{role:"tabpanel",hidden:(null===e||void 0===e?void 0:e.value)!==(null===e||void 0===e?void 0:e.index),id:`simple-tabpanel-${e.index}`,"aria-labelledby":`simple-tab-${null===e||void 0===e?void 0:e.index}`,...e.other,children:e.value===e.index&&(0,N.jsx)(n.A,{sx:{p:3},children:(0,N.jsx)(a.A,{children:e.children})})})}function Ke(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}const Je=()=>{var e,l,t,o;const a=_e(),y=(0,j.wA)(),{isPageHavingIssue:P,responseData:E,templates:R,templateMappingsInfo:C,lifeCycleData:T,systemSetingsDetail:k,mrDetails:S,RSMEList:D,RMEList:I,isPropertyFormEdited:M,eachTemplateOptions:L,materialData:F,updatedRoutes:B}=(0,j.d4)((e=>({cc:e.mcoDetails.isPageHavingIssue,responseData:e.mcoDetails.responseData,templates:e.mcoDetails.templates,templateMappingsInfo:e.mcoDetails.templateMappingsInfo,lifeCycleData:e.mcoDetails.lifeCycleData,systemSetingsDetail:e.mcoDetails.systemSetingsDetail,mrDetails:e.mcoDetails.mrDetails,RSMEList:e.mcoDetails.RSMEList,RMEList:e.mcoDetails.RMEList,isPropertyFormEdited:e.mcoDetails.isPropertyFormEdited,eachTemplateOptions:e.mcoDetails.eachTemplateOptions,materialData:e.mcoDetails.materialData,updatedRoutes:e.mcoDetails.updatedRoutes})),j.bN),[_,V]=(0,i.useState)(0),[H,$]=(0,i.useState)(null),[U,Y]=(0,i.useState)(!0),[G,W]=(0,i.useState)([]),[q,K]=(0,i.useState)(!1),[J,Q]=(0,i.useState)(!1),[X,Z]=(0,i.useState)("Start"),[ee,le]=(0,i.useState)(null),[te,oe]=(0,i.useState)(!1),[ne,ae]=(0,i.useState)(null),[de,se]=(0,i.useState)(!1),[re,ue]=(0,i.useState)(localStorage.getItem("plantType")||"");(0,i.useEffect)((()=>()=>localStorage.removeItem("plantType")),[]);const ce=localStorage.getItem("selectedRouteId"),pe=(0,i.useMemo)((()=>B.find((e=>e.id===ce))),[B,ce]),me=new g.f,he=(0,b.g)(),ye=localStorage.getItem("instance"),xe=async(e,l)=>{try{let t=[];await(0,z.BV)(e,l).then((async()=>{var i;let o=[{id:null===e||void 0===e||null===(i=e.mcoPropeties)||void 0===i?void 0:i.id,instance:ye}],n=e;await me.getattributesbyid(o).then((async e=>{let i=!1,o={};if(null!==e&&void 0!==e&&e.data[0]){o=null===e||void 0===e?void 0:e.data[0],y((0,A.RY)({currentMcoDetails:o}));const l=await(async(e,l,t,i)=>{try{var o,n,a;return e.mcoaffectedItem=null===e||void 0===e?void 0:e.mcoaffectedItem.map((e=>{var t,o,n,a,d,s,r,u,v;const c={...e},p=(null===(t=l.data[0].mcoaffectedItem)||void 0===t?void 0:t.find((l=>(null===e||void 0===e?void 0:e.id)===l.id)))||{},m=null!==(o=null===p||void 0===p?void 0:p.materialType)&&void 0!==o?o:null;c.materialType=m;const h="yes"===(null===(n=c.exportToERP)||void 0===n?void 0:n.toLowerCase());let y=null===p||void 0===p?void 0:p.exportToERP;return"string"===typeof(null===p||void 0===p?void 0:p.exportToERP)&&"yes"===(null===p||void 0===p||null===(a=p.exportToERP)||void 0===a?void 0:a.toLowerCase())&&(y=!0),"string"===typeof(null===p||void 0===p?void 0:p.exportToERP)&&"no"===(null===p||void 0===p||null===(d=p.exportToERP)||void 0===d?void 0:d.toLowerCase())&&(y=!1),c.makeOrBuy=null!==p&&void 0!==p&&p.makeOrBuy?null===p||void 0===p||null===(s=p.makeOrBuy)||void 0===s?void 0:s.toLowerCase():null===c||void 0===c||null===(r=c.makeOrBuy)||void 0===r?void 0:r.toLowerCase(),c.exportToERP=null!==p&&void 0!==p&&p.exportToERP?y:h,c.itemStatus=null!==p&&void 0!==p&&p.itemStatus?null===p||void 0===p||null===(u=p.itemStatus)||void 0===u?void 0:u.toLowerCase():null===c||void 0===c||null===(v=c.ErpStatus)||void 0===v?void 0:v.toLowerCase(),c.isTemplateValueChange=!1,c.isMakeOrBuyValueChange=!1,c.isExportToERPValueChange=!1,c.isItemStatusValueChange=!1,m&&(i=!0),c})),null!==t&&void 0!==t&&null!==(o=t.mcoProperties)&&void 0!==o&&o.hasOwnProperty("ECOExportToERP")&&""!==(null===t||void 0===t||null===(n=t.mcoProperties)||void 0===n?void 0:n.ECOExportToERP)?e.mcoPropeties.ECOExportToERP=null===t||void 0===t||null===(a=t.mcoProperties)||void 0===a?void 0:a.ECOExportToERP:e.mcoPropeties.ECOExportToERP="yes",await y((0,A.H1)({mcoPropeties:null===e||void 0===e?void 0:e.mcoPropeties,mcoaffectedItem:null===e||void 0===e?void 0:e.mcoaffectedItem})),i}catch(d){throw(0,z.v)(d,"findAndSaveExistingMco"),d}})(n,e,o,i);"boolean"===typeof l&&(i=l)}else await(async(e,l)=>{try{var t,i,o;return e.mcoaffectedItem=null===e||void 0===e?void 0:e.mcoaffectedItem.map(((e,l)=>{var t,i,o,n,a,d;const s={...e};let r=null===s||void 0===s?void 0:s.exportToERP;return"string"===typeof(null===s||void 0===s?void 0:s.exportToERP)&&"yes"===(null===s||void 0===s||null===(t=s.exportToERP)||void 0===t?void 0:t.toLowerCase())&&(r=!0),"string"===typeof(null===s||void 0===s?void 0:s.exportToERP)&&"no"===(null===s||void 0===s||null===(i=s.exportToERP)||void 0===i?void 0:i.toLowerCase())&&(r=!1),s.makeOrBuy=null!==(o=null===s||void 0===s||null===(n=s.makeOrBuy)||void 0===n?void 0:n.toLowerCase())&&void 0!==o?o:"buy",s.exportToERP=r,s.itemStatus=null!==(a=null===s||void 0===s||null===(d=s.ErpStatus)||void 0===d?void 0:d.toLowerCase())&&void 0!==a?a:"active",s.isTemplateValueChange=!1,s.isMakeOrBuyValueChange=!1,s.isExportToERPValueChange=!1,s.isItemStatusValueChange=!1,s})),l&&null!==(t=Object.keys(l))&&void 0!==t&&t.length&&null!==l&&void 0!==l&&null!==(i=l.mcoProperties)&&void 0!==i&&i.hasOwnProperty("ECOExportToERP")?e.mcoPropeties.ECOExportToERP=null===l||void 0===l||null===(o=l.mcoProperties)||void 0===o?void 0:o.ECOExportToERP:e.mcoPropeties.ECOExportToERP="yes",await y((0,A.H1)({mcoPropeties:e.mcoPropeties,mcoaffectedItem:e.mcoaffectedItem})),await y((0,A.RY)({currentMcoDetails:e})),e}catch(n){throw(0,z.v)(n,"findAndSaveInitialMco"),n}})(n);await(async(e,l,t,i,o)=>{try{return t.length&&await me.getattributesbyid(t).then((async n=>{await fe(n,t,e,l,i,o)})).catch((l=>{be(e,o)})),t}catch(n){throw(0,z.v)(n,"findAndSaveMasterMco"),n}})(n,o,l,i,t)})),await Ce(n)}))}catch(t){return t}},fe=async(e,l,t,i,o,n)=>{var a;const d=(null===e||void 0===e?void 0:e.data[0])||{},s=we(l[0],null===t||void 0===t?void 0:t.mcoPropeties);d.plantName=null===t||void 0===t||null===(a=t.mcoPropeties)||void 0===a?void 0:a.plantName,d.master=s?"Y":"N",$(d),await y((0,A.RY)({masterData:d})),je(i,t)&&Z("Item");let r=(null===t||void 0===t?void 0:t.mcoaffectedItem)||[];var u;o||(r=Pe(null===t||void 0===t?void 0:t.mcoaffectedItem,d.mcoaffectedItem),null!==d&&void 0!==d&&null!==(u=d.mcoaffectedItem)&&void 0!==u&&u.length||await Ee(t,n));const v=(0,z.kx)(t,d);await y((0,A.H1)({mcoProperties:v,mcoaffectedItem:r,masterData:d,isMaster:s?"Y":"N"}))},be=(e,l)=>{$({}),y((0,A.RY)({masterData:{}})),Ee(e,l)},we=(e,l)=>(null===e||void 0===e?void 0:e.id)===(null===l||void 0===l?void 0:l.id),je=(e,l)=>{var t;return(null===e||void 0===e?void 0:e.clientReleaseDate)&&""!==(null===e||void 0===e?void 0:e.clientReleaseDate)&&["Review"].includes(null===l||void 0===l||null===(t=l.mcoProperties)||void 0===t?void 0:t.mcostate)},Pe=(e,l)=>e.map((e=>{const t=(null===l||void 0===l?void 0:l.find((l=>(null===e||void 0===e?void 0:e.id)===l.id)))||{};return e.materialType=t.materialType||null,e})),Ee=async(e,l)=>{e.mcoaffectedItem.forEach((async(t,i)=>{var o,n,a;let d=null===l||void 0===l?void 0:l.filter(((e,l)=>{var i,o;return(null===t||void 0===t?void 0:t.materialType)&&e.templateName===(null===t||void 0===t||null===(i=t.materialType)||void 0===i?void 0:i.name)||e.desc===(null===t||void 0===t||null===(o=t.attributeGroupData)||void 0===o?void 0:o.ERPItemTypeTemplate)}));if(d=null!==(o=d)&&void 0!==o&&o.length?d[0]:{},Object.keys(d).length&&(null===(n=d)||void 0===n?void 0:n.desc)===(null===t||void 0===t||null===(a=t.attributeGroupData)||void 0===a?void 0:a.ERPItemTypeTemplate)){var s;let t=e.mcoaffectedItem;t[i].materialType=Object.keys(d).length?{name:null===(s=d)||void 0===s?void 0:s.templateName}:null,await Se(t,i,l,e),await y((0,A.RY)({isMaterialFormEdited:!0}))}}))},Ce=async e=>{const l=[];e.mcoaffectedItem.forEach((t=>{l.push(e.mcoPropeties.name+"_"+t.name)})),await me.getERPStatus(l).then((async e=>{if(null!==e&&void 0!==e&&e.data){const l=null===e||void 0===e?void 0:e.data.map((e=>{var l,t;return{Item_Name:null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.Item_Name,status:null===e||void 0===e||null===(t=e.details)||void 0===t?void 0:t.status}}));await y((0,A.H1)({itemERPStatus:[...l]}))}})).catch((e=>(Y(!1),e)))},Te=async(e,l,t,i,o)=>{const n=null===o||void 0===o?void 0:o.findIndex((l=>(null===e||void 0===e?void 0:e.id)===(null===l||void 0===l?void 0:l.id)));-1!==n&&await y((0,A.RY)({selectedRowIndex:n}));((e,l,t,i)=>{let o=[];null===l||void 0===l||l.forEach((l=>{var n;(null===e||void 0===e||null===(n=e.materialType)||void 0===n?void 0:n.name)===l.templateName&&t.forEach((t=>{var n;if((null===e||void 0===e||null===(n=e.materialType)||void 0===n?void 0:n.name)===t.templateName){var a;const n=(null===t||void 0===t?void 0:t.attributes)||[],s=(null===l||void 0===l?void 0:l.attributes)||[];var d;if(n&&s&&(o=n,o=(null===e||void 0===e||null===(d=e.relatedMCOs[0])||void 0===d?void 0:d.id)===(null===i||void 0===i?void 0:i.id)?n:n.concat(s)),null!==(a=o)&&void 0!==a&&a.length){let e=[...o].filter(((e,l,t)=>l===(null===t||void 0===t?void 0:t.findIndex((l=>l.name===e.name)))));o=e}y((0,A.RY)({selectedRowFormdata:o}))}}))}))})(e,l,R,i);"form"===t&&await y((0,A.RY)({selectedRowData:e}))},ke=async(e,l,t,i)=>{var o,n;const a=i.mcoPropeties,d=null===a||void 0===a?void 0:a.plantName,s=null===e||void 0===e?void 0:e.organization,r=(0,Be.Nt)(C,s,d);if((null===r||void 0===r||!r.includes(d))&&(!Object.keys(e).length||null===e||void 0===e||!e.materialType||0===e))return oe(!0),void ae({severity:"info",desc:"Please select Material Type"});const u=await(0,z.Vx)();var v;if(null!==i&&void 0!==i&&null!==(o=i.mcoPropeties)&&void 0!==o&&null!==(n=o.organizationId)&&void 0!==n&&n.includes("SAP")&&(H&&0===(null===(v=Object.keys(H))||void 0===v?void 0:v.length))){if(((null===u||void 0===u?void 0:u.filter((e=>{var l,t;return(null===e||void 0===e||null===(l=e.relatedMCOs[0])||void 0===l?void 0:l.id)!==(null===i||void 0===i||null===(t=i.mcoPropeties)||void 0===t?void 0:t.id)})))||[]).length)return oe(!0),void ae({severity:"info",desc:"Please check master MCO attributes!"})}if(null!==e&&void 0!==e&&e.materialType)await Te(e,l,t,null===i||void 0===i?void 0:i.mcoProperties,u);else{const l=null===u||void 0===u?void 0:u.findIndex((l=>(null===e||void 0===e?void 0:e.id)===(null===l||void 0===l?void 0:l.id))),t=[...u];t[l].materialType=null,await y((0,A.H1)((e=>({...e,...t}))))}await y((0,A.RY)({showMaterialForm:!0}))},Se=async(e,l,t,i)=>{let o=e.filter(((e,t)=>t===l));o=o.length?o[0]:null,await y((0,A.H1)({mcoaffectedItem:e})),await y((0,A.RY)({isMaterialFormEdited:!0})),ke(o,t,"auto",i)},De=async e=>{try{const l=await(0,z.Vx)();await y((0,A.H1)({mcoaffectedItem:l}));const t=null===E||void 0===E?void 0:E.mcoPropeties,i=null===t||void 0===t?void 0:t.plantName,o=`${null===t||void 0===t?void 0:t.name}_${i}`;"form"===e&&Y(!0);const n=await me.getattributesbyid([{id:null===t||void 0===t?void 0:t.id,instance:ye}]),{status:a,message:d}=n;if("failed"===a)return oe(!0),ae({severity:"error",desc:d}),!1;const s=l?JSON.parse(JSON.stringify(l)):[],r=(null===s||void 0===s?void 0:s.map((e=>(null===e||void 0===e||delete e.isTemplateValueChange,null===e||void 0===e||delete e.isMakeOrBuyValueChange,null===e||void 0===e||delete e.isExportToERPValueChange,null===e||void 0===e||delete e.isItemStatusValueChange,e))))||[],u=await ol(),v={id:null===t||void 0===t?void 0:t.id,producthub:`${o}`,uniquePartId:`${o}`,mcoProperties:t,mcoaffectedItem:r,source:null===E||void 0===E?void 0:E.source,target:null===E||void 0===E?void 0:E.target,partlistPayload:u};if(Object.keys(null===n||void 0===n?void 0:n.data).length&&null!==n&&void 0!==n&&n.data[0]){const t=await me.updatePartListAndAttributes(v);if("failed"===t.status)return oe(!0),void ae({severity:"error",desc:"Something went wrong while updating MR data to Enovia. Please update the templates again."});"object"===typeof t&&(t.data.mcoaffectedItem=l,await He(t,"updated",e),await y((0,A.RY)({bulkPartTemplates:[]})))}else{const l=await me.updatePartListAndAddAttributes(v);if("failed"===l.status)return oe(!0),void ae({severity:"error",desc:"Something went wrong while updating MR data to Enovia. Please update the templates again."});"object"===typeof l&&(await He(l,"added",e),await y((0,A.RY)({bulkPartTemplates:[]})))}return"form"===e&&setTimeout((()=>{Y(!1)}),500),!0}catch(l){return!1}},Ve=async function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{var t;const i=await(0,z.Vx)(),o=null===i||void 0===i?void 0:i.map((l=>{var t,i,o,n,a,d,s,r;return{partAndPlant:`${null===l||void 0===l?void 0:l.name}_${null===e||void 0===e||null===(t=e.mcoPropeties)||void 0===t?void 0:t.plantName}`,partName:`${null===l||void 0===l?void 0:l.name}`,plantName:`${null===e||void 0===e||null===(i=e.mcoPropeties)||void 0===i?void 0:i.plantName}`,revision:null===l||void 0===l?void 0:l.revision,mcoId:null===e||void 0===e||null===(o=e.mcoPropeties)||void 0===o?void 0:o.id,mcoName:null===e||void 0===e||null===(n=e.mcoPropeties)||void 0===n?void 0:n.name,ERPStatus:null===l||void 0===l||null===(a=l.itemStatus)||void 0===a?void 0:a.toLowerCase(),makeOrBuy:null===l||void 0===l||null===(d=l.makeOrBuy)||void 0===d?void 0:d.toLowerCase(),template:null===l||void 0===l||null===(s=l.materialType)||void 0===s?void 0:s.name,mcobusinessUnit:null===e||void 0===e||null===(r=e.mcoPropeties)||void 0===r?void 0:r.businessUnit,partId:null===l||void 0===l?void 0:l.id,instance:ye}})),n=await me.getMRRelatedDetailsbyid({mcoName:null===e||void 0===e||null===(t=e.mcoPropeties)||void 0===t?void 0:t.name});"load"===l?Object.keys((null===n||void 0===n?void 0:n.data)||{}).length||await me.addMRRelatedDetails(o):Object.keys((null===n||void 0===n?void 0:n.data)||{}).length&&null!==n&&void 0!==n&&n.data[0]?await me.updateMRRelatedDetails(o):await me.addMRRelatedDetails(o)}catch(i){if("load"===l)throw(0,z.v)(i,"handleMRDetails"),i;return null===i||void 0===i?void 0:i.message}},He=async(e,l,t)=>{if("form"===t&&(oe(!0),ae({severity:"success",desc:`Attributes ${l} successfully!`})),await y((0,A.RY)({isMaterialFormEdited:!1})),null!==e&&void 0!==e&&e.data){var i,o;const l=(null===(i=E.mcoaffectedItem)||void 0===i?void 0:i.map(((l,t)=>{var i,o;return{...l,...null===e||void 0===e||null===(i=e.data)||void 0===i||null===(o=i.mcoaffectedItem)||void 0===o?void 0:o[t]}})))||[];await y((0,A.H1)({mcoPropeties:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.mcoProperties,mcoaffectedItem:l})),await Ve(E),await(0,z.By)(E)}},$e=async function(){var e;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"form",t=Ue();if(!t&&"auto"!==l)return oe(!0),ae({severity:"error",desc:"Invalid Properties. Please check properties fields."}),t;const i=(0,z.Mm)(E);await y((0,A.RY)({isPropertyFormEdited:!1})),"auto"!==l&&Y(!0);let o=!1;return await me.updateMCOData(null===E||void 0===E||null===(e=E.mcoPropeties)||void 0===e?void 0:e.id,i).then((async e=>{var t;if("object"!==typeof e||!Object.keys(e).length||null!==(t=Object.keys(e))&&void 0!==t&&t.includes("code"))o=!0,oe(!0),ae({severity:"error",desc:"An unexpected error occurred."}),Y(!1);else{var i,n,a,d;const t=(null===I||void 0===I?void 0:I.find((l=>l.key===(null===e||void 0===e?void 0:e.rme))))||null;e.rmeEmailAddress=t&&null!==(i=Object.keys(t))&&void 0!==i&&i.length?null===t||void 0===t?void 0:t.email:null;const r=(null===D||void 0===D?void 0:D.find((l=>l.key===(null===e||void 0===e?void 0:e.rsme))))||null;var s;if(e.rsmeEmailAddress=r&&null!==(n=Object.keys(r))&&void 0!==n&&n.length?null===r||void 0===r?void 0:r.email:null,e.ECOExportToERP="",null!==E&&void 0!==E&&null!==(a=E.mcoPropeties)&&void 0!==a&&a.ECOExportToERP)e.ECOExportToERP=null===E||void 0===E||null===(s=E.mcoPropeties)||void 0===s?void 0:s.ECOExportToERP;if(await y((0,A.H1)({mcoPropeties:e})),null!==(d=Object.keys(e))&&void 0!==d&&d.includes("errorMsg")&&null!==e&&void 0!==e&&e.errorMsg&&""!==(null===e||void 0===e?void 0:e.errorMsg)){if("auto"!==l)return oe(!0),ae({severity:"error",desc:null===e||void 0===e?void 0:e.errorMsg}),Y(!1),!1;o=!0}"auto"!==l&&(oe(!0),ae({severity:"success",desc:"Properties updated successfully!"})),await(0,z.H8)(e,E,"savePropertiesOnly"),"auto"!==l&&Y(!1)}})).catch((e=>{o=!0;let l=null;l="Network Error"===e.message?"Network error, please check your internet connection.":"ECONNABORTED"===e.code?"A timeout occurred.":e.response?`Server error: ${e.response.status} ${e.response.statusText}`:"An unexpected error occurred.",e.message.includes("net::ERR_NETWORK_CHANGED")&&(l="Network changed, please check your internet connection."),l&&(oe(!0),ae({severity:"error",desc:l}),Y(!1))})),o},Ue=()=>{const e=["description","rme","rsme","startdate","ECOExportToERP"];for(const l in null===E||void 0===E?void 0:E.mcoPropeties)if(null!==E&&void 0!==E&&E.mcoPropeties.hasOwnProperty(l)&&e.includes(l)&&(null===E||void 0===E||!E.mcoPropeties[l]||"Invalid Date"===(null===E||void 0===E?void 0:E.mcoPropeties[l])||"Unassigned"===(null===E||void 0===E?void 0:E.mcoPropeties[l])))return!1;return!0},Ge=async function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"SaaS"===ye&&("demote"===l&&"In Approval"===e?e="In Work":"In Work"===e&&(e="In Approval"));try{var t,i,o,n,a,d,s;l&&Y(!0);let p={};"Release"!==e&&"Approved"!==e||(p=await(0,z.F$)(E));let m={};var r,u,v,c;if(m=await me.mcoStatusValidation([null===E||void 0===E||null===(t=E.mcoPropeties)||void 0===t?void 0:t.name]),"success"===(null===(i=m)||void 0===i?void 0:i.status)&&"failed"===(null===(o=m)||void 0===o||null===(n=o.data)||void 0===n||null===(a=n[null===E||void 0===E||null===(d=E.mcoPropeties)||void 0===d?void 0:d.name])||void 0===a?void 0:a.status))return oe(!0),ae({severity:"error",desc:null===(r=m)||void 0===r||null===(u=r.data)||void 0===u||null===(v=u[null===E||void 0===E||null===(c=E.mcoPropeties)||void 0===c?void 0:c.name])||void 0===v?void 0:v.message}),Y(!1),!1;await me.changeStateByMcoId(null===E||void 0===E||null===(s=E.mcoPropeties)||void 0===s?void 0:s.id,e,p).then((async e=>{if(Object.keys(e).length){var l,t,i;if(e.ECOExportToERP="",null!==E&&void 0!==E&&null!==(l=E.mcoPropeties)&&void 0!==l&&l.ECOExportToERP)e.ECOExportToERP=null===E||void 0===E||null===(i=E.mcoPropeties)||void 0===i?void 0:i.ECOExportToERP;if(await y((0,A.H1)({mcoPropeties:e})),le(null===e||void 0===e?void 0:e.mcostate),await(0,z.H8)(e,E,"saveMcoState"),(null===E||void 0===E||null===(t=E.mcoPropeties)||void 0===t?void 0:t.mcostate)===(null===e||void 0===e?void 0:e.mcostate))return oe(!0),void ae({severity:"error",desc:null!==e&&void 0!==e&&e.errorMsg?null===e||void 0===e?void 0:e.errorMsg:"Status update failed. Please verify the details and try again."});["Implemented","Complete"].includes(null===e||void 0===e?void 0:e.mcostate)&&(oe(!0),ae({severity:"success",desc:"Successfully implemented!"}),le("Implemented")),["Create"].includes(null===e||void 0===e?void 0:e.mcostate)&&(oe(!0),ae({severity:"info",desc:"Demoted successfully!"})),["Review"].includes(null===e||void 0===e?void 0:e.mcostate)&&(oe(!0),ae({severity:"success",desc:"Promoted successfully!"}),le("Review"))}})),l&&Y(!1)}catch(p){return Y(!1),null===p||void 0===p?void 0:p.message}},Je=async e=>{var l;let t=!1;return await me.validationByMcoId(null===e||void 0===e||null===(l=e.mcoPropeties)||void 0===l?void 0:l.id).then((async e=>{var l;if(null!==e&&void 0!==e&&e.pass)t=!0;else if(null!==e&&void 0!==e&&null!==(l=e.fail)&&void 0!==l&&l.length){var i;const l=[];null===e||void 0===e||null===(i=e.fail)||void 0===i||i.forEach((e=>{if(null!==e&&void 0!==e&&e.includes("Pass~~")||null!==e&&void 0!==e&&e.includes("Pass~"))return!0;if(null!==e&&void 0!==e&&e.includes("Fail~~")){const t=null===e||void 0===e?void 0:e.replace("Fail~~","");l.push(t)}else if(null!==e&&void 0!==e&&e.includes("Fail~")){const t=null===e||void 0===e?void 0:e.replace("Fail~","");l.push(t)}else l.push(e)}));const t=null===l||void 0===l?void 0:l.map((e=>(0,N.jsx)("li",{children:e},x().generate())));oe(!0),ae({severity:"error",desc:t})}})),t},Qe=async e=>{const l=await(0,z.Vx)(),{valid:t,errDesc:i}=await(0,z.fc)("lifecycle",E,l,G);if(!t)return el(i),!1;let o=await Xe();const{valid:n,errDesc:a}=o;if(!n)return ll(a),!1;if("Create"===e||"Prepare"===e||"In Work"===e){if(await tl())return Y(!1),!1}else if(("Review"===e||"In Approval"===e)&&await il())return Y(!1),!1;return!0},Xe=async()=>{let e={valid:!0,errDesc:[]},l=!0;if(null!==k&&void 0!==k&&k.length){var t;let i={affectedItemsInfo:E};if(null!==(t=window)&&void 0!==t&&t.ExternalClass){const t=new window.ExternalClass(i);e=await t.dropdownValidation(),l=!1,e.hasOwnProperty("valid")}}var i,o;l&&(null!==E&&void 0!==E&&null!==(i=E.mcoPropeties)&&void 0!==i&&null!==(o=i.organizationId)&&void 0!==o&&o.includes("SAP")||(e=await(0,Be.rq)(E)));return e},Ze=async()=>!!await Je(E)&&(await Ge("Implemented"),await Ge("Complete"),!0),el=e=>{let l=e;var t;if("object"!==typeof e||Array.isArray(e)||null===e)if(Array.isArray(e))l=null===e||void 0===e?void 0:e.map((e=>(0,N.jsx)("li",{children:e},x().generate())));else{if("string"!==typeof e)return;l=e}else Object.keys(e).length&&(l=null===(t=Object.keys(e))||void 0===t?void 0:t.map((l=>(0,N.jsx)("li",{children:e[l]},x().generate()))));oe(!0),ae({severity:"error",desc:l})},ll=e=>{const l=null===e||void 0===e?void 0:e.map((e=>(0,N.jsx)("li",{children:e},x().generate())));oe(!0),ae({severity:"error",desc:l})},tl=async()=>{if("onPrem"===ye){if(await Je(E))return await Ge("Review"),!0}else await Ge(E.mcoPropeties.mcostate);return!1},il=async()=>{var e;if("onPrem"===ye&&!await Je(E))return!1;const l=localStorage.getItem("instance"),t={mcolists:[null===E||void 0===E||null===(e=E.mcoPropeties)||void 0===e?void 0:e.name],instance:l};try{const e=await me.sendMCO(t);nl(e)}catch(i){return!1}return!0},ol=async()=>{const e=await(0,z.Vx)();return null===e||void 0===e?void 0:e.map((e=>{var l,t,i,o,n,a,d,s,r;const u=null===e||void 0===e?void 0:e.organization,v=(null===C||void 0===C?void 0:C.filter((e=>{var l,t;return"orgallowedvalues"===e.MappingType&&(null===(l=e.BUID)||void 0===l?void 0:l.toLowerCase())===(null===u||void 0===u?void 0:u.toLowerCase())&&"y"===((null===e||void 0===e||null===(t=e.details)||void 0===t?void 0:t.Optional)||"").toLowerCase()})).map((e=>{var l;return null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.ALLOWABLE_ORG_TEMPLATES})))||[],c=(null===Fe||void 0===Fe||null===(l=Fe.mmiMBOM)||void 0===l||null===(t=l.ComAssyOptionalNo)||void 0===t?void 0:t.includes(null===e||void 0===e||null===(i=e.materialType)||void 0===i?void 0:i.name))||!1,p=(null===S||void 0===S||null===(o=S.previousSeqMR[null===e||void 0===e?void 0:e.name])||void 0===o||null===(n=o[0])||void 0===n?void 0:n.makeOrBuy)||null;return{PartObjectId:null===e||void 0===e?void 0:e.id,MCOId:null===E||void 0===E||null===(a=E.mcoPropeties)||void 0===a?void 0:a.id,PartName:null===e||void 0===e?void 0:e.name,PartType:null===e||void 0===e?void 0:e.type,PlantName:null===E||void 0===E||null===(d=E.mcoPropeties)||void 0===d?void 0:d.plantName,isMakeOrBuyChanged:!!p&&p!==(null===e||void 0===e?void 0:e.makeOrBuy),newMakeOrBuyValue:null===e||void 0===e?void 0:e.makeOrBuy,template:(null===e||void 0===e||null===(s=e.materialType)||void 0===s?void 0:s.name)||"Unassigned",slOptionalYesValue:null===v||void 0===v?void 0:v.includes(null===e||void 0===e||null===(r=e.materialType)||void 0===r?void 0:r.name),slOptionalNoValues:c}}))},nl=e=>{"success"===(null===e||void 0===e?void 0:e.status)?(Z("Item"),oe(!0),ae({severity:"info",desc:null===e||void 0===e?void 0:e.message})):(oe(!0),ae({severity:"error",desc:null===e||void 0===e?void 0:e.message}))},al=async()=>{let e=null;try{var l,t,i,o,n;if(Y(!0),await y((0,A.sy)()),"onPrem"===ye&&await(0,z.rx)(),e=await(async()=>{try{const d=await me.getMCOdetailById(he);if(d&&Object.keys(d).length){var e,l,t,i,o,n,a;le(null===d||void 0===d||null===(e=d.mcoPropeties)||void 0===e?void 0:e.mcostate);const s=null!==Fe&&void 0!==Fe&&null!==(l=Fe.systemSettings)&&void 0!==l&&l[null===d||void 0===d||null===(t=d.source)||void 0===t?void 0:t.url]?null===Fe||void 0===Fe||null===(i=Fe.systemSettings)||void 0===i?void 0:i[null===d||void 0===d||null===(o=d.source)||void 0===o?void 0:o.url]:null;let r={bu:null===d||void 0===d||null===(n=d.mcoPropeties)||void 0===n?void 0:n.businessUnit,instance:s,systemName:null===d||void 0===d||null===(a=d.source)||void 0===a?void 0:a.url};return localStorage.getItem("instance")||localStorage.setItem("instance",s),await y((0,O.o)(r)),{status:!0,data:d}}return y((0,A.RY)({isPageHavingIssue:!0})),{status:!1,data:"Something went wrong!"}}catch(d){return y((0,A.RY)({isPageHavingIssue:!0})),Y(!1),{status:!1,data:d}}})(),null!==(l=e)&&void 0!==l&&l.status)await rl(!1,null===(t=e)||void 0===t?void 0:t.data),await(async e=>{try{var l,t,i,o;if(e.length)return!0;const d=(null===e||void 0===e?void 0:e.mcoaffectedItem)&&((null===e||void 0===e||null===(l=e.mcoaffectedItem)||void 0===l?void 0:l.map((e=>{var l,t;const i=!Object.keys((null===e||void 0===e||null===(l=e.materialType)||void 0===l?void 0:l.attributeMap)||{}).length;return{id:e.id,materialTypeError:!(null!==e&&void 0!==e&&null!==(t=e.materialType)&&void 0!==t&&t.name),attributeFormError:i}})))||[]);W(d);const s=[];var n,a;null!==e&&void 0!==e&&null!==(t=e.mcoPropeties)&&void 0!==t&&null!==(i=t.organizationId)&&void 0!==i&&i.includes("SAP")&&(null!==e&&void 0!==e&&e.mcoaffectedItem&&(null===e||void 0===e||e.mcoaffectedItem.forEach((e=>{var l;if(!s.length&&null!==e&&void 0!==e&&e.relatedMCOs&&Object.keys(null===e||void 0===e?void 0:e.relatedMCOs[0]).includes("id")&&null!==e&&void 0!==e&&null!==(l=e.relatedMCOs[0])&&void 0!==l&&l.id){var t;let l={id:null===e||void 0===e||null===(t=e.relatedMCOs[0])||void 0===t?void 0:t.id};s.push(l)}}))),s.length&&(e.isMaster=(null===(n=s[0])||void 0===n?void 0:n.id)===(null===e||void 0===e||null===(a=e.mcoPropeties)||void 0===a?void 0:a.id)?"Y":"N")),null!==e&&void 0!==e&&null!==(o=e.mcoPropeties)&&void 0!==o&&o.hasOwnProperty("ECOExportToERP")||(e.mcoPropeties.ECOExportToERP=""),await y((0,A.T2)(e)),await y((0,A.RY)({currentMcoDetails:e})),await xe(e,s)}catch(d){throw(0,z.v)(d,"collectMCOdetails"),d}})(null===(i=e)||void 0===i?void 0:i.data),await Ve(null===(o=e)||void 0===o?void 0:o.data,"load"),await(0,z.By)(null===(n=e)||void 0===n?void 0:n.data),await(0,z.Jk)()}catch(a){await y((0,A.RY)({isPageHavingIssue:!0})),console.error("An error occurred:",a)}finally{setTimeout((async()=>{se(!0),Y(!1)}),1e3)}},dl=async e=>{const l=await(async e=>{var l;let t={};return null===e||void 0===e||null===(l=e.mcoaffectedItem)||void 0===l||l.forEach((async e=>{let l=await a(e)||[];t[null===e||void 0===e?void 0:e.name]=l})),t})(E);e&&await y((0,A.RY)({eachTemplateOptions:l}))};(0,i.useEffect)((()=>{dl(de)}),[de]);const sl=async function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Y(!0);try{await rl(e,l)}catch(t){return{status:!1,data:t.message}}finally{Y(!1)}},rl=async function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(null!==he&&void 0!==he&&he.mco_id){var t;const i=[null===he||void 0===he?void 0:he.mco_id],o=await ul(i);if(null!==(t=Object.keys(o))&&void 0!==t&&t.length)if(vl(o),e){const e=await me.getMcoPropertyDetails(null===he||void 0===he?void 0:he.mco_id);if(e&&Object.keys(e).length){const t={...null===l||void 0===l?void 0:l.mcoPropeties,...e};await y((0,A.H1)({mcoPropeties:t})),le(null===e||void 0===e?void 0:e.mcostate);let i=[{id:null===e||void 0===e?void 0:e.id,instance:ye}];cl(o,e)?Z("Item"):Z("Stop"),await me.getattributesbyid(i).then((async e=>{let l={};var i,o;null!==e&&void 0!==e&&e.data[0]&&(l=null===e||void 0===e?void 0:e.data[0],await y((0,A.RY)({currentMcoDetails:l,affectedPartsData:null===(i=l)||void 0===i?void 0:i.mcoaffectedItem})),await y((0,A.H1)({mcoPropeties:t,mcoaffectedItem:null===(o=l)||void 0===o?void 0:o.mcoaffectedItem})),await(0,z.Jk)())}))}}else cl(o,null===l||void 0===l?void 0:l.mcoPropeties)?Z("Item"):Z("Stop");await Ce(l)}}catch(i){throw(0,z.v)(i,"handleRefresh"),i}},ul=async e=>{try{const l=await me.getLifeCycleStatusByMCOName(e);return null===l||void 0===l?void 0:l.data}catch(l){throw y((0,A.RY)({isPageHavingIssue:!0})),(0,z.v)(l),l}},vl=e=>{y((0,A.RY)({lifeCycleData:e}))},cl=(e,l)=>{var t,i,o,n;const a=null===he||void 0===he?void 0:he.mco_id,d=null===e||void 0===e||null===(t=e[a])||void 0===t?void 0:t.promoted,s=null===e||void 0===e||null===(i=e[a])||void 0===i?void 0:i.releaseStatus,r=null===l||void 0===l?void 0:l.mcostate.toLowerCase();return(null===(o=["inprogress","success"])||void 0===o?void 0:o.includes(d))&&"review"===r||(null===(n=["failed"])||void 0===n?void 0:n.includes(s))};(0,i.useEffect)((()=>{let e=null;return(async()=>{if(null!==k&&void 0!==k&&k.length){let t=null!==k&&void 0!==k&&k.length?k[0]:null;var l;if(t)"undefined"===typeof(null===(l=window)||void 0===l?void 0:l.ExternalClass)&&(e=document.createElement("script"),e.src=`${window.location.origin}/resources/js/${t.file1}.js`,e.onerror=(e=>()=>{console.error(`Failed to load script: ${e.src}`)})(e),fetch(e.src).then((e=>{if(!e.ok||!e.headers.get("content-type").includes("javascript"))throw new Error("Not a JavaScript file");return e.blob()})).then((()=>{document.body.appendChild(e)})).catch((l=>{console.error(`Failed to load script: ${e.src}`,l)})))}})(),()=>{if(null!==k&&void 0!==k&&k.length){(null!==k&&void 0!==k&&k.length?k[0]:null)&&e&&document.body.contains(e)&&document.body.removeChild(e)}}}),[k]),(0,i.useEffect)((()=>{al()}),[]);const[pl,ml]=(0,i.useState)(!1),hl=async()=>{const e=null===E||void 0===E?void 0:E.mcoPropeties,l=null===E||void 0===E?void 0:E.mcoaffectedItem;(0,z.Q7)(e,l).then((e=>{oe(!0),ae({severity:null===e||void 0===e?void 0:e.status,desc:null===e||void 0===e?void 0:e.msg})}))},yl=(0,i.useRef)(!0);return(0,i.useEffect)((()=>{yl.current?yl.current=!1:sl(!0,E)}),[q]),(0,N.jsxs)(qe,{children:[P?(0,N.jsx)(Oe.A,{}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(n.A,{className:"breadcrumb",children:(0,N.jsxs)(d.Ay,{container:!0,spacing:1,alignItems:"center",children:[(0,N.jsx)(d.Ay,{item:!0,md:6,sm:12,xs:12,children:(0,N.jsx)(f.Qp,{routeSegments:[{name:null!==E&&void 0!==E&&null!==(e=E.mcoPropeties)&&void 0!==e&&e.name?`${E.mcoPropeties.name} - MCO Details`:"MCO Details"}]})}),(0,N.jsx)(d.Ay,{item:!0,md:6,sm:12,xs:12,className:"textAlignRight",children:(0,N.jsx)(Ne,{responseData:E,setShowTrackerBox:K,setShowHistoryBox:Q})})]})}),(0,N.jsxs)(f.Tn,{children:[(0,N.jsxs)(d.Ay,{container:!0,spacing:3,alignItems:"center",className:"elementPostionRelative",children:[(0,N.jsx)(Me,{handleRefreshButtonFunc:sl,responseData:E}),"SaaS"===ye?(0,N.jsx)(We,{selectedRoute:pe}):(0,N.jsx)(ve,{stepData:ee,lifeCycleStep:X,handleLifeCycle:async e=>M?(oe(!0),void ae({severity:"error",desc:"There are unsaved changes in the properties. Kindly save your edits before proceeding."})):await(0,z.Ph)()?(oe(!0),void ae({severity:"error",desc:"Saving changes is required or Reload to revert back to Prior Template values"})):void(async(e,l)=>{E.action=l,Y(!0);const t=await(0,z.Ph)();if(["Create","Release","Implemented   "].includes(e)){var i,o;let l=[{id:null===E||void 0===E||null===(i=E.mcoPropeties)||void 0===i?void 0:i.id,instance:ye}];if(new Date(null===E||void 0===E||null===(o=E.mcoPropeties)||void 0===o?void 0:o.startdate).getFullYear()>=2049)return oe(!0),ae({severity:"error",desc:"Please set MCO date, promotion cannot be processed with default date."}),void Y(!1);const{status:s,message:r,data:u}=await me.getattributesbyid(l);if("failed"===s)return oe(!0),ae({severity:"error",desc:r}),Y(!1),!1;const v=(null===u||void 0===u?void 0:u.find((e=>{var l;return(null===e||void 0===e?void 0:e.id)===(null===E||void 0===E||null===(l=E.mcoPropeties)||void 0===l?void 0:l.id)})))||{};if(Object.keys(u).length&&v[Object.keys(u).length]){var n,a,d;if((null===E||void 0===E||null===(n=E.mcoPropeties)||void 0===n?void 0:n.mcostate)!==(null===v||void 0===v||null===(a=v.mcoProperties)||void 0===a?void 0:a.mcostate))return oe(!0),ae({severity:"error",desc:`Promote Request was started already for ${null===v||void 0===v||null===(d=v.mcoProperties)||void 0===d?void 0:d.name}, use refresh to confirm completion or error details`}),Y(!1),!1;M||await y((0,A.H1)({mcoPropeties:null===v||void 0===v?void 0:v.mcoProperties,mcoaffectedItem:null===v||void 0===v?void 0:v.mcoaffectedItem})),t||await y((0,A.H1)({mcoPropeties:null===v||void 0===v?void 0:v.mcoProperties,mcoaffectedItem:null===v||void 0===v?void 0:v.mcoaffectedItem}))}if(M){const e=await $e("auto");if(e)return Y(!1),e}["Create","Prepare","In Work"].includes(e)&&t&&await De("auto"),await Qe(e)||Y(!1)}else await Ze()||Y(!1);Y(!1)})(e),demoteState:Ge})]}),(0,N.jsxs)(n.A,{sx:{width:"100%",position:"relative"},children:[[1].includes(_)?(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(Re,{tapvalue:_,stepData:ee,bulkUploadPartandTemplate:()=>{ml(!0)},submitAffectedParts:()=>De("form"),exportMCOData:hl})}):(0,N.jsx)(N.Fragment,{}),[0].includes(_)?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(s.A,{variant:"contained",onClick:()=>hl(),className:"exportMcoDataBtn",children:"Export"}),(0,N.jsx)(s.A,{variant:"contained",onClick:()=>{$e("form")},className:"saveMcoDataBtn",disabled:["Release","Implemented"].includes(ee)||!M,children:"Save"})]}):(0,N.jsx)(N.Fragment,{}),(0,N.jsx)(n.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,N.jsxs)(r.A,{value:_,onChange:(e,l)=>{V(l)},"aria-label":"basic tabs example",children:[(0,N.jsx)(u.A,{label:"Properties",...Ke(0)}),(0,N.jsx)(u.A,{label:"Parts",...Ke(1)})]})}),(0,N.jsx)(ze,{value:_,index:0,children:(0,N.jsx)(Ae,{selectedRoute:pe,plantType:re,tapvalue:_,stepData:ee,submitPropertiesForm:$e})}),(0,N.jsx)(ze,{value:_,index:1,children:(0,N.jsx)(ie,{handleIconClick:ke})})]}),(0,N.jsx)(Ye,{importBulkUpdateFile:pl,setImportBulkUpdateFile:ml,savePartAndOracleTempInRedux:async e=>{const l=e,t={success:[],error:[],warning:[]},i=await(0,z.Vx)();let o=[];null===l||void 0===l||l.forEach((e=>{var l;const n=(null===i||void 0===i?void 0:i.find((l=>{var t;return Object.keys(e).includes("Part Name")&&(null===e||void 0===e||null===(t=e["Part Name"])||void 0===t?void 0:t.trim())===(null===l||void 0===l?void 0:l.name)})))||{};null!==(l=Object.keys(n))&&void 0!==l&&l.length?o.push(null===e||void 0===e?void 0:e["Part Name"]):t.error.push(`ERROR: Part ${null===e||void 0===e?void 0:e["Part Name"]} not found in MCO. Skipping`)}));const n=null===i||void 0===i?void 0:i.map(((e,i)=>{var n;let a={...e},d=(null===L||void 0===L?void 0:L[null===e||void 0===e?void 0:e.name])||[],s={};if(null===o||void 0===o||!o.includes(null===e||void 0===e?void 0:e.name))return e;if(null!==l&&void 0!==l&&l.length){var r;const i=(null===l||void 0===l?void 0:l.find((l=>{var t;return Object.keys(l).includes("Part Name")&&(null===(t=l["Part Name"])||void 0===t?void 0:t.trim())===(null===e||void 0===e?void 0:e.name)})))||{};if(s=(null===F||void 0===F?void 0:F.find((e=>{var l;return Object.keys(i).includes("Oracle Template")&&(null===(l=i["Oracle Template"])||void 0===l?void 0:l.trim())===e.templateName})))||{},null!==(r=Object.keys(s))&&void 0!==r&&r.length){var u,v,c,p,m;if(null===d||void 0===d?void 0:d.some((e=>{var l;return(null===e||void 0===e?void 0:e.templateName)===(null===(l=s)||void 0===l?void 0:l.templateName)})))if((null===e||void 0===e||null===(u=e.materialType)||void 0===u?void 0:u.name)===(null===(v=s)||void 0===v?void 0:v.templateName))t.warning.push(`WARNING: Same Oracle Template value already exists on MCO ${null===E||void 0===E||null===(c=E.mcoPropeties)||void 0===c?void 0:c.name} for ${null===e||void 0===e?void 0:e.name}.`);else a.materialType=s?{name:null===(p=s)||void 0===p?void 0:p.templateName}:null,t.success.push(`SUCCESS: ${i["Oracle Template"]} is updated for ${null===e||void 0===e?void 0:e.name} to ${null===E||void 0===E||null===(m=E.mcoPropeties)||void 0===m?void 0:m.plantName}`);else if(i["Oracle Template"]){var h;t.error.push(`ERROR: Part ${null===e||void 0===e?void 0:e.name} to plant ${null===E||void 0===E||null===(h=E.mcoPropeties)||void 0===h?void 0:h.plantName} is not valid due to Org Allowed, Part Type to Template, or EBOM disallowed or Missing.`)}}else{var y;t.error.push(`ERROR: ${i["Oracle Template"]} is invalid template for ${null===e||void 0===e?void 0:e.name} to ${null===E||void 0===E||null===(y=E.mcoPropeties)||void 0===y?void 0:y.plantName}`)}}else t.error.push("Invalid file. Please check the file.");if(null!==(n=Object.keys(s))&&void 0!==n&&n.length){let l=null===e||void 0===e?void 0:e.organization,t=(null===C||void 0===C?void 0:C.find((e=>{var t,i;return"buplantmapping"===e.MappingType&&(null===(t=e.BUID)||void 0===t?void 0:t.toLowerCase())===(null===l||void 0===l?void 0:l.toLowerCase())&&"bom or no bom"===(null===e||void 0===e||null===(i=e.details)||void 0===i?void 0:i.Entity.toLowerCase())})))||{},i=(null===C||void 0===C?void 0:C.filter((e=>{var t,i,o;return"orgallowedvalues"===e.MappingType&&(null===(t=e.BUID)||void 0===t?void 0:t.toLowerCase())===(null===l||void 0===l?void 0:l.toLowerCase())&&"y"===(null===e||void 0===e||null===(i=e.details)||void 0===i||null===(o=i.Has_MBOM)||void 0===o?void 0:o.toLowerCase())})).map((e=>{var l;return null===e||void 0===e||null===(l=e.details)||void 0===l?void 0:l.ALLOWABLE_ORG_TEMPLATES})))||[],o=!1,n=!1;var x;if(Object.keys(i).length)null!==i&&void 0!==i&&i.includes(null===(x=s)||void 0===x?void 0:x.templateName)&&(n=!0);if(Object.keys(t).length){var f,g;const e=null===t||void 0===t||null===(f=t.details)||void 0===f?void 0:f.PLANT,l=Object.keys(e).filter((l=>{var t;return"no bom"===(null===(t=e[l])||void 0===t?void 0:t.toLowerCase())}));null!==l&&void 0!==l&&l.includes(null===E||void 0===E||null===(g=E.mcoPropeties)||void 0===g?void 0:g.plantName)&&(o=!0)}n&&!o?(a.makeOrBuy="make",a.isMakeOrBuyValueChange=!0):(a.makeOrBuy="buy",a.isMakeOrBuyValueChange=!0)}return a}));return await y((0,A.H1)({mcoaffectedItem:n})),await y((0,A.RY)({affectedPartsData:n,bulkPartTemplates:e,isMaterialFormEdited:!0})),t}})]})]}),(0,N.jsxs)(v.A,{open:q,onClose:async()=>{K(!1)},scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",maxWidth:"md",fullWidth:!0,className:"zIndex999",children:[(0,N.jsxs)(c.A,{id:"scroll-dialog-title",children:["Tracker Details",(0,N.jsx)(s.A,{variant:"contained",onClick:async()=>{await sl(!0,E)},disabled:!T||!(null!==(l=Object.keys(T))&&void 0!==l&&l.length)||"create"===(null===E||void 0===E||null===(t=E.mcoPropeties)||void 0===t||null===(o=t.mcostate)||void 0===o?void 0:o.toLowerCase()),className:"floatRight",children:"Refresh"})]}),(0,N.jsx)(p.A,{dividers:!0,children:(0,N.jsx)(m.A,{id:"scroll-dialog-description",tabIndex:-1,children:(0,N.jsx)(Le.default,{fromPage:"mcodetails",mcoName:null===he||void 0===he?void 0:he.mco_id})})}),(0,N.jsx)(h.A,{children:(0,N.jsx)(s.A,{onClick:async()=>{K(!1)},children:"Close"})})]}),(0,N.jsx)(Ie,{showHistoryBox:J,setShowHistoryBox:Q}),ne?(0,N.jsx)(ge.A,{openAlert:te,openDesc:ne,setOpenAlert:oe}):(0,N.jsx)(N.Fragment,{}),U?(0,N.jsx)("div",{className:"textAlignCenter",children:(0,N.jsx)(w.A,{show:U})}):(0,N.jsx)(N.Fragment,{})]})}},97709:(e,l,t)=>{t.r(l),t.d(l,{default:()=>k});var i=t(65043),o=t(5137),n=t(7963),a=t(67734),d=t(87450),s=t(25078),r=t(39721),u=t(14079),v=t(34535),c=t(81e3),p=t(85865),m=t(63336),h=t(85502),y=(t(41484),t(30761)),x=t(92960);let f=[{type:"item",label:"Item details send to ERP",description:""},{type:"bos",label:"Bill of specification details send to ERP",description:""},{type:"bom",label:"ERP Change Order Creation",description:""},{type:"release",label:"Update Enovia MCO Lifecycle to Release",description:"MCO release is in progress. This process will take some time, so please refresh after a while."}];const g=(0,v.Ay)(n.A)((e=>{let{theme:l,completed:t}=e;return{width:25,height:25,border:`2px solid ${t?l.palette.primary.main:l.palette.grey[500]}`,borderRadius:"50%"}})),b=(0,v.Ay)(a.A,{shouldForwardProp:e=>"completed"!==e})((e=>{let{theme:l,completed:t}=e;return{"& .MuiStepConnector-line":{borderColor:l.palette.grey[500]},...t&&{"& .MuiStepConnector-line":{borderColor:l.palette.primary.main}}}}));function w(e){let{activeStepValue:l,currentMCOTrackerdetails:t={}}=e;const{responseData:n}=(0,o.d4)((e=>e.mcoDetails)),[a,v]=(0,i.useState)(-1),[w,j]=(0,i.useState)("inprogress"),[P,A]=(0,i.useState)(f),O=[0];return(0,i.useEffect)((()=>{if(Object.keys(l||{}).length){var e,i,o;const a=null===n||void 0===n||null===(e=n.mcoPropeties)||void 0===e||null===(i=e.mcostate)||void 0===i?void 0:i.toLowerCase(),d=null===f||void 0===f?void 0:f.map((e=>{var i,o,n,d,s;return null===l||void 0===l||null===(i=l.skippedstage)||void 0===i||!i.includes(null===e||void 0===e?void 0:e.type)||null!==e&&void 0!==e&&null!==(o=e.label)&&void 0!==o&&o.includes("Skipped")||(e.label=`${e.label} - Skipped not required`),null!==(n=["release"])&&void 0!==n&&n.includes(null===e||void 0===e?void 0:e.type)||(e.description=t[`${null===e||void 0===e?void 0:e.type}Message`]),null!==(d=["failed"])&&void 0!==d&&d.includes(t[`${null===e||void 0===e?void 0:e.type}Status`])?e.description=t[`${null===e||void 0===e?void 0:e.type}Message`]:null!==(s=["release"])&&void 0!==s&&s.includes(a)&&(e.description=""),e}));A(d),v(null===l||void 0===l?void 0:l.stepperValue),j(null===l||void 0===l||null===(o=l.currentStatus)||void 0===o?void 0:o.status)}}),[l]),(0,x.jsxs)(c.A,{sx:{maxWidth:400},children:[(0,x.jsx)(d.A,{activeStep:a,orientation:"vertical",className:"stepperContainer",children:P.map(((e,t)=>{var i;return(0,x.jsxs)(s.A,{children:[(0,x.jsx)(r.A,{className:`stepperSpace ${w} ${null!==l&&void 0!==l&&null!==(i=l.skippedstage)&&void 0!==i&&i.includes(null===e||void 0===e?void 0:e.type)?"skippedStep":""}`,StepIconComponent:e=>{var l;const{active:t}=e;return t&&null!==(l=["failed"])&&void 0!==l&&l.includes(w)?(0,x.jsx)(h.A,{sx:{color:"red"}}):(0,x.jsx)(g,{...e})},children:e.label}),(0,x.jsx)(u.A,{className:`stepperContentSpace ${w}`,children:(0,x.jsx)(p.A,{children:(0,y.T_)(e.description)})}),(0,x.jsx)(b,{className:`${w}`,completed:null===O||void 0===O?void 0:O.includes(t)})]},e.label)}))}),a===P.length&&(0,x.jsx)(m.A,{square:!0,elevation:0,sx:{p:3},style:{textAlign:"left"},children:(0,x.jsx)(p.A,{children:"All steps were successfully completed!"})})]})}var j=t(1009),P=t(68903),A=t(77739),O=t(66578);t(56659);const E=(0,v.Ay)("div")((e=>{let{theme:l}=e;return{margin:"30px",[l.breakpoints.down("sm")]:{margin:"16px"},"& .breadcrumb":{marginBottom:"30px",[l.breakpoints.down("sm")]:{marginBottom:"16px"}}}})),R=e=>e&&e[0].toUpperCase()+e.slice(1);function C(e){const l={rme:"Responsible Manufacturing Engineer",rsme:"Responsible Senior Manufacturing Engineer",mcostate:"State",responseFromErp:"Export Status",plantName:"Plant"};return"description"===e.label?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(P.Ay,{item:!0,md:6,sm:6,xs:6,children:["Description",(0,x.jsx)("span",{style:{float:"right"},children:":"})]},`${e.label}-label`),(0,x.jsx)(P.Ay,{item:!0,md:6,sm:6,xs:6,children:(0,x.jsx)(A.A,{title:(0,x.jsx)("div",{style:{maxHeight:"300px",overflowY:"scroll"},children:e.value}),arrow:!0,placement:"top",children:(0,x.jsx)("div",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"300px",cursor:"pointer"},children:e.value.length>50?`${e.value.substring(0,50)}...`:e.value})})},e.label)]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(P.Ay,{item:!0,md:6,sm:6,xs:6,children:[Object.keys(l).includes(e.label)?R(l[e.label]):R(e.label),(0,x.jsx)("span",{style:{float:"right"},children:":"})]},e.label),(0,x.jsx)(P.Ay,{item:!0,md:6,sm:6,xs:6,children:""!==e.value?e.value:"-"})]})}const T=e=>{var l,t;let{isLoading:i,mcodetails:o,activeStep:n,currentMCOTrackerdetails:a}=e;return!!i||(o?(0,x.jsxs)(P.Ay,{container:!0,spacing:1,alignItems:"center",children:[(0,x.jsx)(P.Ay,{item:!0,md:6,sm:12,xs:12,children:(0,x.jsx)(P.Ay,{container:!0,spacing:1,alignItems:"center",children:(0,x.jsx)(P.Ay,{container:!0,spacing:2,alignItems:"start",className:"caDetailsContainer",children:o&&null!==(l=Object.keys(null===o||void 0===o?void 0:o.mcoPropeties))&&void 0!==l&&l.length?null===(t=Object.keys(null===o||void 0===o?void 0:o.mcoPropeties))||void 0===t?void 0:t.map((e=>!["id","type","physicalid","businessUnit","organizationId","responseFromErp","rmeEmailAddress","rsmeEmailAddress","errorMsg"].includes(e)&&(0,x.jsx)(C,{label:e,value:null===o||void 0===o?void 0:o.mcoPropeties[e]},e))):(0,x.jsx)(x.Fragment,{})},"samplekeys2")},"samplekeys")}),(0,x.jsx)(P.Ay,{item:!0,md:6,sm:12,xs:12,style:{textAlign:"right"},children:(0,x.jsx)(w,{activeStepValue:n,currentMCOTrackerdetails:a})})]}):(0,x.jsx)("div",{style:{textAlign:"center",paddingBottom:"10px"},children:"Result not found!"}))},k=e=>{const{lifeCycleData:l,responseData:t}=(0,o.d4)((e=>({lifeCycleData:e.mcoDetails.lifeCycleData,responseData:e.mcoDetails.responseData})),o.bN),[n,a]=(0,i.useState)(!1),[d,s]=(0,i.useState)(null),[r,u]=(0,i.useState)(null),[v,p]=(0,i.useState)({});return(0,i.useEffect)((()=>{const i=null===e||void 0===e?void 0:e.mcoName;((e,l)=>{var i,o,n,d;a(!0),s(t);const r=null===t||void 0===t||null===(i=t.mcoPropeties)||void 0===i||null===(o=i.mcostate)||void 0===o?void 0:o.toLowerCase();if(0===Object.keys(e).length)return void a(!1);const v=e[l]||{};let c=0,m={},h=[];if(null!==(n=Object.keys(v))&&void 0!==n&&n.length||!["release"].includes(r)){if(null!==(d=Object.keys(v))&&void 0!==d&&d.length){const e=!1;if("skipped"===v.promoted||e)c=4,m={type:"release",status:"success"},h=["item","bos","bom"];else{var y;for(const e of Object.keys(v)){if(Object.keys(m).length&&m.status.includes("failed"))continue;const l=v[e];"itemStatus"!==e||"skipped"!==l?"bosStatus"!==e||"skipped"!==l?"bomStatus"!==e||"skipped"!==l?["itemStatus","bosStatus","bomStatus","releaseStatus"].includes(e)&&["inprogress","success","failed"].includes(l)&&(["success"].includes(l)&&(c+=1),m={type:e.replace("Status",""),status:l}):(c+=1,h.push("bom")):(c+=1,h.push("bos")):(c+=1,h.push("item"))}null!==(y=Object.keys(v||{}))&&void 0!==y&&y.includes("releaseStatus")||3==c&&["release","implemented"].includes(r)&&(c+=1)}}}else c=4,m={type:"release",status:"success"},h=["item","bos","bom"];p({stepperValue:c,currentStatus:m,skippedstage:h}),u(v),a(!1)})(l,i)}),[l,t]),(0,x.jsxs)(E,{children:[null!==e&&void 0!==e&&e.fromPage?(0,x.jsx)(T,{isLoading:n,mcodetails:d,activeStep:v,currentMCOTrackerdetails:r}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.A,{className:"breadcrumb",children:(0,x.jsx)(j.Qp,{routeSegments:[{name:"MCO Status Tracker"}]})}),(0,x.jsx)(j.Tn,{children:(0,x.jsx)(T,{isLoading:n,mcodetails:d,activeStep:v,currentMCOTrackerdetails:r})})]}),n?(0,x.jsx)("div",{style:{textAlign:"center"},children:(0,x.jsx)(O.A,{show:n})}):(0,x.jsx)(x.Fragment,{})]})}}}]);
//# sourceMappingURL=6.e6efefb5.chunk.js.map